var Db=Object.defineProperty;var py=n=>{throw TypeError(n)};var Nb=(n,e,t)=>e in n?Db(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Q=(n,e,t)=>Nb(n,typeof e!="symbol"?e+"":e,t),hp=(n,e,t)=>e.has(n)||py("Cannot "+t);var l=(n,e,t)=>(hp(n,e,"read from private field"),t?t.call(n):e.get(n)),_=(n,e,t)=>e.has(n)?py("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),v=(n,e,t,s)=>(hp(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),y=(n,e,t)=>(hp(n,e,"access private method"),t);var Bt=(n,e,t,s)=>({set _(i){v(n,e,i,t)},get _(){return l(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function nw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sw={exports:{}},Df={},iw={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh=Symbol.for("react.element"),Ob=Symbol.for("react.portal"),jb=Symbol.for("react.fragment"),zb=Symbol.for("react.strict_mode"),Hb=Symbol.for("react.profiler"),Bb=Symbol.for("react.provider"),Ub=Symbol.for("react.context"),Vb=Symbol.for("react.forward_ref"),$b=Symbol.for("react.suspense"),Wb=Symbol.for("react.memo"),Gb=Symbol.for("react.lazy"),gy=Symbol.iterator;function Xb(n){return n===null||typeof n!="object"?null:(n=gy&&n[gy]||n["@@iterator"],typeof n=="function"?n:null)}var rw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ow=Object.assign,aw={};function ql(n,e,t){this.props=n,this.context=e,this.refs=aw,this.updater=t||rw}ql.prototype.isReactComponent={};ql.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ql.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function lw(){}lw.prototype=ql.prototype;function sv(n,e,t){this.props=n,this.context=e,this.refs=aw,this.updater=t||rw}var iv=sv.prototype=new lw;iv.constructor=sv;ow(iv,ql.prototype);iv.isPureReactComponent=!0;var my=Array.isArray,cw=Object.prototype.hasOwnProperty,rv={current:null},uw={key:!0,ref:!0,__self:!0,__source:!0};function hw(n,e,t){var s,i={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)cw.call(e,s)&&!uw.hasOwnProperty(s)&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return{$$typeof:wh,type:n,key:r,ref:o,props:i,_owner:rv.current}}function qb(n,e){return{$$typeof:wh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ov(n){return typeof n=="object"&&n!==null&&n.$$typeof===wh}function Yb(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vy=/\/+/g;function dp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Yb(""+n.key):e.toString(36)}function ed(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case wh:case Ob:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+dp(o,0):s,my(i)?(t="",n!=null&&(t=n.replace(vy,"$&/")+"/"),ed(i,e,t,"",function(u){return u})):i!=null&&(ov(i)&&(i=qb(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vy,"$&/")+"/")+n)),e.push(i)),1;if(o=0,s=s===""?".":s+":",my(n))for(var a=0;a<n.length;a++){r=n[a];var c=s+dp(r,a);o+=ed(r,e,t,c,i)}else if(c=Xb(n),typeof c=="function")for(n=c.call(n),a=0;!(r=n.next()).done;)r=r.value,c=s+dp(r,a++),o+=ed(r,e,t,c,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lh(n,e,t){if(n==null)return n;var s=[],i=0;return ed(n,s,"","",function(r){return e.call(t,r,i++)}),s}function Kb(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Kt={current:null},td={transition:null},Qb={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:td,ReactCurrentOwner:rv};function dw(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Lh,forEach:function(n,e,t){Lh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Lh(n,function(){e++}),e},toArray:function(n){return Lh(n,function(e){return e})||[]},only:function(n){if(!ov(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};le.Component=ql;le.Fragment=jb;le.Profiler=Hb;le.PureComponent=sv;le.StrictMode=zb;le.Suspense=$b;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qb;le.act=dw;le.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=ow({},n.props),i=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=rv.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)cw.call(e,c)&&!uw.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:wh,type:n.type,key:i,ref:r,props:s,_owner:o}};le.createContext=function(n){return n={$$typeof:Ub,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Bb,_context:n},n.Consumer=n};le.createElement=hw;le.createFactory=function(n){var e=hw.bind(null,n);return e.type=n,e};le.createRef=function(){return{current:null}};le.forwardRef=function(n){return{$$typeof:Vb,render:n}};le.isValidElement=ov;le.lazy=function(n){return{$$typeof:Gb,_payload:{_status:-1,_result:n},_init:Kb}};le.memo=function(n,e){return{$$typeof:Wb,type:n,compare:e===void 0?null:e}};le.startTransition=function(n){var e=td.transition;td.transition={};try{n()}finally{td.transition=e}};le.unstable_act=dw;le.useCallback=function(n,e){return Kt.current.useCallback(n,e)};le.useContext=function(n){return Kt.current.useContext(n)};le.useDebugValue=function(){};le.useDeferredValue=function(n){return Kt.current.useDeferredValue(n)};le.useEffect=function(n,e){return Kt.current.useEffect(n,e)};le.useId=function(){return Kt.current.useId()};le.useImperativeHandle=function(n,e,t){return Kt.current.useImperativeHandle(n,e,t)};le.useInsertionEffect=function(n,e){return Kt.current.useInsertionEffect(n,e)};le.useLayoutEffect=function(n,e){return Kt.current.useLayoutEffect(n,e)};le.useMemo=function(n,e){return Kt.current.useMemo(n,e)};le.useReducer=function(n,e,t){return Kt.current.useReducer(n,e,t)};le.useRef=function(n){return Kt.current.useRef(n)};le.useState=function(n){return Kt.current.useState(n)};le.useSyncExternalStore=function(n,e,t){return Kt.current.useSyncExternalStore(n,e,t)};le.useTransition=function(){return Kt.current.useTransition()};le.version="18.3.1";iw.exports=le;var L=iw.exports;const Zb=nw(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb=L,eE=Symbol.for("react.element"),tE=Symbol.for("react.fragment"),nE=Object.prototype.hasOwnProperty,sE=Jb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iE={key:!0,ref:!0,__self:!0,__source:!0};function fw(n,e,t){var s,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)nE.call(e,s)&&!iE.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:eE,type:n,key:r,ref:o,props:i,_owner:sE.current}}Df.Fragment=tE;Df.jsx=fw;Df.jsxs=fw;sw.exports=Df;var T=sw.exports,$p={},pw={exports:{}},kn={},gw={exports:{}},mw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,U){var $=R.length;R.push(U);e:for(;0<$;){var ne=$-1>>>1,J=R[ne];if(0<i(J,U))R[ne]=U,R[$]=J,$=ne;else break e}}function t(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var U=R[0],$=R.pop();if($!==U){R[0]=$;e:for(var ne=0,J=R.length,ce=J>>>1;ne<ce;){var Me=2*(ne+1)-1,tt=R[Me],de=Me+1,re=R[de];if(0>i(tt,$))de<J&&0>i(re,tt)?(R[ne]=re,R[de]=$,ne=de):(R[ne]=tt,R[Me]=$,ne=Me);else if(de<J&&0>i(re,$))R[ne]=re,R[de]=$,ne=de;else break e}}return U}function i(R,U){var $=R.sortIndex-U.sortIndex;return $!==0?$:R.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(R){for(var U=t(u);U!==null;){if(U.callback===null)s(u);else if(U.startTime<=R)s(u),U.sortIndex=U.expirationTime,e(c,U);else break;U=t(u)}}function b(R){if(A=!1,S(R),!m)if(t(c)!==null)m=!0,q(x);else{var U=t(u);U!==null&&j(b,U.startTime-R)}}function x(R,U){m=!1,A&&(A=!1,g(P),P=-1),p=!0;var $=f;try{for(S(U),d=t(c);d!==null&&(!(d.expirationTime>U)||R&&!D());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var J=ne(d.expirationTime<=U);U=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(c)&&s(c),S(U)}else s(c);d=t(c)}if(d!==null)var ce=!0;else{var Me=t(u);Me!==null&&j(b,Me.startTime-U),ce=!1}return ce}finally{d=null,f=$,p=!1}}var C=!1,k=null,P=-1,M=5,I=-1;function D(){return!(n.unstable_now()-I<M)}function Y(){if(k!==null){var R=n.unstable_now();I=R;var U=!0;try{U=k(!0,R)}finally{U?X():(C=!1,k=null)}}else C=!1}var X;if(typeof w=="function")X=function(){w(Y)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,K=W.port2;W.port1.onmessage=Y,X=function(){K.postMessage(null)}}else X=function(){E(Y,0)};function q(R){k=R,C||(C=!0,X())}function j(R,U){P=E(function(){R(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,q(x))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(R){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var $=f;f=U;try{return R()}finally{f=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var $=f;f=R;try{return U()}finally{f=$}},n.unstable_scheduleCallback=function(R,U,$){var ne=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ne+$:ne):$=ne,R){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=$+J,R={id:h++,callback:U,priorityLevel:R,startTime:$,expirationTime:J,sortIndex:-1},$>ne?(R.sortIndex=$,e(u,R),t(c)===null&&R===t(u)&&(A?(g(P),P=-1):A=!0,j(b,$-ne))):(R.sortIndex=J,e(c,R),m||p||(m=!0,q(x))),R},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(R){var U=f;return function(){var $=f;f=U;try{return R.apply(this,arguments)}finally{f=$}}}})(mw);gw.exports=mw;var rE=gw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE=L,Cn=rE;function F(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vw=new Set,Hc={};function sa(n,e){Hl(n,e),Hl(n+"Capture",e)}function Hl(n,e){for(Hc[n]=e,n=0;n<e.length;n++)vw.add(e[n])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wp=Object.prototype.hasOwnProperty,aE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},wy={};function lE(n){return Wp.call(wy,n)?!0:Wp.call(yy,n)?!1:aE.test(n)?wy[n]=!0:(yy[n]=!0,!1)}function cE(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function uE(n,e,t,s){if(e===null||typeof e>"u"||cE(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(n,e,t,s,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ct[n]=new Qt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ct[e]=new Qt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ct[n]=new Qt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ct[n]=new Qt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ct[n]=new Qt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ct[n]=new Qt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ct[n]=new Qt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ct[n]=new Qt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ct[n]=new Qt(n,5,!1,n.toLowerCase(),null,!1,!1)});var av=/[\-:]([a-z])/g;function lv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(av,lv);Ct[e]=new Qt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(av,lv);Ct[e]=new Qt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(av,lv);Ct[e]=new Qt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ct[n]=new Qt(n,1,!1,n.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ct[n]=new Qt(n,1,!1,n.toLowerCase(),null,!0,!0)});function cv(n,e,t,s){var i=Ct.hasOwnProperty(e)?Ct[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uE(e,t,i,s)&&(t=null),s||i===null?lE(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Pi=oE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mh=Symbol.for("react.element"),wa=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),uv=Symbol.for("react.strict_mode"),Gp=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),ww=Symbol.for("react.context"),hv=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),qp=Symbol.for("react.suspense_list"),dv=Symbol.for("react.memo"),Fi=Symbol.for("react.lazy"),Aw=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function Ql(n){return n===null||typeof n!="object"?null:(n=Ay&&n[Ay]||n["@@iterator"],typeof n=="function"?n:null)}var Be=Object.assign,fp;function lc(n){if(fp===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);fp=e&&e[1]||""}return`
`+fp+n}var pp=!1;function gp(n,e){if(!n||pp)return"";pp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var c=`
`+i[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{pp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?lc(n):""}function hE(n){switch(n.tag){case 5:return lc(n.type);case 16:return lc("Lazy");case 13:return lc("Suspense");case 19:return lc("SuspenseList");case 0:case 2:case 15:return n=gp(n.type,!1),n;case 11:return n=gp(n.type.render,!1),n;case 1:return n=gp(n.type,!0),n;default:return""}}function Yp(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Aa:return"Fragment";case wa:return"Portal";case Gp:return"Profiler";case uv:return"StrictMode";case Xp:return"Suspense";case qp:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ww:return(n.displayName||"Context")+".Consumer";case yw:return(n._context.displayName||"Context")+".Provider";case hv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case dv:return e=n.displayName||null,e!==null?e:Yp(n.type)||"Memo";case Fi:e=n._payload,n=n._init;try{return Yp(n(e))}catch{}}return null}function dE(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yp(e);case 8:return e===uv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _w(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fE(n){var e=_w(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ih(n){n._valueTracker||(n._valueTracker=fE(n))}function Sw(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=_w(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Ud(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Kp(n,e){var t=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function _y(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Sr(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bw(n,e){e=e.checked,e!=null&&cv(n,"checked",e,!1)}function Qp(n,e){bw(n,e);var t=Sr(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Zp(n,e.type,t):e.hasOwnProperty("defaultValue")&&Zp(n,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Sy(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Zp(n,e,t){(e!=="number"||Ud(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var cc=Array.isArray;function Ma(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Sr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Jp(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function by(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(F(92));if(cc(t)){if(1<t.length)throw Error(F(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Sr(t)}}function Ew(n,e){var t=Sr(e.value),s=Sr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function Ey(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function xw(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?xw(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fh,Cw=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Fh=Fh||document.createElement("div"),Fh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Bc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pE=["Webkit","ms","Moz","O"];Object.keys(Tc).forEach(function(n){pE.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Tc[e]=Tc[n]})});function kw(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Tc.hasOwnProperty(n)&&Tc[n]?(""+e).trim():e+"px"}function Tw(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=kw(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var gE=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tg(n,e){if(e){if(gE[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function ng(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sg=null;function fv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ig=null,Ia=null,Fa=null;function xy(n){if(n=Sh(n)){if(typeof ig!="function")throw Error(F(280));var e=n.stateNode;e&&(e=Hf(e),ig(n.stateNode,n.type,e))}}function Pw(n){Ia?Fa?Fa.push(n):Fa=[n]:Ia=n}function Rw(){if(Ia){var n=Ia,e=Fa;if(Fa=Ia=null,xy(n),e)for(n=0;n<e.length;n++)xy(e[n])}}function Lw(n,e){return n(e)}function Mw(){}var mp=!1;function Iw(n,e,t){if(mp)return n(e,t);mp=!0;try{return Lw(n,e,t)}finally{mp=!1,(Ia!==null||Fa!==null)&&(Mw(),Rw())}}function Uc(n,e){var t=n.stateNode;if(t===null)return null;var s=Hf(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(F(231,e,typeof t));return t}var rg=!1;if(bi)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){rg=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{rg=!1}function mE(n,e,t,s,i,r,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Pc=!1,Vd=null,$d=!1,og=null,vE={onError:function(n){Pc=!0,Vd=n}};function yE(n,e,t,s,i,r,o,a,c){Pc=!1,Vd=null,mE.apply(vE,arguments)}function wE(n,e,t,s,i,r,o,a,c){if(yE.apply(this,arguments),Pc){if(Pc){var u=Vd;Pc=!1,Vd=null}else throw Error(F(198));$d||($d=!0,og=u)}}function ia(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Fw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Cy(n){if(ia(n)!==n)throw Error(F(188))}function AE(n){var e=n.alternate;if(!e){if(e=ia(n),e===null)throw Error(F(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return Cy(i),n;if(r===s)return Cy(i),e;r=r.sibling}throw Error(F(188))}if(t.return!==s.return)t=i,s=r;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o)throw Error(F(189))}}if(t.alternate!==s)throw Error(F(190))}if(t.tag!==3)throw Error(F(188));return t.stateNode.current===t?n:e}function Dw(n){return n=AE(n),n!==null?Nw(n):null}function Nw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Nw(n);if(e!==null)return e;n=n.sibling}return null}var Ow=Cn.unstable_scheduleCallback,ky=Cn.unstable_cancelCallback,_E=Cn.unstable_shouldYield,SE=Cn.unstable_requestPaint,qe=Cn.unstable_now,bE=Cn.unstable_getCurrentPriorityLevel,pv=Cn.unstable_ImmediatePriority,jw=Cn.unstable_UserBlockingPriority,Wd=Cn.unstable_NormalPriority,EE=Cn.unstable_LowPriority,zw=Cn.unstable_IdlePriority,Nf=null,Ns=null;function xE(n){if(Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(Nf,n,void 0,(n.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:TE,CE=Math.log,kE=Math.LN2;function TE(n){return n>>>=0,n===0?32:31-(CE(n)/kE|0)|0}var Dh=64,Nh=4194304;function uc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gd(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?s=uc(a):(r&=o,r!==0&&(s=uc(r)))}else o=t&~i,o!==0?s=uc(o):r!==0&&(s=uc(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-hs(e),i=1<<t,s|=n[t],e&=~i;return s}function PE(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RE(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-hs(r),a=1<<o,c=i[o];c===-1?(!(a&t)||a&s)&&(i[o]=PE(a,e)):c<=e&&(n.expiredLanes|=a),r&=~a}}function ag(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Hw(){var n=Dh;return Dh<<=1,!(Dh&4194240)&&(Dh=64),n}function vp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ah(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-hs(e),n[e]=t}function LE(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-hs(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function gv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-hs(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var _e=0;function Bw(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Uw,mv,Vw,$w,Ww,lg=!1,Oh=[],pr=null,gr=null,mr=null,Vc=new Map,$c=new Map,Ni=[],ME="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ty(n,e){switch(n){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Vc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(e.pointerId)}}function Jl(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Sh(e),e!==null&&mv(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function IE(n,e,t,s,i){switch(e){case"focusin":return pr=Jl(pr,n,e,t,s,i),!0;case"dragenter":return gr=Jl(gr,n,e,t,s,i),!0;case"mouseover":return mr=Jl(mr,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return Vc.set(r,Jl(Vc.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,$c.set(r,Jl($c.get(r)||null,n,e,t,s,i)),!0}return!1}function Gw(n){var e=$r(n.target);if(e!==null){var t=ia(e);if(t!==null){if(e=t.tag,e===13){if(e=Fw(t),e!==null){n.blockedOn=e,Ww(n.priority,function(){Vw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=cg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);sg=s,t.target.dispatchEvent(s),sg=null}else return e=Sh(t),e!==null&&mv(e),n.blockedOn=t,!1;e.shift()}return!0}function Py(n,e,t){nd(n)&&t.delete(e)}function FE(){lg=!1,pr!==null&&nd(pr)&&(pr=null),gr!==null&&nd(gr)&&(gr=null),mr!==null&&nd(mr)&&(mr=null),Vc.forEach(Py),$c.forEach(Py)}function ec(n,e){n.blockedOn===e&&(n.blockedOn=null,lg||(lg=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,FE)))}function Wc(n){function e(i){return ec(i,n)}if(0<Oh.length){ec(Oh[0],n);for(var t=1;t<Oh.length;t++){var s=Oh[t];s.blockedOn===n&&(s.blockedOn=null)}}for(pr!==null&&ec(pr,n),gr!==null&&ec(gr,n),mr!==null&&ec(mr,n),Vc.forEach(e),$c.forEach(e),t=0;t<Ni.length;t++)s=Ni[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Ni.length&&(t=Ni[0],t.blockedOn===null);)Gw(t),t.blockedOn===null&&Ni.shift()}var Da=Pi.ReactCurrentBatchConfig,Xd=!0;function DE(n,e,t,s){var i=_e,r=Da.transition;Da.transition=null;try{_e=1,vv(n,e,t,s)}finally{_e=i,Da.transition=r}}function NE(n,e,t,s){var i=_e,r=Da.transition;Da.transition=null;try{_e=4,vv(n,e,t,s)}finally{_e=i,Da.transition=r}}function vv(n,e,t,s){if(Xd){var i=cg(n,e,t,s);if(i===null)kp(n,e,s,qd,t),Ty(n,s);else if(IE(i,n,e,t,s))s.stopPropagation();else if(Ty(n,s),e&4&&-1<ME.indexOf(n)){for(;i!==null;){var r=Sh(i);if(r!==null&&Uw(r),r=cg(n,e,t,s),r===null&&kp(n,e,s,qd,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else kp(n,e,s,null,t)}}var qd=null;function cg(n,e,t,s){if(qd=null,n=fv(s),n=$r(n),n!==null)if(e=ia(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Fw(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qd=n,null}function Xw(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bE()){case pv:return 1;case jw:return 4;case Wd:case EE:return 16;case zw:return 536870912;default:return 16}default:return 16}}var dr=null,yv=null,sd=null;function qw(){if(sd)return sd;var n,e=yv,t=e.length,s,i="value"in dr?dr.value:dr.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===i[r-s];s++);return sd=i.slice(n,1<s?1-s:void 0)}function id(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jh(){return!0}function Ry(){return!1}function Tn(n){function e(t,s,i,r,o){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?jh:Ry,this.isPropagationStopped=Ry,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jh)},persist:function(){},isPersistent:jh}),e}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wv=Tn(Yl),_h=Be({},Yl,{view:0,detail:0}),OE=Tn(_h),yp,wp,tc,Of=Be({},_h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Av,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==tc&&(tc&&n.type==="mousemove"?(yp=n.screenX-tc.screenX,wp=n.screenY-tc.screenY):wp=yp=0,tc=n),yp)},movementY:function(n){return"movementY"in n?n.movementY:wp}}),Ly=Tn(Of),jE=Be({},Of,{dataTransfer:0}),zE=Tn(jE),HE=Be({},_h,{relatedTarget:0}),Ap=Tn(HE),BE=Be({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),UE=Tn(BE),VE=Be({},Yl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$E=Tn(VE),WE=Be({},Yl,{data:0}),My=Tn(WE),GE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YE(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qE[n])?!!e[n]:!1}function Av(){return YE}var KE=Be({},_h,{key:function(n){if(n.key){var e=GE[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=id(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Av,charCode:function(n){return n.type==="keypress"?id(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?id(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),QE=Tn(KE),ZE=Be({},Of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iy=Tn(ZE),JE=Be({},_h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Av}),ex=Tn(JE),tx=Be({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),nx=Tn(tx),sx=Be({},Of,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ix=Tn(sx),rx=[9,13,27,32],_v=bi&&"CompositionEvent"in window,Rc=null;bi&&"documentMode"in document&&(Rc=document.documentMode);var ox=bi&&"TextEvent"in window&&!Rc,Yw=bi&&(!_v||Rc&&8<Rc&&11>=Rc),Fy=" ",Dy=!1;function Kw(n,e){switch(n){case"keyup":return rx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _a=!1;function ax(n,e){switch(n){case"compositionend":return Qw(e);case"keypress":return e.which!==32?null:(Dy=!0,Fy);case"textInput":return n=e.data,n===Fy&&Dy?null:n;default:return null}}function lx(n,e){if(_a)return n==="compositionend"||!_v&&Kw(n,e)?(n=qw(),sd=yv=dr=null,_a=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yw&&e.locale!=="ko"?null:e.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!cx[n.type]:e==="textarea"}function Zw(n,e,t,s){Pw(s),e=Yd(e,"onChange"),0<e.length&&(t=new wv("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Lc=null,Gc=null;function ux(n){cA(n,0)}function jf(n){var e=Ea(n);if(Sw(e))return n}function hx(n,e){if(n==="change")return e}var Jw=!1;if(bi){var _p;if(bi){var Sp="oninput"in document;if(!Sp){var Oy=document.createElement("div");Oy.setAttribute("oninput","return;"),Sp=typeof Oy.oninput=="function"}_p=Sp}else _p=!1;Jw=_p&&(!document.documentMode||9<document.documentMode)}function jy(){Lc&&(Lc.detachEvent("onpropertychange",eA),Gc=Lc=null)}function eA(n){if(n.propertyName==="value"&&jf(Gc)){var e=[];Zw(e,Gc,n,fv(n)),Iw(ux,e)}}function dx(n,e,t){n==="focusin"?(jy(),Lc=e,Gc=t,Lc.attachEvent("onpropertychange",eA)):n==="focusout"&&jy()}function fx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jf(Gc)}function px(n,e){if(n==="click")return jf(e)}function gx(n,e){if(n==="input"||n==="change")return jf(e)}function mx(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var fs=typeof Object.is=="function"?Object.is:mx;function Xc(n,e){if(fs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!Wp.call(e,i)||!fs(n[i],e[i]))return!1}return!0}function zy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hy(n,e){var t=zy(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=zy(t)}}function tA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?tA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function nA(){for(var n=window,e=Ud();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ud(n.document)}return e}function Sv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function vx(n){var e=nA(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&tA(t.ownerDocument.documentElement,t)){if(s!==null&&Sv(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=Hy(t,r);var o=Hy(t,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yx=bi&&"documentMode"in document&&11>=document.documentMode,Sa=null,ug=null,Mc=null,hg=!1;function By(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;hg||Sa==null||Sa!==Ud(s)||(s=Sa,"selectionStart"in s&&Sv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Mc&&Xc(Mc,s)||(Mc=s,s=Yd(ug,"onSelect"),0<s.length&&(e=new wv("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Sa)))}function zh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ba={animationend:zh("Animation","AnimationEnd"),animationiteration:zh("Animation","AnimationIteration"),animationstart:zh("Animation","AnimationStart"),transitionend:zh("Transition","TransitionEnd")},bp={},sA={};bi&&(sA=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function zf(n){if(bp[n])return bp[n];if(!ba[n])return n;var e=ba[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in sA)return bp[n]=e[t];return n}var iA=zf("animationend"),rA=zf("animationiteration"),oA=zf("animationstart"),aA=zf("transitionend"),lA=new Map,Uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(n,e){lA.set(n,e),sa(e,[n])}for(var Ep=0;Ep<Uy.length;Ep++){var xp=Uy[Ep],wx=xp.toLowerCase(),Ax=xp[0].toUpperCase()+xp.slice(1);Tr(wx,"on"+Ax)}Tr(iA,"onAnimationEnd");Tr(rA,"onAnimationIteration");Tr(oA,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(aA,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_x=new Set("cancel close invalid load scroll toggle".split(" ").concat(hc));function Vy(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,wE(s,e,void 0,n),n.currentTarget=null}function cA(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==r&&i.isPropagationStopped())break e;Vy(i,a,u),r=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==r&&i.isPropagationStopped())break e;Vy(i,a,u),r=c}}}if($d)throw n=og,$d=!1,og=null,n}function Pe(n,e){var t=e[mg];t===void 0&&(t=e[mg]=new Set);var s=n+"__bubble";t.has(s)||(uA(e,n,2,!1),t.add(s))}function Cp(n,e,t){var s=0;e&&(s|=4),uA(t,n,s,e)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function qc(n){if(!n[Hh]){n[Hh]=!0,vw.forEach(function(t){t!=="selectionchange"&&(_x.has(t)||Cp(t,!1,n),Cp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Hh]||(e[Hh]=!0,Cp("selectionchange",!1,e))}}function uA(n,e,t,s){switch(Xw(e)){case 1:var i=DE;break;case 4:i=NE;break;default:i=vv}t=i.bind(null,e,t,n),i=void 0,!rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function kp(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$r(a),o===null)return;if(c=o.tag,c===5||c===6){s=r=o;continue e}a=a.parentNode}}s=s.return}Iw(function(){var u=r,h=fv(t),d=[];e:{var f=lA.get(n);if(f!==void 0){var p=wv,m=n;switch(n){case"keypress":if(id(t)===0)break e;case"keydown":case"keyup":p=QE;break;case"focusin":m="focus",p=Ap;break;case"focusout":m="blur",p=Ap;break;case"beforeblur":case"afterblur":p=Ap;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ly;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=zE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ex;break;case iA:case rA:case oA:p=UE;break;case aA:p=nx;break;case"scroll":p=OE;break;case"wheel":p=ix;break;case"copy":case"cut":case"paste":p=$E;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Iy}var A=(e&4)!==0,E=!A&&n==="scroll",g=A?f!==null?f+"Capture":null:f;A=[];for(var w=u,S;w!==null;){S=w;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,g!==null&&(b=Uc(w,g),b!=null&&A.push(Yc(w,b,S)))),E)break;w=w.return}0<A.length&&(f=new p(f,m,null,t,h),d.push({event:f,listeners:A}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==sg&&(m=t.relatedTarget||t.fromElement)&&($r(m)||m[Ei]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?$r(m):null,m!==null&&(E=ia(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(A=Ly,b="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(A=Iy,b="onPointerLeave",g="onPointerEnter",w="pointer"),E=p==null?f:Ea(p),S=m==null?f:Ea(m),f=new A(b,w+"leave",p,t,h),f.target=E,f.relatedTarget=S,b=null,$r(h)===u&&(A=new A(g,w+"enter",m,t,h),A.target=S,A.relatedTarget=E,b=A),E=b,p&&m)t:{for(A=p,g=m,w=0,S=A;S;S=ua(S))w++;for(S=0,b=g;b;b=ua(b))S++;for(;0<w-S;)A=ua(A),w--;for(;0<S-w;)g=ua(g),S--;for(;w--;){if(A===g||g!==null&&A===g.alternate)break t;A=ua(A),g=ua(g)}A=null}else A=null;p!==null&&$y(d,f,p,A,!1),m!==null&&E!==null&&$y(d,E,m,A,!0)}}e:{if(f=u?Ea(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var x=hx;else if(Ny(f))if(Jw)x=gx;else{x=fx;var C=dx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=px);if(x&&(x=x(n,u))){Zw(d,x,t,h);break e}C&&C(n,f,u),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Zp(f,"number",f.value)}switch(C=u?Ea(u):window,n){case"focusin":(Ny(C)||C.contentEditable==="true")&&(Sa=C,ug=u,Mc=null);break;case"focusout":Mc=ug=Sa=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,By(d,t,h);break;case"selectionchange":if(yx)break;case"keydown":case"keyup":By(d,t,h)}var k;if(_v)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else _a?Kw(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(Yw&&t.locale!=="ko"&&(_a||P!=="onCompositionStart"?P==="onCompositionEnd"&&_a&&(k=qw()):(dr=h,yv="value"in dr?dr.value:dr.textContent,_a=!0)),C=Yd(u,P),0<C.length&&(P=new My(P,n,null,t,h),d.push({event:P,listeners:C}),k?P.data=k:(k=Qw(t),k!==null&&(P.data=k)))),(k=ox?ax(n,t):lx(n,t))&&(u=Yd(u,"onBeforeInput"),0<u.length&&(h=new My("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=k))}cA(d,e)})}function Yc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Yd(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Uc(n,t),r!=null&&s.unshift(Yc(n,r,i)),r=Uc(n,e),r!=null&&s.push(Yc(n,r,i))),n=n.return}return s}function ua(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $y(n,e,t,s,i){for(var r=e._reactName,o=[];t!==null&&t!==s;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&u!==null&&(a=u,i?(c=Uc(t,r),c!=null&&o.unshift(Yc(t,c,a))):i||(c=Uc(t,r),c!=null&&o.push(Yc(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Sx=/\r\n?/g,bx=/\u0000|\uFFFD/g;function Wy(n){return(typeof n=="string"?n:""+n).replace(Sx,`
`).replace(bx,"")}function Bh(n,e,t){if(e=Wy(e),Wy(n)!==e&&t)throw Error(F(425))}function Kd(){}var dg=null,fg=null;function pg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gg=typeof setTimeout=="function"?setTimeout:void 0,Ex=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,xx=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(n){return Gy.resolve(null).then(n).catch(Cx)}:gg;function Cx(n){setTimeout(function(){throw n})}function Tp(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),Wc(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);Wc(e)}function vr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Xy(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),Ds="__reactFiber$"+Kl,Kc="__reactProps$"+Kl,Ei="__reactContainer$"+Kl,mg="__reactEvents$"+Kl,kx="__reactListeners$"+Kl,Tx="__reactHandles$"+Kl;function $r(n){var e=n[Ds];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ei]||t[Ds]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Xy(n);n!==null;){if(t=n[Ds])return t;n=Xy(n)}return e}n=t,t=n.parentNode}return null}function Sh(n){return n=n[Ds]||n[Ei],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ea(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(F(33))}function Hf(n){return n[Kc]||null}var vg=[],xa=-1;function Pr(n){return{current:n}}function Le(n){0>xa||(n.current=vg[xa],vg[xa]=null,xa--)}function Te(n,e){xa++,vg[xa]=n.current,n.current=e}var br={},jt=Pr(br),ln=Pr(!1),Go=br;function Bl(n,e){var t=n.type.contextTypes;if(!t)return br;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function cn(n){return n=n.childContextTypes,n!=null}function Qd(){Le(ln),Le(jt)}function qy(n,e,t){if(jt.current!==br)throw Error(F(168));Te(jt,e),Te(ln,t)}function hA(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(F(108,dE(n)||"Unknown",i));return Be({},t,s)}function Zd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||br,Go=jt.current,Te(jt,n),Te(ln,ln.current),!0}function Yy(n,e,t){var s=n.stateNode;if(!s)throw Error(F(169));t?(n=hA(n,e,Go),s.__reactInternalMemoizedMergedChildContext=n,Le(ln),Le(jt),Te(jt,n)):Le(ln),Te(ln,t)}var Ws=null,Bf=!1,Pp=!1;function dA(n){Ws===null?Ws=[n]:Ws.push(n)}function Px(n){Bf=!0,dA(n)}function Rr(){if(!Pp&&Ws!==null){Pp=!0;var n=0,e=_e;try{var t=Ws;for(_e=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Ws=null,Bf=!1}catch(i){throw Ws!==null&&(Ws=Ws.slice(n+1)),Ow(pv,Rr),i}finally{_e=e,Pp=!1}}return null}var Ca=[],ka=0,Jd=null,ef=0,Dn=[],Nn=0,Xo=null,vi=1,yi="";function Nr(n,e){Ca[ka++]=ef,Ca[ka++]=Jd,Jd=n,ef=e}function fA(n,e,t){Dn[Nn++]=vi,Dn[Nn++]=yi,Dn[Nn++]=Xo,Xo=n;var s=vi;n=yi;var i=32-hs(s)-1;s&=~(1<<i),t+=1;var r=32-hs(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,vi=1<<32-hs(e)+i|t<<i|s,yi=r+n}else vi=1<<r|t<<i|s,yi=n}function bv(n){n.return!==null&&(Nr(n,1),fA(n,1,0))}function Ev(n){for(;n===Jd;)Jd=Ca[--ka],Ca[ka]=null,ef=Ca[--ka],Ca[ka]=null;for(;n===Xo;)Xo=Dn[--Nn],Dn[Nn]=null,yi=Dn[--Nn],Dn[Nn]=null,vi=Dn[--Nn],Dn[Nn]=null}var En=null,bn=null,Fe=!1,cs=null;function pA(n,e){var t=zn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Ky(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,En=n,bn=vr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,En=n,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xo!==null?{id:vi,overflow:yi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=zn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,En=n,bn=null,!0):!1;default:return!1}}function yg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wg(n){if(Fe){var e=bn;if(e){var t=e;if(!Ky(n,e)){if(yg(n))throw Error(F(418));e=vr(t.nextSibling);var s=En;e&&Ky(n,e)?pA(s,t):(n.flags=n.flags&-4097|2,Fe=!1,En=n)}}else{if(yg(n))throw Error(F(418));n.flags=n.flags&-4097|2,Fe=!1,En=n}}}function Qy(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;En=n}function Uh(n){if(n!==En)return!1;if(!Fe)return Qy(n),Fe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!pg(n.type,n.memoizedProps)),e&&(e=bn)){if(yg(n))throw gA(),Error(F(418));for(;e;)pA(n,e),e=vr(e.nextSibling)}if(Qy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(F(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){bn=vr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}bn=null}}else bn=En?vr(n.stateNode.nextSibling):null;return!0}function gA(){for(var n=bn;n;)n=vr(n.nextSibling)}function Ul(){bn=En=null,Fe=!1}function xv(n){cs===null?cs=[n]:cs.push(n)}var Rx=Pi.ReactCurrentBatchConfig;function nc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(F(309));var s=t.stateNode}if(!s)throw Error(F(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(F(284));if(!t._owner)throw Error(F(290,n))}return n}function Vh(n,e){throw n=Object.prototype.toString.call(e),Error(F(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Zy(n){var e=n._init;return e(n._payload)}function mA(n){function e(g,w){if(n){var S=g.deletions;S===null?(g.deletions=[w],g.flags|=16):S.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function s(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=_r(g,w),g.index=0,g.sibling=null,g}function r(g,w,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<w?(g.flags|=2,w):S):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,w,S,b){return w===null||w.tag!==6?(w=Np(S,g.mode,b),w.return=g,w):(w=i(w,S),w.return=g,w)}function c(g,w,S,b){var x=S.type;return x===Aa?h(g,w,S.props.children,b,S.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Fi&&Zy(x)===w.type)?(b=i(w,S.props),b.ref=nc(g,w,S),b.return=g,b):(b=hd(S.type,S.key,S.props,null,g.mode,b),b.ref=nc(g,w,S),b.return=g,b)}function u(g,w,S,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Op(S,g.mode,b),w.return=g,w):(w=i(w,S.children||[]),w.return=g,w)}function h(g,w,S,b,x){return w===null||w.tag!==7?(w=Wo(S,g.mode,b,x),w.return=g,w):(w=i(w,S),w.return=g,w)}function d(g,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Np(""+w,g.mode,S),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mh:return S=hd(w.type,w.key,w.props,null,g.mode,S),S.ref=nc(g,null,w),S.return=g,S;case wa:return w=Op(w,g.mode,S),w.return=g,w;case Fi:var b=w._init;return d(g,b(w._payload),S)}if(cc(w)||Ql(w))return w=Wo(w,g.mode,S,null),w.return=g,w;Vh(g,w)}return null}function f(g,w,S,b){var x=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return x!==null?null:a(g,w,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Mh:return S.key===x?c(g,w,S,b):null;case wa:return S.key===x?u(g,w,S,b):null;case Fi:return x=S._init,f(g,w,x(S._payload),b)}if(cc(S)||Ql(S))return x!==null?null:h(g,w,S,b,null);Vh(g,S)}return null}function p(g,w,S,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(S)||null,a(w,g,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mh:return g=g.get(b.key===null?S:b.key)||null,c(w,g,b,x);case wa:return g=g.get(b.key===null?S:b.key)||null,u(w,g,b,x);case Fi:var C=b._init;return p(g,w,S,C(b._payload),x)}if(cc(b)||Ql(b))return g=g.get(S)||null,h(w,g,b,x,null);Vh(w,b)}return null}function m(g,w,S,b){for(var x=null,C=null,k=w,P=w=0,M=null;k!==null&&P<S.length;P++){k.index>P?(M=k,k=null):M=k.sibling;var I=f(g,k,S[P],b);if(I===null){k===null&&(k=M);break}n&&k&&I.alternate===null&&e(g,k),w=r(I,w,P),C===null?x=I:C.sibling=I,C=I,k=M}if(P===S.length)return t(g,k),Fe&&Nr(g,P),x;if(k===null){for(;P<S.length;P++)k=d(g,S[P],b),k!==null&&(w=r(k,w,P),C===null?x=k:C.sibling=k,C=k);return Fe&&Nr(g,P),x}for(k=s(g,k);P<S.length;P++)M=p(k,g,P,S[P],b),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?P:M.key),w=r(M,w,P),C===null?x=M:C.sibling=M,C=M);return n&&k.forEach(function(D){return e(g,D)}),Fe&&Nr(g,P),x}function A(g,w,S,b){var x=Ql(S);if(typeof x!="function")throw Error(F(150));if(S=x.call(S),S==null)throw Error(F(151));for(var C=x=null,k=w,P=w=0,M=null,I=S.next();k!==null&&!I.done;P++,I=S.next()){k.index>P?(M=k,k=null):M=k.sibling;var D=f(g,k,I.value,b);if(D===null){k===null&&(k=M);break}n&&k&&D.alternate===null&&e(g,k),w=r(D,w,P),C===null?x=D:C.sibling=D,C=D,k=M}if(I.done)return t(g,k),Fe&&Nr(g,P),x;if(k===null){for(;!I.done;P++,I=S.next())I=d(g,I.value,b),I!==null&&(w=r(I,w,P),C===null?x=I:C.sibling=I,C=I);return Fe&&Nr(g,P),x}for(k=s(g,k);!I.done;P++,I=S.next())I=p(k,g,P,I.value,b),I!==null&&(n&&I.alternate!==null&&k.delete(I.key===null?P:I.key),w=r(I,w,P),C===null?x=I:C.sibling=I,C=I);return n&&k.forEach(function(Y){return e(g,Y)}),Fe&&Nr(g,P),x}function E(g,w,S,b){if(typeof S=="object"&&S!==null&&S.type===Aa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Mh:e:{for(var x=S.key,C=w;C!==null;){if(C.key===x){if(x=S.type,x===Aa){if(C.tag===7){t(g,C.sibling),w=i(C,S.props.children),w.return=g,g=w;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Fi&&Zy(x)===C.type){t(g,C.sibling),w=i(C,S.props),w.ref=nc(g,C,S),w.return=g,g=w;break e}t(g,C);break}else e(g,C);C=C.sibling}S.type===Aa?(w=Wo(S.props.children,g.mode,b,S.key),w.return=g,g=w):(b=hd(S.type,S.key,S.props,null,g.mode,b),b.ref=nc(g,w,S),b.return=g,g=b)}return o(g);case wa:e:{for(C=S.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(g,w.sibling),w=i(w,S.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=Op(S,g.mode,b),w.return=g,g=w}return o(g);case Fi:return C=S._init,E(g,w,C(S._payload),b)}if(cc(S))return m(g,w,S,b);if(Ql(S))return A(g,w,S,b);Vh(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(g,w.sibling),w=i(w,S),w.return=g,g=w):(t(g,w),w=Np(S,g.mode,b),w.return=g,g=w),o(g)):t(g,w)}return E}var Vl=mA(!0),vA=mA(!1),tf=Pr(null),nf=null,Ta=null,Cv=null;function kv(){Cv=Ta=nf=null}function Tv(n){var e=tf.current;Le(tf),n._currentValue=e}function Ag(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Na(n,e){nf=n,Cv=Ta=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(on=!0),n.firstContext=null)}function Un(n){var e=n._currentValue;if(Cv!==n)if(n={context:n,memoizedValue:e,next:null},Ta===null){if(nf===null)throw Error(F(308));Ta=n,nf.dependencies={lanes:0,firstContext:n}}else Ta=Ta.next=n;return e}var Wr=null;function Pv(n){Wr===null?Wr=[n]:Wr.push(n)}function yA(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,Pv(e)):(t.next=i.next,i.next=t),e.interleaved=t,xi(n,s)}function xi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Di=!1;function Rv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wA(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,pe&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,xi(n,t)}return i=s.interleaved,i===null?(e.next=e,Pv(s)):(e.next=i.next,i.next=e),s.interleaved=e,xi(n,t)}function rd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,gv(n,t)}}function Jy(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function sf(n,e,t,s){var i=n.updateQueue;Di=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;o=0,h=u=c=null,a=r;do{var f=a.lane,p=a.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,A=a;switch(f=e,p=t,A.tag){case 1:if(m=A.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=A.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Be({},d,f);break e;case 2:Di=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);Yo|=o,n.lanes=o,n.memoizedState=d}}function e0(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(F(191,i));i.call(s)}}}var bh={},Os=Pr(bh),Qc=Pr(bh),Zc=Pr(bh);function Gr(n){if(n===bh)throw Error(F(174));return n}function Lv(n,e){switch(Te(Zc,e),Te(Qc,n),Te(Os,bh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=eg(e,n)}Le(Os),Te(Os,e)}function $l(){Le(Os),Le(Qc),Le(Zc)}function AA(n){Gr(Zc.current);var e=Gr(Os.current),t=eg(e,n.type);e!==t&&(Te(Qc,n),Te(Os,t))}function Mv(n){Qc.current===n&&(Le(Os),Le(Qc))}var ze=Pr(0);function rf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rp=[];function Iv(){for(var n=0;n<Rp.length;n++)Rp[n]._workInProgressVersionPrimary=null;Rp.length=0}var od=Pi.ReactCurrentDispatcher,Lp=Pi.ReactCurrentBatchConfig,qo=0,He=null,ot=null,vt=null,of=!1,Ic=!1,Jc=0,Lx=0;function kt(){throw Error(F(321))}function Fv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!fs(n[t],e[t]))return!1;return!0}function Dv(n,e,t,s,i,r){if(qo=r,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,od.current=n===null||n.memoizedState===null?Dx:Nx,n=t(s,i),Ic){r=0;do{if(Ic=!1,Jc=0,25<=r)throw Error(F(301));r+=1,vt=ot=null,e.updateQueue=null,od.current=Ox,n=t(s,i)}while(Ic)}if(od.current=af,e=ot!==null&&ot.next!==null,qo=0,vt=ot=He=null,of=!1,e)throw Error(F(300));return n}function Nv(){var n=Jc!==0;return Jc=0,n}function ms(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?He.memoizedState=vt=n:vt=vt.next=n,vt}function Vn(){if(ot===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=ot.next;var e=vt===null?He.memoizedState:vt.next;if(e!==null)vt=e,ot=n;else{if(n===null)throw Error(F(310));ot=n,n={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},vt===null?He.memoizedState=vt=n:vt=vt.next=n}return vt}function eu(n,e){return typeof e=="function"?e(n):e}function Mp(n){var e=Vn(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var s=ot,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var a=o=null,c=null,u=r;do{var h=u.lane;if((qo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=s):c=c.next=d,He.lanes|=h,Yo|=h}u=u.next}while(u!==null&&u!==r);c===null?o=s:c.next=a,fs(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,He.lanes|=r,Yo|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ip(n){var e=Vn(),t=e.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);fs(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function _A(){}function SA(n,e){var t=He,s=Vn(),i=e(),r=!fs(s.memoizedState,i);if(r&&(s.memoizedState=i,on=!0),s=s.queue,Ov(xA.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||vt!==null&&vt.memoizedState.tag&1){if(t.flags|=2048,tu(9,EA.bind(null,t,s,i,e),void 0,null),yt===null)throw Error(F(349));qo&30||bA(t,e,i)}return i}function bA(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function EA(n,e,t,s){e.value=t,e.getSnapshot=s,CA(e)&&kA(n)}function xA(n,e,t){return t(function(){CA(e)&&kA(n)})}function CA(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!fs(n,t)}catch{return!0}}function kA(n){var e=xi(n,1);e!==null&&ds(e,n,1,-1)}function t0(n){var e=ms();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:n},e.queue=n,n=n.dispatch=Fx.bind(null,He,n),[e.memoizedState,n]}function tu(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function TA(){return Vn().memoizedState}function ad(n,e,t,s){var i=ms();He.flags|=n,i.memoizedState=tu(1|e,t,void 0,s===void 0?null:s)}function Uf(n,e,t,s){var i=Vn();s=s===void 0?null:s;var r=void 0;if(ot!==null){var o=ot.memoizedState;if(r=o.destroy,s!==null&&Fv(s,o.deps)){i.memoizedState=tu(e,t,r,s);return}}He.flags|=n,i.memoizedState=tu(1|e,t,r,s)}function n0(n,e){return ad(8390656,8,n,e)}function Ov(n,e){return Uf(2048,8,n,e)}function PA(n,e){return Uf(4,2,n,e)}function RA(n,e){return Uf(4,4,n,e)}function LA(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function MA(n,e,t){return t=t!=null?t.concat([n]):null,Uf(4,4,LA.bind(null,e,n),t)}function jv(){}function IA(n,e){var t=Vn();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Fv(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function FA(n,e){var t=Vn();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Fv(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function DA(n,e,t){return qo&21?(fs(t,e)||(t=Hw(),He.lanes|=t,Yo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,on=!0),n.memoizedState=t)}function Mx(n,e){var t=_e;_e=t!==0&&4>t?t:4,n(!0);var s=Lp.transition;Lp.transition={};try{n(!1),e()}finally{_e=t,Lp.transition=s}}function NA(){return Vn().memoizedState}function Ix(n,e,t){var s=Ar(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},OA(n))jA(e,t);else if(t=yA(n,e,t,s),t!==null){var i=Gt();ds(t,n,s,i),zA(t,e,s)}}function Fx(n,e,t){var s=Ar(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(OA(n))jA(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(i.hasEagerState=!0,i.eagerState=a,fs(a,o)){var c=e.interleaved;c===null?(i.next=i,Pv(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=yA(n,e,i,s),t!==null&&(i=Gt(),ds(t,n,s,i),zA(t,e,s))}}function OA(n){var e=n.alternate;return n===He||e!==null&&e===He}function jA(n,e){Ic=of=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function zA(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,gv(n,t)}}var af={readContext:Un,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},Dx={readContext:Un,useCallback:function(n,e){return ms().memoizedState=[n,e===void 0?null:e],n},useContext:Un,useEffect:n0,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ad(4194308,4,LA.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ad(4194308,4,n,e)},useInsertionEffect:function(n,e){return ad(4,2,n,e)},useMemo:function(n,e){var t=ms();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ms();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=Ix.bind(null,He,n),[s.memoizedState,n]},useRef:function(n){var e=ms();return n={current:n},e.memoizedState=n},useState:t0,useDebugValue:jv,useDeferredValue:function(n){return ms().memoizedState=n},useTransition:function(){var n=t0(!1),e=n[0];return n=Mx.bind(null,n[1]),ms().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=He,i=ms();if(Fe){if(t===void 0)throw Error(F(407));t=t()}else{if(t=e(),yt===null)throw Error(F(349));qo&30||bA(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,n0(xA.bind(null,s,r,n),[n]),s.flags|=2048,tu(9,EA.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=ms(),e=yt.identifierPrefix;if(Fe){var t=yi,s=vi;t=(s&~(1<<32-hs(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Lx++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Nx={readContext:Un,useCallback:IA,useContext:Un,useEffect:Ov,useImperativeHandle:MA,useInsertionEffect:PA,useLayoutEffect:RA,useMemo:FA,useReducer:Mp,useRef:TA,useState:function(){return Mp(eu)},useDebugValue:jv,useDeferredValue:function(n){var e=Vn();return DA(e,ot.memoizedState,n)},useTransition:function(){var n=Mp(eu)[0],e=Vn().memoizedState;return[n,e]},useMutableSource:_A,useSyncExternalStore:SA,useId:NA,unstable_isNewReconciler:!1},Ox={readContext:Un,useCallback:IA,useContext:Un,useEffect:Ov,useImperativeHandle:MA,useInsertionEffect:PA,useLayoutEffect:RA,useMemo:FA,useReducer:Ip,useRef:TA,useState:function(){return Ip(eu)},useDebugValue:jv,useDeferredValue:function(n){var e=Vn();return ot===null?e.memoizedState=n:DA(e,ot.memoizedState,n)},useTransition:function(){var n=Ip(eu)[0],e=Vn().memoizedState;return[n,e]},useMutableSource:_A,useSyncExternalStore:SA,useId:NA,unstable_isNewReconciler:!1};function Xn(n,e){if(n&&n.defaultProps){e=Be({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function _g(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Be({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Vf={isMounted:function(n){return(n=n._reactInternals)?ia(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Gt(),i=Ar(n),r=wi(s,i);r.payload=e,t!=null&&(r.callback=t),e=yr(n,r,i),e!==null&&(ds(e,n,i,s),rd(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Gt(),i=Ar(n),r=wi(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=yr(n,r,i),e!==null&&(ds(e,n,i,s),rd(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Gt(),s=Ar(n),i=wi(t,s);i.tag=2,e!=null&&(i.callback=e),e=yr(n,i,s),e!==null&&(ds(e,n,s,t),rd(e,n,s))}};function s0(n,e,t,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!Xc(t,s)||!Xc(i,r):!0}function HA(n,e,t){var s=!1,i=br,r=e.contextType;return typeof r=="object"&&r!==null?r=Un(r):(i=cn(e)?Go:jt.current,s=e.contextTypes,r=(s=s!=null)?Bl(n,i):br),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vf,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function i0(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Vf.enqueueReplaceState(e,e.state,null)}function Sg(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},Rv(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=Un(r):(r=cn(e)?Go:jt.current,i.context=Bl(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(_g(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vf.enqueueReplaceState(i,i.state,null),sf(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Wl(n,e){try{var t="",s=e;do t+=hE(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function Fp(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function bg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var jx=typeof WeakMap=="function"?WeakMap:Map;function BA(n,e,t){t=wi(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){cf||(cf=!0,Ig=s),bg(n,e)},t}function UA(n,e,t){t=wi(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){bg(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){bg(n,e),typeof s!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function r0(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new jx;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=Zx.bind(null,n,e,t),e.then(n,n))}function o0(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function a0(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=wi(-1,1),e.tag=2,yr(t,e,1))),t.lanes|=1),n)}var zx=Pi.ReactCurrentOwner,on=!1;function $t(n,e,t,s){e.child=n===null?vA(e,null,t,s):Vl(e,n.child,t,s)}function l0(n,e,t,s,i){t=t.render;var r=e.ref;return Na(e,i),s=Dv(n,e,t,s,r,i),t=Nv(),n!==null&&!on?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ci(n,e,i)):(Fe&&t&&bv(e),e.flags|=1,$t(n,e,s,i),e.child)}function c0(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!Gv(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,VA(n,e,r,s,i)):(n=hd(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Xc,t(o,s)&&n.ref===e.ref)return Ci(n,e,i)}return e.flags|=1,n=_r(r,s),n.ref=e.ref,n.return=e,e.child=n}function VA(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(Xc(r,s)&&n.ref===e.ref)if(on=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(on=!0);else return e.lanes=n.lanes,Ci(n,e,i)}return Eg(n,e,t,s,i)}function $A(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ra,_n),_n|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Te(Ra,_n),_n|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,Te(Ra,_n),_n|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,Te(Ra,_n),_n|=s;return $t(n,e,i,t),e.child}function WA(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Eg(n,e,t,s,i){var r=cn(t)?Go:jt.current;return r=Bl(e,r),Na(e,i),t=Dv(n,e,t,s,r,i),s=Nv(),n!==null&&!on?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ci(n,e,i)):(Fe&&s&&bv(e),e.flags|=1,$t(n,e,t,i),e.child)}function u0(n,e,t,s,i){if(cn(t)){var r=!0;Zd(e)}else r=!1;if(Na(e,i),e.stateNode===null)ld(n,e),HA(e,t,s),Sg(e,t,s,i),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Un(u):(u=cn(t)?Go:jt.current,u=Bl(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==u)&&i0(e,o,s,u),Di=!1;var f=e.memoizedState;o.state=f,sf(e,s,o,i),c=e.memoizedState,a!==s||f!==c||ln.current||Di?(typeof h=="function"&&(_g(e,t,h,s),c=e.memoizedState),(a=Di||s0(e,t,a,s,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,wA(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Xn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Un(c):(c=cn(t)?Go:jt.current,c=Bl(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&i0(e,o,s,c),Di=!1,f=e.memoizedState,o.state=f,sf(e,s,o,i);var m=e.memoizedState;a!==d||f!==m||ln.current||Di?(typeof p=="function"&&(_g(e,t,p,s),m=e.memoizedState),(u=Di||s0(e,t,u,s,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return xg(n,e,t,s,r,i)}function xg(n,e,t,s,i,r){WA(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&Yy(e,t,!1),Ci(n,e,r);s=e.stateNode,zx.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=Vl(e,n.child,null,r),e.child=Vl(e,null,a,r)):$t(n,e,a,r),e.memoizedState=s.state,i&&Yy(e,t,!0),e.child}function GA(n){var e=n.stateNode;e.pendingContext?qy(n,e.pendingContext,e.pendingContext!==e.context):e.context&&qy(n,e.context,!1),Lv(n,e.containerInfo)}function h0(n,e,t,s,i){return Ul(),xv(i),e.flags|=256,$t(n,e,t,s),e.child}var Cg={dehydrated:null,treeContext:null,retryLane:0};function kg(n){return{baseLanes:n,cachePool:null,transitions:null}}function XA(n,e,t){var s=e.pendingProps,i=ze.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Te(ze,i&1),n===null)return wg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Gf(o,s,0,null),n=Wo(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=kg(t),e.memoizedState=Cg,n):zv(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Hx(n,e,o,s,a,i,t);if(r){r=s.fallback,o=e.mode,i=n.child,a=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=_r(i,c),s.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=_r(a,r):(r=Wo(r,o,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=n.child.memoizedState,o=o===null?kg(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=Cg,s}return r=n.child,n=r.sibling,s=_r(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function zv(n,e){return e=Gf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function $h(n,e,t,s){return s!==null&&xv(s),Vl(e,n.child,null,t),n=zv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Hx(n,e,t,s,i,r,o){if(t)return e.flags&256?(e.flags&=-257,s=Fp(Error(F(422))),$h(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Gf({mode:"visible",children:s.children},i,0,null),r=Wo(r,i,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&Vl(e,n.child,null,o),e.child.memoizedState=kg(o),e.memoizedState=Cg,r);if(!(e.mode&1))return $h(n,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var a=s.dgst;return s=a,r=Error(F(419)),s=Fp(r,s,void 0),$h(n,e,o,s)}if(a=(o&n.childLanes)!==0,on||a){if(s=yt,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,xi(n,i),ds(s,n,i,-1))}return Wv(),s=Fp(Error(F(421))),$h(n,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Jx.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,bn=vr(i.nextSibling),En=e,Fe=!0,cs=null,n!==null&&(Dn[Nn++]=vi,Dn[Nn++]=yi,Dn[Nn++]=Xo,vi=n.id,yi=n.overflow,Xo=e),e=zv(e,s.children),e.flags|=4096,e)}function d0(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),Ag(n.return,e,t)}function Dp(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function qA(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if($t(n,e,s.children,t),s=ze.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&d0(n,t,e);else if(n.tag===19)d0(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Te(ze,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&rf(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Dp(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&rf(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Dp(e,!0,t,null,r);break;case"together":Dp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ld(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ci(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Yo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(F(153));if(e.child!==null){for(n=e.child,t=_r(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_r(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Bx(n,e,t){switch(e.tag){case 3:GA(e),Ul();break;case 5:AA(e);break;case 1:cn(e.type)&&Zd(e);break;case 4:Lv(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Te(tf,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Te(ze,ze.current&1),e.flags|=128,null):t&e.child.childLanes?XA(n,e,t):(Te(ze,ze.current&1),n=Ci(n,e,t),n!==null?n.sibling:null);Te(ze,ze.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return qA(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(ze,ze.current),s)break;return null;case 22:case 23:return e.lanes=0,$A(n,e,t)}return Ci(n,e,t)}var YA,Tg,KA,QA;YA=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Tg=function(){};KA=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,Gr(Os.current);var r=null;switch(t){case"input":i=Kp(n,i),s=Kp(n,s),r=[];break;case"select":i=Be({},i,{value:void 0}),s=Be({},s,{value:void 0}),r=[];break;case"textarea":i=Jp(n,i),s=Jp(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Kd)}tg(t,s);var o;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hc.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(a=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Pe("scroll",n),r||a===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};QA=function(n,e,t,s){t!==s&&(e.flags|=4)};function sc(n,e){if(!Fe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Tt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function Ux(n,e,t){var s=e.pendingProps;switch(Ev(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(e),null;case 1:return cn(e.type)&&Qd(),Tt(e),null;case 3:return s=e.stateNode,$l(),Le(ln),Le(jt),Iv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Uh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cs!==null&&(Ng(cs),cs=null))),Tg(n,e),Tt(e),null;case 5:Mv(e);var i=Gr(Zc.current);if(t=e.type,n!==null&&e.stateNode!=null)KA(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(F(166));return Tt(e),null}if(n=Gr(Os.current),Uh(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[Ds]=e,s[Kc]=r,n=(e.mode&1)!==0,t){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(i=0;i<hc.length;i++)Pe(hc[i],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":_y(s,r),Pe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Pe("invalid",s);break;case"textarea":by(s,r),Pe("invalid",s)}tg(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?s.textContent!==a&&(r.suppressHydrationWarning!==!0&&Bh(s.textContent,a,n),i=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Bh(s.textContent,a,n),i=["children",""+a]):Hc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",s)}switch(t){case"input":Ih(s),Sy(s,r,!0);break;case"textarea":Ih(s),Ey(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Kd)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=xw(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[Ds]=e,n[Kc]=s,YA(n,e,!1,!1),e.stateNode=n;e:{switch(o=ng(t,s),t){case"dialog":Pe("cancel",n),Pe("close",n),i=s;break;case"iframe":case"object":case"embed":Pe("load",n),i=s;break;case"video":case"audio":for(i=0;i<hc.length;i++)Pe(hc[i],n);i=s;break;case"source":Pe("error",n),i=s;break;case"img":case"image":case"link":Pe("error",n),Pe("load",n),i=s;break;case"details":Pe("toggle",n),i=s;break;case"input":_y(n,s),i=Kp(n,s),Pe("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=Be({},s,{value:void 0}),Pe("invalid",n);break;case"textarea":by(n,s),i=Jp(n,s),Pe("invalid",n);break;default:i=s}tg(t,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var c=a[r];r==="style"?Tw(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cw(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Bc(n,c):typeof c=="number"&&Bc(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Hc.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Pe("scroll",n):c!=null&&cv(n,r,c,o))}switch(t){case"input":Ih(n),Sy(n,s,!1);break;case"textarea":Ih(n),Ey(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Sr(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?Ma(n,!!s.multiple,r,!1):s.defaultValue!=null&&Ma(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Kd)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tt(e),null;case 6:if(n&&e.stateNode!=null)QA(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(F(166));if(t=Gr(Zc.current),Gr(Os.current),Uh(e)){if(s=e.stateNode,t=e.memoizedProps,s[Ds]=e,(r=s.nodeValue!==t)&&(n=En,n!==null))switch(n.tag){case 3:Bh(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Bh(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Ds]=e,e.stateNode=s}return Tt(e),null;case 13:if(Le(ze),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Fe&&bn!==null&&e.mode&1&&!(e.flags&128))gA(),Ul(),e.flags|=98560,r=!1;else if(r=Uh(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(F(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[Ds]=e}else Ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tt(e),r=!1}else cs!==null&&(Ng(cs),cs=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||ze.current&1?lt===0&&(lt=3):Wv())),e.updateQueue!==null&&(e.flags|=4),Tt(e),null);case 4:return $l(),Tg(n,e),n===null&&qc(e.stateNode.containerInfo),Tt(e),null;case 10:return Tv(e.type._context),Tt(e),null;case 17:return cn(e.type)&&Qd(),Tt(e),null;case 19:if(Le(ze),r=e.memoizedState,r===null)return Tt(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)sc(r,!1);else{if(lt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=rf(n),o!==null){for(e.flags|=128,sc(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Te(ze,ze.current&1|2),e.child}n=n.sibling}r.tail!==null&&qe()>Gl&&(e.flags|=128,s=!0,sc(r,!1),e.lanes=4194304)}else{if(!s)if(n=rf(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),sc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Fe)return Tt(e),null}else 2*qe()-r.renderingStartTime>Gl&&t!==1073741824&&(e.flags|=128,s=!0,sc(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=qe(),e.sibling=null,t=ze.current,Te(ze,s?t&1|2:t&1),e):(Tt(e),null);case 22:case 23:return $v(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?_n&1073741824&&(Tt(e),e.subtreeFlags&6&&(e.flags|=8192)):Tt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Vx(n,e){switch(Ev(e),e.tag){case 1:return cn(e.type)&&Qd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return $l(),Le(ln),Le(jt),Iv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Mv(e),null;case 13:if(Le(ze),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ul()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Le(ze),null;case 4:return $l(),null;case 10:return Tv(e.type._context),null;case 22:case 23:return $v(),null;case 24:return null;default:return null}}var Wh=!1,Dt=!1,$x=typeof WeakSet=="function"?WeakSet:Set,B=null;function Pa(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Ge(n,e,s)}else t.current=null}function Pg(n,e,t){try{t()}catch(s){Ge(n,e,s)}}var f0=!1;function Wx(n,e){if(dg=Xd,n=nA(),Sv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==r||s!==0&&d.nodeType!==3||(c=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===i&&(a=o),f===r&&++h===s&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(fg={focusedElem:n,selectionRange:t},Xd=!1,B=e;B!==null;)if(e=B,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,B=n;else for(;B!==null;){e=B;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var A=m.memoizedProps,E=m.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:Xn(e.type,A),E);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(b){Ge(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}return m=f0,f0=!1,m}function Fc(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&Pg(e,t,r)}i=i.next}while(i!==s)}}function $f(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function Rg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function ZA(n){var e=n.alternate;e!==null&&(n.alternate=null,ZA(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ds],delete e[Kc],delete e[mg],delete e[kx],delete e[Tx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function JA(n){return n.tag===5||n.tag===3||n.tag===4}function p0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||JA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lg(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Kd));else if(s!==4&&(n=n.child,n!==null))for(Lg(n,e,t),n=n.sibling;n!==null;)Lg(n,e,t),n=n.sibling}function Mg(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Mg(n,e,t),n=n.sibling;n!==null;)Mg(n,e,t),n=n.sibling}var bt=null,ls=!1;function Li(n,e,t){for(t=t.child;t!==null;)e_(n,e,t),t=t.sibling}function e_(n,e,t){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(Nf,t)}catch{}switch(t.tag){case 5:Dt||Pa(t,e);case 6:var s=bt,i=ls;bt=null,Li(n,e,t),bt=s,ls=i,bt!==null&&(ls?(n=bt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):bt.removeChild(t.stateNode));break;case 18:bt!==null&&(ls?(n=bt,t=t.stateNode,n.nodeType===8?Tp(n.parentNode,t):n.nodeType===1&&Tp(n,t),Wc(n)):Tp(bt,t.stateNode));break;case 4:s=bt,i=ls,bt=t.stateNode.containerInfo,ls=!0,Li(n,e,t),bt=s,ls=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Pg(t,e,o),i=i.next}while(i!==s)}Li(n,e,t);break;case 1:if(!Dt&&(Pa(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){Ge(t,e,a)}Li(n,e,t);break;case 21:Li(n,e,t);break;case 22:t.mode&1?(Dt=(s=Dt)||t.memoizedState!==null,Li(n,e,t),Dt=s):Li(n,e,t);break;default:Li(n,e,t)}}function g0(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new $x),e.forEach(function(s){var i=e1.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function Wn(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,ls=!1;break e;case 3:bt=a.stateNode.containerInfo,ls=!0;break e;case 4:bt=a.stateNode.containerInfo,ls=!0;break e}a=a.return}if(bt===null)throw Error(F(160));e_(r,o,i),bt=null,ls=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ge(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t_(e,n),e=e.sibling}function t_(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Wn(e,n),ps(n),s&4){try{Fc(3,n,n.return),$f(3,n)}catch(A){Ge(n,n.return,A)}try{Fc(5,n,n.return)}catch(A){Ge(n,n.return,A)}}break;case 1:Wn(e,n),ps(n),s&512&&t!==null&&Pa(t,t.return);break;case 5:if(Wn(e,n),ps(n),s&512&&t!==null&&Pa(t,t.return),n.flags&32){var i=n.stateNode;try{Bc(i,"")}catch(A){Ge(n,n.return,A)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&bw(i,r),ng(a,o);var u=ng(a,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Tw(i,d):h==="dangerouslySetInnerHTML"?Cw(i,d):h==="children"?Bc(i,d):cv(i,h,d,u)}switch(a){case"input":Qp(i,r);break;case"textarea":Ew(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Ma(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Ma(i,!!r.multiple,r.defaultValue,!0):Ma(i,!!r.multiple,r.multiple?[]:"",!1))}i[Kc]=r}catch(A){Ge(n,n.return,A)}}break;case 6:if(Wn(e,n),ps(n),s&4){if(n.stateNode===null)throw Error(F(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(A){Ge(n,n.return,A)}}break;case 3:if(Wn(e,n),ps(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Wc(e.containerInfo)}catch(A){Ge(n,n.return,A)}break;case 4:Wn(e,n),ps(n);break;case 13:Wn(e,n),ps(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Uv=qe())),s&4&&g0(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Dt=(u=Dt)||h,Wn(e,n),Dt=u):Wn(e,n),ps(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(B=n,h=n.child;h!==null;){for(d=B=h;B!==null;){switch(f=B,p=f.child,f.tag){case 0:case 11:case 14:case 15:Fc(4,f,f.return);break;case 1:Pa(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(A){Ge(s,t,A)}}break;case 5:Pa(f,f.return);break;case 22:if(f.memoizedState!==null){v0(d);continue}}p!==null?(p.return=f,B=p):v0(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=kw("display",o))}catch(A){Ge(n,n.return,A)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(A){Ge(n,n.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wn(e,n),ps(n),s&4&&g0(n);break;case 21:break;default:Wn(e,n),ps(n)}}function ps(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(JA(t)){var s=t;break e}t=t.return}throw Error(F(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Bc(i,""),s.flags&=-33);var r=p0(n);Mg(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,a=p0(n);Lg(n,a,o);break;default:throw Error(F(161))}}catch(c){Ge(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Gx(n,e,t){B=n,n_(n)}function n_(n,e,t){for(var s=(n.mode&1)!==0;B!==null;){var i=B,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Wh;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Dt;a=Wh;var u=Dt;if(Wh=o,(Dt=c)&&!u)for(B=i;B!==null;)o=B,c=o.child,o.tag===22&&o.memoizedState!==null?y0(i):c!==null?(c.return=o,B=c):y0(i);for(;r!==null;)B=r,n_(r),r=r.sibling;B=i,Wh=a,Dt=u}m0(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,B=r):m0(n)}}function m0(n){for(;B!==null;){var e=B;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||$f(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Dt)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Xn(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&e0(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}e0(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Wc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Dt||e.flags&512&&Rg(e)}catch(f){Ge(e,e.return,f)}}if(e===n){B=null;break}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}}function v0(n){for(;B!==null;){var e=B;if(e===n){B=null;break}var t=e.sibling;if(t!==null){t.return=e.return,B=t;break}B=e.return}}function y0(n){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$f(4,e)}catch(c){Ge(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){Ge(e,i,c)}}var r=e.return;try{Rg(e)}catch(c){Ge(e,r,c)}break;case 5:var o=e.return;try{Rg(e)}catch(c){Ge(e,o,c)}}}catch(c){Ge(e,e.return,c)}if(e===n){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var Xx=Math.ceil,lf=Pi.ReactCurrentDispatcher,Hv=Pi.ReactCurrentOwner,Hn=Pi.ReactCurrentBatchConfig,pe=0,yt=null,Je=null,Et=0,_n=0,Ra=Pr(0),lt=0,nu=null,Yo=0,Wf=0,Bv=0,Dc=null,rn=null,Uv=0,Gl=1/0,Us=null,cf=!1,Ig=null,wr=null,Gh=!1,fr=null,uf=0,Nc=0,Fg=null,cd=-1,ud=0;function Gt(){return pe&6?qe():cd!==-1?cd:cd=qe()}function Ar(n){return n.mode&1?pe&2&&Et!==0?Et&-Et:Rx.transition!==null?(ud===0&&(ud=Hw()),ud):(n=_e,n!==0||(n=window.event,n=n===void 0?16:Xw(n.type)),n):1}function ds(n,e,t,s){if(50<Nc)throw Nc=0,Fg=null,Error(F(185));Ah(n,t,s),(!(pe&2)||n!==yt)&&(n===yt&&(!(pe&2)&&(Wf|=t),lt===4&&Oi(n,Et)),un(n,s),t===1&&pe===0&&!(e.mode&1)&&(Gl=qe()+500,Bf&&Rr()))}function un(n,e){var t=n.callbackNode;RE(n,e);var s=Gd(n,n===yt?Et:0);if(s===0)t!==null&&ky(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&ky(t),e===1)n.tag===0?Px(w0.bind(null,n)):dA(w0.bind(null,n)),xx(function(){!(pe&6)&&Rr()}),t=null;else{switch(Bw(s)){case 1:t=pv;break;case 4:t=jw;break;case 16:t=Wd;break;case 536870912:t=zw;break;default:t=Wd}t=u_(t,s_.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function s_(n,e){if(cd=-1,ud=0,pe&6)throw Error(F(327));var t=n.callbackNode;if(Oa()&&n.callbackNode!==t)return null;var s=Gd(n,n===yt?Et:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=hf(n,s);else{e=s;var i=pe;pe|=2;var r=r_();(yt!==n||Et!==e)&&(Us=null,Gl=qe()+500,$o(n,e));do try{Kx();break}catch(a){i_(n,a)}while(!0);kv(),lf.current=r,pe=i,Je!==null?e=0:(yt=null,Et=0,e=lt)}if(e!==0){if(e===2&&(i=ag(n),i!==0&&(s=i,e=Dg(n,i))),e===1)throw t=nu,$o(n,0),Oi(n,s),un(n,qe()),t;if(e===6)Oi(n,s);else{if(i=n.current.alternate,!(s&30)&&!qx(i)&&(e=hf(n,s),e===2&&(r=ag(n),r!==0&&(s=r,e=Dg(n,r))),e===1))throw t=nu,$o(n,0),Oi(n,s),un(n,qe()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(F(345));case 2:Or(n,rn,Us);break;case 3:if(Oi(n,s),(s&130023424)===s&&(e=Uv+500-qe(),10<e)){if(Gd(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Gt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=gg(Or.bind(null,n,rn,Us),e);break}Or(n,rn,Us);break;case 4:if(Oi(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var o=31-hs(s);r=1<<o,o=e[o],o>i&&(i=o),s&=~r}if(s=i,s=qe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Xx(s/1960))-s,10<s){n.timeoutHandle=gg(Or.bind(null,n,rn,Us),s);break}Or(n,rn,Us);break;case 5:Or(n,rn,Us);break;default:throw Error(F(329))}}}return un(n,qe()),n.callbackNode===t?s_.bind(null,n):null}function Dg(n,e){var t=Dc;return n.current.memoizedState.isDehydrated&&($o(n,e).flags|=256),n=hf(n,e),n!==2&&(e=rn,rn=t,e!==null&&Ng(e)),n}function Ng(n){rn===null?rn=n:rn.push.apply(rn,n)}function qx(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!fs(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oi(n,e){for(e&=~Bv,e&=~Wf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-hs(e),s=1<<t;n[t]=-1,e&=~s}}function w0(n){if(pe&6)throw Error(F(327));Oa();var e=Gd(n,0);if(!(e&1))return un(n,qe()),null;var t=hf(n,e);if(n.tag!==0&&t===2){var s=ag(n);s!==0&&(e=s,t=Dg(n,s))}if(t===1)throw t=nu,$o(n,0),Oi(n,e),un(n,qe()),t;if(t===6)throw Error(F(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Or(n,rn,Us),un(n,qe()),null}function Vv(n,e){var t=pe;pe|=1;try{return n(e)}finally{pe=t,pe===0&&(Gl=qe()+500,Bf&&Rr())}}function Ko(n){fr!==null&&fr.tag===0&&!(pe&6)&&Oa();var e=pe;pe|=1;var t=Hn.transition,s=_e;try{if(Hn.transition=null,_e=1,n)return n()}finally{_e=s,Hn.transition=t,pe=e,!(pe&6)&&Rr()}}function $v(){_n=Ra.current,Le(Ra)}function $o(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Ex(t)),Je!==null)for(t=Je.return;t!==null;){var s=t;switch(Ev(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Qd();break;case 3:$l(),Le(ln),Le(jt),Iv();break;case 5:Mv(s);break;case 4:$l();break;case 13:Le(ze);break;case 19:Le(ze);break;case 10:Tv(s.type._context);break;case 22:case 23:$v()}t=t.return}if(yt=n,Je=n=_r(n.current,null),Et=_n=e,lt=0,nu=null,Bv=Wf=Yo=0,rn=Dc=null,Wr!==null){for(e=0;e<Wr.length;e++)if(t=Wr[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}t.pending=s}Wr=null}return n}function i_(n,e){do{var t=Je;try{if(kv(),od.current=af,of){for(var s=He.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}of=!1}if(qo=0,vt=ot=He=null,Ic=!1,Jc=0,Hv.current=null,t===null||t.return===null){lt=1,nu=e,Je=null;break}e:{var r=n,o=t.return,a=t,c=e;if(e=Et,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=o0(o);if(p!==null){p.flags&=-257,a0(p,o,a,r,e),p.mode&1&&r0(r,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var A=new Set;A.add(c),e.updateQueue=A}else m.add(c);break e}else{if(!(e&1)){r0(r,u,e),Wv();break e}c=Error(F(426))}}else if(Fe&&a.mode&1){var E=o0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),a0(E,o,a,r,e),xv(Wl(c,a));break e}}r=c=Wl(c,a),lt!==4&&(lt=2),Dc===null?Dc=[r]:Dc.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=BA(r,c,e);Jy(r,g);break e;case 1:a=c;var w=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(wr===null||!wr.has(S)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=UA(r,a,e);Jy(r,b);break e}}r=r.return}while(r!==null)}a_(t)}catch(x){e=x,Je===t&&t!==null&&(Je=t=t.return);continue}break}while(!0)}function r_(){var n=lf.current;return lf.current=af,n===null?af:n}function Wv(){(lt===0||lt===3||lt===2)&&(lt=4),yt===null||!(Yo&268435455)&&!(Wf&268435455)||Oi(yt,Et)}function hf(n,e){var t=pe;pe|=2;var s=r_();(yt!==n||Et!==e)&&(Us=null,$o(n,e));do try{Yx();break}catch(i){i_(n,i)}while(!0);if(kv(),pe=t,lf.current=s,Je!==null)throw Error(F(261));return yt=null,Et=0,lt}function Yx(){for(;Je!==null;)o_(Je)}function Kx(){for(;Je!==null&&!_E();)o_(Je)}function o_(n){var e=c_(n.alternate,n,_n);n.memoizedProps=n.pendingProps,e===null?a_(n):Je=e,Hv.current=null}function a_(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Vx(t,e),t!==null){t.flags&=32767,Je=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{lt=6,Je=null;return}}else if(t=Ux(t,e,_n),t!==null){Je=t;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=n}while(e!==null);lt===0&&(lt=5)}function Or(n,e,t){var s=_e,i=Hn.transition;try{Hn.transition=null,_e=1,Qx(n,e,t,s)}finally{Hn.transition=i,_e=s}return null}function Qx(n,e,t,s){do Oa();while(fr!==null);if(pe&6)throw Error(F(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(F(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(LE(n,r),n===yt&&(Je=yt=null,Et=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Gh||(Gh=!0,u_(Wd,function(){return Oa(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Hn.transition,Hn.transition=null;var o=_e;_e=1;var a=pe;pe|=4,Hv.current=null,Wx(n,t),t_(t,n),vx(fg),Xd=!!dg,fg=dg=null,n.current=t,Gx(t),SE(),pe=a,_e=o,Hn.transition=r}else n.current=t;if(Gh&&(Gh=!1,fr=n,uf=i),r=n.pendingLanes,r===0&&(wr=null),xE(t.stateNode),un(n,qe()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(cf)throw cf=!1,n=Ig,Ig=null,n;return uf&1&&n.tag!==0&&Oa(),r=n.pendingLanes,r&1?n===Fg?Nc++:(Nc=0,Fg=n):Nc=0,Rr(),null}function Oa(){if(fr!==null){var n=Bw(uf),e=Hn.transition,t=_e;try{if(Hn.transition=null,_e=16>n?16:n,fr===null)var s=!1;else{if(n=fr,fr=null,uf=0,pe&6)throw Error(F(331));var i=pe;for(pe|=4,B=n.current;B!==null;){var r=B,o=r.child;if(B.flags&16){var a=r.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(B=u;B!==null;){var h=B;switch(h.tag){case 0:case 11:case 15:Fc(8,h,r)}var d=h.child;if(d!==null)d.return=h,B=d;else for(;B!==null;){h=B;var f=h.sibling,p=h.return;if(ZA(h),h===u){B=null;break}if(f!==null){f.return=p,B=f;break}B=p}}}var m=r.alternate;if(m!==null){var A=m.child;if(A!==null){m.child=null;do{var E=A.sibling;A.sibling=null,A=E}while(A!==null)}}B=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,B=o;else e:for(;B!==null;){if(r=B,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Fc(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,B=g;break e}B=r.return}}var w=n.current;for(B=w;B!==null;){o=B;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,B=S;else e:for(o=w;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$f(9,a)}}catch(x){Ge(a,a.return,x)}if(a===o){B=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,B=b;break e}B=a.return}}if(pe=i,Rr(),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(Nf,n)}catch{}s=!0}return s}finally{_e=t,Hn.transition=e}}return!1}function A0(n,e,t){e=Wl(t,e),e=BA(n,e,1),n=yr(n,e,1),e=Gt(),n!==null&&(Ah(n,1,e),un(n,e))}function Ge(n,e,t){if(n.tag===3)A0(n,n,t);else for(;e!==null;){if(e.tag===3){A0(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wr===null||!wr.has(s))){n=Wl(t,n),n=UA(e,n,1),e=yr(e,n,1),n=Gt(),e!==null&&(Ah(e,1,n),un(e,n));break}}e=e.return}}function Zx(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Gt(),n.pingedLanes|=n.suspendedLanes&t,yt===n&&(Et&t)===t&&(lt===4||lt===3&&(Et&130023424)===Et&&500>qe()-Uv?$o(n,0):Bv|=t),un(n,e)}function l_(n,e){e===0&&(n.mode&1?(e=Nh,Nh<<=1,!(Nh&130023424)&&(Nh=4194304)):e=1);var t=Gt();n=xi(n,e),n!==null&&(Ah(n,e,t),un(n,t))}function Jx(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),l_(n,t)}function e1(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(e),l_(n,t)}var c_;c_=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ln.current)on=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return on=!1,Bx(n,e,t);on=!!(n.flags&131072)}else on=!1,Fe&&e.flags&1048576&&fA(e,ef,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;ld(n,e),n=e.pendingProps;var i=Bl(e,jt.current);Na(e,t),i=Dv(null,e,s,n,i,t);var r=Nv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(s)?(r=!0,Zd(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rv(e),i.updater=Vf,e.stateNode=i,i._reactInternals=e,Sg(e,s,n,t),e=xg(null,e,s,!0,r,t)):(e.tag=0,Fe&&r&&bv(e),$t(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(ld(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=n1(s),n=Xn(s,n),i){case 0:e=Eg(null,e,s,n,t);break e;case 1:e=u0(null,e,s,n,t);break e;case 11:e=l0(null,e,s,n,t);break e;case 14:e=c0(null,e,s,Xn(s.type,n),t);break e}throw Error(F(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Xn(s,i),Eg(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Xn(s,i),u0(n,e,s,i,t);case 3:e:{if(GA(e),n===null)throw Error(F(387));s=e.pendingProps,r=e.memoizedState,i=r.element,wA(n,e),sf(e,s,null,t);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Wl(Error(F(423)),e),e=h0(n,e,s,t,i);break e}else if(s!==i){i=Wl(Error(F(424)),e),e=h0(n,e,s,t,i);break e}else for(bn=vr(e.stateNode.containerInfo.firstChild),En=e,Fe=!0,cs=null,t=vA(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ul(),s===i){e=Ci(n,e,t);break e}$t(n,e,s,t)}e=e.child}return e;case 5:return AA(e),n===null&&wg(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,pg(s,i)?o=null:r!==null&&pg(s,r)&&(e.flags|=32),WA(n,e),$t(n,e,o,t),e.child;case 6:return n===null&&wg(e),null;case 13:return XA(n,e,t);case 4:return Lv(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Vl(e,null,s,t):$t(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Xn(s,i),l0(n,e,s,i,t);case 7:return $t(n,e,e.pendingProps,t),e.child;case 8:return $t(n,e,e.pendingProps.children,t),e.child;case 12:return $t(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,Te(tf,s._currentValue),s._currentValue=o,r!==null)if(fs(r.value,o)){if(r.children===i.children&&!ln.current){e=Ci(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=wi(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),Ag(r.return,t,e),a.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(F(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Ag(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}$t(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Na(e,t),i=Un(i),s=s(i),e.flags|=1,$t(n,e,s,t),e.child;case 14:return s=e.type,i=Xn(s,e.pendingProps),i=Xn(s.type,i),c0(n,e,s,i,t);case 15:return VA(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Xn(s,i),ld(n,e),e.tag=1,cn(s)?(n=!0,Zd(e)):n=!1,Na(e,t),HA(e,s,i),Sg(e,s,i,t),xg(null,e,s,!0,n,t);case 19:return qA(n,e,t);case 22:return $A(n,e,t)}throw Error(F(156,e.tag))};function u_(n,e){return Ow(n,e)}function t1(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(n,e,t,s){return new t1(n,e,t,s)}function Gv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function n1(n){if(typeof n=="function")return Gv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===hv)return 11;if(n===dv)return 14}return 2}function _r(n,e){var t=n.alternate;return t===null?(t=zn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function hd(n,e,t,s,i,r){var o=2;if(s=n,typeof n=="function")Gv(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Aa:return Wo(t.children,i,r,e);case uv:o=8,i|=8;break;case Gp:return n=zn(12,t,e,i|2),n.elementType=Gp,n.lanes=r,n;case Xp:return n=zn(13,t,e,i),n.elementType=Xp,n.lanes=r,n;case qp:return n=zn(19,t,e,i),n.elementType=qp,n.lanes=r,n;case Aw:return Gf(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case yw:o=10;break e;case ww:o=9;break e;case hv:o=11;break e;case dv:o=14;break e;case Fi:o=16,s=null;break e}throw Error(F(130,n==null?n:typeof n,""))}return e=zn(o,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function Wo(n,e,t,s){return n=zn(7,n,s,e),n.lanes=t,n}function Gf(n,e,t,s){return n=zn(22,n,s,e),n.elementType=Aw,n.lanes=t,n.stateNode={isHidden:!1},n}function Np(n,e,t){return n=zn(6,n,null,e),n.lanes=t,n}function Op(n,e,t){return e=zn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function s1(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vp(0),this.expirationTimes=vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vp(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xv(n,e,t,s,i,r,o,a,c){return n=new s1(n,e,t,a,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=zn(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rv(r),n}function i1(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function h_(n){if(!n)return br;n=n._reactInternals;e:{if(ia(n)!==n||n.tag!==1)throw Error(F(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(n.tag===1){var t=n.type;if(cn(t))return hA(n,t,e)}return e}function d_(n,e,t,s,i,r,o,a,c){return n=Xv(t,s,!0,n,i,r,o,a,c),n.context=h_(null),t=n.current,s=Gt(),i=Ar(t),r=wi(s,i),r.callback=e??null,yr(t,r,i),n.current.lanes=i,Ah(n,i,s),un(n,s),n}function Xf(n,e,t,s){var i=e.current,r=Gt(),o=Ar(i);return t=h_(t),e.context===null?e.context=t:e.pendingContext=t,e=wi(r,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=yr(i,e,o),n!==null&&(ds(n,i,o,r),rd(n,i,o)),o}function df(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function _0(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function qv(n,e){_0(n,e),(n=n.alternate)&&_0(n,e)}function r1(){return null}var f_=typeof reportError=="function"?reportError:function(n){console.error(n)};function Yv(n){this._internalRoot=n}qf.prototype.render=Yv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(F(409));Xf(n,e,null,null)};qf.prototype.unmount=Yv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ko(function(){Xf(null,n,null,null)}),e[Ei]=null}};function qf(n){this._internalRoot=n}qf.prototype.unstable_scheduleHydration=function(n){if(n){var e=$w();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ni.length&&e!==0&&e<Ni[t].priority;t++);Ni.splice(t,0,n),t===0&&Gw(n)}};function Kv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Yf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function S0(){}function o1(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=df(o);r.call(u)}}var o=d_(e,s,n,0,null,!1,!1,"",S0);return n._reactRootContainer=o,n[Ei]=o.current,qc(n.nodeType===8?n.parentNode:n),Ko(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var a=s;s=function(){var u=df(c);a.call(u)}}var c=Xv(n,0,!1,null,null,!1,!1,"",S0);return n._reactRootContainer=c,n[Ei]=c.current,qc(n.nodeType===8?n.parentNode:n),Ko(function(){Xf(e,c,t,s)}),c}function Kf(n,e,t,s,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var c=df(o);a.call(c)}}Xf(e,o,n,i)}else o=o1(t,e,n,i,s);return df(o)}Uw=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=uc(e.pendingLanes);t!==0&&(gv(e,t|1),un(e,qe()),!(pe&6)&&(Gl=qe()+500,Rr()))}break;case 13:Ko(function(){var s=xi(n,1);if(s!==null){var i=Gt();ds(s,n,1,i)}}),qv(n,1)}};mv=function(n){if(n.tag===13){var e=xi(n,134217728);if(e!==null){var t=Gt();ds(e,n,134217728,t)}qv(n,134217728)}};Vw=function(n){if(n.tag===13){var e=Ar(n),t=xi(n,e);if(t!==null){var s=Gt();ds(t,n,e,s)}qv(n,e)}};$w=function(){return _e};Ww=function(n,e){var t=_e;try{return _e=n,e()}finally{_e=t}};ig=function(n,e,t){switch(e){case"input":if(Qp(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=Hf(s);if(!i)throw Error(F(90));Sw(s),Qp(s,i)}}}break;case"textarea":Ew(n,t);break;case"select":e=t.value,e!=null&&Ma(n,!!t.multiple,e,!1)}};Lw=Vv;Mw=Ko;var a1={usingClientEntryPoint:!1,Events:[Sh,Ea,Hf,Pw,Rw,Vv]},ic={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l1={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Dw(n),n===null?null:n.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||r1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{Nf=Xh.inject(l1),Ns=Xh}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a1;kn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kv(e))throw Error(F(200));return i1(n,e,null,t)};kn.createRoot=function(n,e){if(!Kv(n))throw Error(F(299));var t=!1,s="",i=f_;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xv(n,1,!1,null,null,t,!1,s,i),n[Ei]=e.current,qc(n.nodeType===8?n.parentNode:n),new Yv(e)};kn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(F(188)):(n=Object.keys(n).join(","),Error(F(268,n)));return n=Dw(e),n=n===null?null:n.stateNode,n};kn.flushSync=function(n){return Ko(n)};kn.hydrate=function(n,e,t){if(!Yf(e))throw Error(F(200));return Kf(null,n,e,!0,t)};kn.hydrateRoot=function(n,e,t){if(!Kv(n))throw Error(F(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",o=f_;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=d_(e,null,n,1,t??null,i,!1,r,o),n[Ei]=e.current,qc(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new qf(e)};kn.render=function(n,e,t){if(!Yf(e))throw Error(F(200));return Kf(null,n,e,!1,t)};kn.unmountComponentAtNode=function(n){if(!Yf(n))throw Error(F(40));return n._reactRootContainer?(Ko(function(){Kf(null,null,n,!1,function(){n._reactRootContainer=null,n[Ei]=null})}),!0):!1};kn.unstable_batchedUpdates=Vv;kn.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Yf(t))throw Error(F(200));if(n==null||n._reactInternals===void 0)throw Error(F(38));return Kf(n,e,t,!1,s)};kn.version="18.3.1-next-f1338f8080-20240426";function p_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p_)}catch(n){console.error(n)}}p_(),pw.exports=kn;var c1=pw.exports,b0=c1;$p.createRoot=b0.createRoot,$p.hydrateRoot=b0.hydrateRoot;const u1="modulepreload",h1=function(n){return"/3D_Avatar_Virtual_Teacher/"+n},E0={},qh=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=h1(c),c in E0)return;E0[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":u1,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var Oc={};Oc.d=(n,e)=>{for(var t in e)Oc.o(e,t)&&!Oc.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Oc.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var ee=globalThis.pdfjsLib={};Oc.d(ee,{AbortException:()=>oa,AnnotationEditorLayer:()=>qm,AnnotationEditorParamsType:()=>Z,AnnotationEditorType:()=>se,AnnotationEditorUIManager:()=>Zo,AnnotationLayer:()=>ck,AnnotationMode:()=>ji,ColorPicker:()=>mf,DOMSVGFactory:()=>ly,DrawLayer:()=>Zm,FeatureTest:()=>Xt,GlobalWorkerOptions:()=>mi,ImageKind:()=>dd,InvalidPDFException:()=>m_,MissingPDFException:()=>ra,OPS:()=>qn,OutputScale:()=>Bg,PDFDataRangeTransport:()=>dS,PDFDateString:()=>ty,PDFWorker:()=>za,PasswordResponses:()=>g1,PermissionFlag:()=>p1,PixelsPerInch:()=>Er,RenderingCancelledException:()=>Jv,TextLayer:()=>gm,UnexpectedResponseException:()=>ep,Util:()=>V,VerbosityLevel:()=>Qf,XfaLayer:()=>pS,build:()=>VC,createValidAbsoluteUrl:()=>w1,fetchData:()=>np,getDocument:()=>FC,getFilenameFromUrl:()=>T1,getPdfFilenameFromUrl:()=>P1,getXfaPageViewport:()=>R1,isDataScheme:()=>sp,isPdfFile:()=>ey,noContextMenu:()=>$n,normalizeUnicode:()=>x1,setLayerDimensions:()=>Qo,shadow:()=>he,version:()=>UC});const Ot=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),g_=[1,0,0,1,0,0],Og=[.001,0,0,.001,0,0],d1=1e7,jp=1.35,An={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ji={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},f1="pdfjs_internal_editor_",se={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Z={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},p1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},dd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},nt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},rc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Qf={ERRORS:0,WARNINGS:1,INFOS:5},qn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},g1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Zf=Qf.WARNINGS;function m1(n){Number.isInteger(n)&&(Zf=n)}function v1(){return Zf}function Jf(n){Zf>=Qf.INFOS&&console.log(`Info: ${n}`)}function oe(n){Zf>=Qf.WARNINGS&&console.log(`Warning: ${n}`)}function Re(n){throw new Error(n)}function at(n,e){n||Re(e)}function y1(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function w1(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=E1(n)}catch{}}const s=e?new URL(n,e):new URL(n);if(y1(s))return s}catch{}return null}function he(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Lr=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class jg extends Lr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class zg extends Lr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class m_ extends Lr{constructor(e){super(e,"InvalidPDFException")}}class ra extends Lr{constructor(e){super(e,"MissingPDFException")}}class ep extends Lr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class A1 extends Lr{constructor(e){super(e,"FormatError")}}class oa extends Lr{constructor(e){super(e,"AbortException")}}function v_(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Re("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function tp(n){typeof n!="string"&&Re("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function _1(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Qv(n){const e=Object.create(null);for(const[t,s]of n)e[t]=s;return e}function S1(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function b1(){try{return new Function(""),!0}catch{return!1}}class Xt{static get isLittleEndian(){return he(this,"isLittleEndian",S1())}static get isEvalSupported(){return he(this,"isEvalSupported",b1())}static get isOffscreenCanvasSupported(){return he(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?he(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):he(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return he(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const zp=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var _i,fd,Hg;class V{static makeHexColor(e,t,s){return`#${zp[e]}${zp[t]}${zp[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[s,i]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[i,r]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],i[0],r[0],o[0]),Math.min(s[1],i[1],r[1],o[1]),Math.max(s[0],i[0],r[0],o[0]),Math.max(s[1],i[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(s+o)/2,c=Math.sqrt((s+o)**2-4*(s*o-r*i))/2,u=a+c||1,h=a-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[s,r,i,o]}static bezierBoundingBox(e,t,s,i,r,o,a,c,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,a),Math.min(t,c),Math.max(e,a),Math.max(t,c)],y(this,_i,Hg).call(this,e,s,r,a,t,i,o,c,3*(-e+3*(s-r)+a),6*(e-2*s+r),3*(s-e),u),y(this,_i,Hg).call(this,e,s,r,a,t,i,o,c,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),u),u}}_i=new WeakSet,fd=function(e,t,s,i,r,o,a,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*e+3*u*t)+3*f*s)+p*i,A=d*(d*(d*r+3*u*o)+3*f*a)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],A),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],A)},Hg=function(e,t,s,i,r,o,a,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&y(this,_i,fd).call(this,e,t,s,i,r,o,a,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),A=2*u;y(this,_i,fd).call(this,e,t,s,i,r,o,a,c,(-h+m)/A,f),y(this,_i,fd).call(this,e,t,s,i,r,o,a,c,(-h-m)/A,f)},_(V,_i);function E1(n){return decodeURIComponent(escape(n))}let Hp=null,x0=null;function x1(n){return Hp||(Hp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,x0=new Map([["","t"]])),n.replaceAll(Hp,(e,t,s)=>t?t.normalize("NFKC"):x0.get(s))}function C1(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return v_(n)}const Zv="pdfjs_internal_id_",zs={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function k1(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(v_(n))}const Bs="http://www.w3.org/2000/svg",Ur=class Ur{};Q(Ur,"CSS",96),Q(Ur,"PDF",72),Q(Ur,"PDF_TO_CSS_UNITS",Ur.CSS/Ur.PDF);let Er=Ur;async function np(n,e="text"){if(dc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Eh{constructor({viewBox:e,scale:t,rotation:s,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=s,this.offsetX=i,this.offsetY=r;const a=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,A,E;u===0?(p=Math.abs(c-e[1])*t+i,m=Math.abs(a-e[0])*t+r,A=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(p=Math.abs(a-e[0])*t+i,m=Math.abs(c-e[1])*t+r,A=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,p-u*t*a-d*t*c,m-h*t*a-f*t*c],this.width=A,this.height=E}get rawDims(){const{viewBox:e}=this;return he(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Eh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return V.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=V.applyTransform([e[0],e[1]],this.transform),s=V.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return V.applyInverseTransform([e,t],this.transform)}}class Jv extends Lr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function sp(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function ey(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function T1(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function P1(n,e="document.pdf"){if(typeof n!="string")return e;if(sp(n))return oe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class C0{constructor(){Q(this,"started",Object.create(null));Q(this,"times",[])}time(e){e in this.started&&oe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||oe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function dc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function $n(n){n.preventDefault()}function k0(n){console.log("Deprecated API usage: "+n)}var iu;class ty{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,iu)||v(this,iu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,iu).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(s,i,r,o,a,c))}}iu=new WeakMap,_(ty,iu);function R1(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Eh({viewBox:r,scale:e,rotation:t})}function ny(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(oe(`Not a valid color format: "${n}"`),[0,0,0])}function L1(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,ny(s))}e.remove()}function je(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform();return[e,t,s,i,r,o]}function Hs(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[e,t,s,i,r,o]}function Qo(n,e,t=!1,s=!0){if(e instanceof Eh){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=n,a=Xt.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=a?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Bg{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var zi,Xr,Yn,qr,ru,ou,yf,y_,qt,w_,A_,pd,__,Vg;const Vs=class Vs{constructor(e){_(this,qt);_(this,zi,null);_(this,Xr,null);_(this,Yn);_(this,qr,null);_(this,ru,null);v(this,Yn,e),l(Vs,ou)||v(Vs,ou,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=v(this,zi,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Yn)._uiManager._signal;e.addEventListener("contextmenu",$n,{signal:t}),e.addEventListener("pointerdown",y(Vs,yf,y_),{signal:t});const s=v(this,qr,document.createElement("div"));s.className="buttons",e.append(s);const i=l(this,Yn).toolbarPosition;if(i){const{style:r}=e,o=l(this,Yn)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return y(this,qt,__).call(this),e}get div(){return l(this,zi)}hide(){var e;l(this,zi).classList.add("hidden"),(e=l(this,Xr))==null||e.hideDropdown()}show(){var e;l(this,zi).classList.remove("hidden"),(e=l(this,ru))==null||e.shown()}async addAltText(e){const t=await e.render();y(this,qt,pd).call(this,t),l(this,qr).prepend(t,l(this,qt,Vg)),v(this,ru,e)}addColorPicker(e){v(this,Xr,e);const t=e.renderButton();y(this,qt,pd).call(this,t),l(this,qr).prepend(t,l(this,qt,Vg))}remove(){var e;l(this,zi).remove(),(e=l(this,Xr))==null||e.destroy(),v(this,Xr,null)}};zi=new WeakMap,Xr=new WeakMap,Yn=new WeakMap,qr=new WeakMap,ru=new WeakMap,ou=new WeakMap,yf=new WeakSet,y_=function(e){e.stopPropagation()},qt=new WeakSet,w_=function(e){l(this,Yn)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},A_=function(e){l(this,Yn)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},pd=function(e){const t=l(this,Yn)._uiManager._signal;e.addEventListener("focusin",y(this,qt,w_).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",y(this,qt,A_).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",$n,{signal:t})},__=function(){const{editorType:e,_uiManager:t}=l(this,Yn),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",l(Vs,ou)[e]),y(this,qt,pd).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),l(this,qr).append(s)},Vg=function(){const e=document.createElement("div");return e.className="divider",e},_(Vs,yf),_(Vs,ou,null);let Ug=Vs;var au,Yr,Kr,Cr,S_,b_,E_;class M1{constructor(e){_(this,Cr);_(this,au,null);_(this,Yr,null);_(this,Kr);v(this,Kr,e)}show(e,t,s){const[i,r]=y(this,Cr,b_).call(this,t,s),{style:o}=l(this,Yr)||v(this,Yr,y(this,Cr,S_).call(this));e.append(l(this,Yr)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Yr).remove()}}au=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,Cr=new WeakSet,S_=function(){const e=v(this,Yr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",$n,{signal:l(this,Kr)._signal});const t=v(this,au,document.createElement("div"));return t.className="buttons",e.append(t),y(this,Cr,E_).call(this),e},b_=function(e,t){let s=0,i=0;for(const r of e){const o=r.y+r.height;if(o<s)continue;const a=r.x+(t?r.width:0);if(o>s){i=a,s=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,s]},E_=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,Kr)._signal;e.addEventListener("contextmenu",$n,{signal:s}),e.addEventListener("click",()=>{l(this,Kr).highlightSelection("floating_button")},{signal:s}),l(this,au).append(e)};function ff(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}function I1(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var wf;class F1{constructor(){_(this,wf,0)}get id(){return`${f1}${Bt(this,wf)._++}`}}wf=new WeakMap;var Ua,lu,Lt,Va,gd;const hy=class hy{constructor(){_(this,Va);_(this,Ua,C1());_(this,lu,0);_(this,Lt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return he(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return y(this,Va,gd).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return y(this,Va,gd).call(this,e,e)}async getFromBlob(e,t){const s=await t;return y(this,Va,gd).call(this,e,s)}async getFromId(e){l(this,Lt)||v(this,Lt,new Map);const t=l(this,Lt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Lt)||v(this,Lt,new Map);let s=l(this,Lt).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${l(this,Ua)}_${Bt(this,lu)._++}`,refCounter:1,isSvg:!1},l(this,Lt).set(e,s),l(this,Lt).set(s.id,s),s}getSvgUrl(e){const t=l(this,Lt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;l(this,Lt)||v(this,Lt,new Map);const t=l(this,Lt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Ua)}_`)}};Ua=new WeakMap,lu=new WeakMap,Lt=new WeakMap,Va=new WeakSet,gd=async function(e,t){l(this,Lt)||v(this,Lt,new Map);let s=l(this,Lt).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,Ua)}_${Bt(this,lu)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await np(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=hy._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,u()},o.onload=async()=>{const d=s.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){console.error(i),s=null}return l(this,Lt).set(e,s),s&&l(this,Lt).set(s.id,s),s};let $g=hy;var dt,Hi,cu,ft;class D1{constructor(e=128){_(this,dt,[]);_(this,Hi,!1);_(this,cu);_(this,ft,-1);v(this,cu,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),l(this,Hi))return;const c={cmd:e,undo:t,post:s,type:r};if(l(this,ft)===-1){l(this,dt).length>0&&(l(this,dt).length=0),v(this,ft,0),l(this,dt).push(c);return}if(o&&l(this,dt)[l(this,ft)].type===r){a&&(c.undo=l(this,dt)[l(this,ft)].undo),l(this,dt)[l(this,ft)]=c;return}const u=l(this,ft)+1;u===l(this,cu)?l(this,dt).splice(0,1):(v(this,ft,u),u<l(this,dt).length&&l(this,dt).splice(u)),l(this,dt).push(c)}undo(){if(l(this,ft)===-1)return;v(this,Hi,!0);const{undo:e,post:t}=l(this,dt)[l(this,ft)];e(),t==null||t(),v(this,Hi,!1),v(this,ft,l(this,ft)-1)}redo(){if(l(this,ft)<l(this,dt).length-1){v(this,ft,l(this,ft)+1),v(this,Hi,!0);const{cmd:e,post:t}=l(this,dt)[l(this,ft)];e(),t==null||t(),v(this,Hi,!1)}}hasSomethingToUndo(){return l(this,ft)!==-1}hasSomethingToRedo(){return l(this,ft)<l(this,dt).length-1}destroy(){v(this,dt,null)}}dt=new WeakMap,Hi=new WeakMap,cu=new WeakMap,ft=new WeakMap;var Af,x_;class xh{constructor(e){_(this,Af);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Xt.platform;for(const[s,i,r={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(y(this,Af,x_).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(i.bind(e,...o,t)(),r||(t.stopPropagation(),t.preventDefault()))}}Af=new WeakSet,x_=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const _f=class _f{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return L1(e),he(this,"_colors",e)}convert(e){const t=ny(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,o)=>r===t[o]))return _f._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?V.makeHexColor(...t):e}};Q(_f,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Wg=_f;var $a,dn,st,At,Wa,Gs,Ga,Kn,Bi,Xa,Qr,vs,Qn,Zr,uu,hu,qa,du,ys,Ui,Ya,Vi,ws,Sf,$i,fu,Wi,Jr,pu,gu,pt,ye,Xs,eo,mu,vu,Gi,As,qs,yu,Rn,O,md,Gg,C_,k_,vd,T_,P_,R_,Xg,L_,qg,Yg,M_,Ut,Mi,I_,F_,Kg,D_,fc,Qg;const La=class La{constructor(e,t,s,i,r,o,a,c,u,h,d){_(this,O);_(this,$a,new AbortController);_(this,dn,null);_(this,st,new Map);_(this,At,new Map);_(this,Wa,null);_(this,Gs,null);_(this,Ga,null);_(this,Kn,new D1);_(this,Bi,null);_(this,Xa,0);_(this,Qr,new Set);_(this,vs,null);_(this,Qn,null);_(this,Zr,new Set);_(this,uu,!1);_(this,hu,!1);_(this,qa,!1);_(this,du,null);_(this,ys,null);_(this,Ui,null);_(this,Ya,null);_(this,Vi,!1);_(this,ws,null);_(this,Sf,new F1);_(this,$i,!1);_(this,fu,!1);_(this,Wi,null);_(this,Jr,null);_(this,pu,null);_(this,gu,null);_(this,pt,se.NONE);_(this,ye,new Set);_(this,Xs,null);_(this,eo,null);_(this,mu,null);_(this,vu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,Gi,[0,0]);_(this,As,null);_(this,qs,null);_(this,yu,null);_(this,Rn,null);const f=this._signal=l(this,$a).signal;v(this,qs,e),v(this,yu,t),v(this,Wa,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:f}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),i._on("setpreference",this.onSetPreference.bind(this),{signal:f}),i._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),y(this,O,T_).call(this),y(this,O,M_).call(this),y(this,O,Xg).call(this),v(this,Gs,r.annotationStorage),v(this,du,r.filterFactory),v(this,eo,o),v(this,Ya,a||null),v(this,uu,c),v(this,hu,u),v(this,qa,h),v(this,gu,d||null),this.viewParameters={realScale:Er.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=La.prototype,t=o=>l(o,qs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return he(this,"_keyboardManager",new xh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,qs).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,qs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i;(e=l(this,Rn))==null||e.resolve(),v(this,Rn,null),(t=l(this,$a))==null||t.abort(),v(this,$a,null),this._signal=null;for(const r of l(this,At).values())r.destroy();l(this,At).clear(),l(this,st).clear(),l(this,Zr).clear(),v(this,dn,null),l(this,ye).clear(),l(this,Kn).destroy(),(s=l(this,Wa))==null||s.destroy(),(i=l(this,ws))==null||i.hide(),v(this,ws,null),l(this,ys)&&(clearTimeout(l(this,ys)),v(this,ys,null)),l(this,As)&&(clearTimeout(l(this,As)),v(this,As,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,gu)}get useNewAltTextFlow(){return l(this,hu)}get useNewAltTextWhenAddingImage(){return l(this,qa)}get hcmFilter(){return he(this,"hcmFilter",l(this,eo)?l(this,du).addHCMFilter(l(this,eo).foreground,l(this,eo).background):"none")}get direction(){return he(this,"direction",getComputedStyle(l(this,qs)).direction)}get highlightColors(){return he(this,"highlightColors",l(this,Ya)?new Map(l(this,Ya).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return he(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){v(this,pu,e)}editAltText(e,t=!1){var s;(s=l(this,Wa))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":v(this,qa,t);break}}onPageChanging({pageNumber:e}){v(this,Xa,e-1)}focusMainContainer(){l(this,qs).focus()}findParent(e,t){for(const s of l(this,At).values()){const{x:i,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+a)return s}return null}disableUserSelect(e=!1){l(this,yu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Zr).add(e)}removeShouldRescale(e){l(this,Zr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Er.PDF_TO_CSS_UNITS;for(const t of l(this,Zr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=t,a=t.toString(),u=y(this,O,md).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=y(this,O,Gg).call(this,u),f=l(this,pt)===se.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(se.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Gs)&&!l(this,Gs).has(e.id)&&l(this,Gs).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Vi)&&(v(this,Vi,!1),y(this,O,vd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,ye))if(t.div.contains(e)){v(this,Jr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Jr))return;const[e,t]=l(this,Jr);v(this,Jr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){y(this,O,Xg).call(this),y(this,O,qg).call(this)}removeEditListeners(){y(this,O,L_).call(this),y(this,O,Yg).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of l(this,Qn))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of l(this,Qn))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=l(this,dn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of l(this,ye)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of l(this,Qn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){oe(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)y(this,O,Kg).call(this,c);y(this,O,Qg).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){oe(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,pt)!==se.NONE&&!this.isEditorHandlingKeyboard&&La._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Vi)&&(v(this,Vi,!1),y(this,O,vd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(y(this,O,P_).call(this),y(this,O,qg).call(this),y(this,O,Ut).call(this,{isEditing:l(this,pt)!==se.NONE,isEmpty:y(this,O,fc).call(this),hasSomethingToUndo:l(this,Kn).hasSomethingToUndo(),hasSomethingToRedo:l(this,Kn).hasSomethingToRedo(),hasSelectedEditor:!1})):(y(this,O,R_).call(this),y(this,O,Yg).call(this),y(this,O,Ut).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Qn)){v(this,Qn,e);for(const t of l(this,Qn))y(this,O,Mi).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Sf).id}get currentLayer(){return l(this,At).get(l(this,Xa))}getLayer(e){return l(this,At).get(e)}get currentPageIndex(){return l(this,Xa)}addLayer(e){l(this,At).set(e.pageIndex,e),l(this,$i)?e.enable():e.disable()}removeLayer(e){l(this,At).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){if(l(this,pt)!==e&&!(l(this,Rn)&&(await l(this,Rn).promise,!l(this,Rn)))){if(v(this,Rn,Promise.withResolvers()),v(this,pt,e),e===se.NONE){this.setEditingState(!1),y(this,O,F_).call(this),l(this,Rn).resolve();return}this.setEditingState(!0),await y(this,O,I_).call(this),this.unselectAll();for(const i of l(this,At).values())i.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),l(this,Rn).resolve();return}for(const i of l(this,st).values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();l(this,Rn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,pt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(l(this,Qn)){switch(e){case Z.CREATE:this.currentLayer.addNewEditor();return;case Z.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,pu))==null||s.updateColor(t);break;case Z.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,mu)||v(this,mu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of l(this,ye))i.updateParams(e,t);for(const i of l(this,Qn))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const o of l(this,st).values())o.editorType===e&&o.show(t);(((r=l(this,mu))==null?void 0:r.get(Z.HIGHLIGHT_SHOW_ALL))??!0)!==t&&y(this,O,Mi).call(this,[[Z.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,fu)!==e){v(this,fu,e);for(const t of l(this,At).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of l(this,st).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return l(this,st).get(e)}addEditor(e){l(this,st).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,ys)&&clearTimeout(l(this,ys)),v(this,ys,setTimeout(()=>{this.focusMainContainer(),v(this,ys,null)},0))),l(this,st).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Qr).has(e.annotationElementId))&&((t=l(this,Gs))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Qr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Qr).has(e)}removeDeletedAnnotationElement(e){l(this,Qr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,dn)!==e&&(v(this,dn,e),e&&y(this,O,Mi).call(this,e.propertiesToUpdate))}updateUI(e){l(this,O,D_)===e&&y(this,O,Mi).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,ye).has(e)){l(this,ye).delete(e),e.unselect(),y(this,O,Ut).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ye).add(e),e.select(),y(this,O,Mi).call(this,e.propertiesToUpdate),y(this,O,Ut).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,ye))t!==e&&t.unselect();l(this,ye).clear(),l(this,ye).add(e),e.select(),y(this,O,Mi).call(this,e.propertiesToUpdate),y(this,O,Ut).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,ye).has(e)}get firstSelectedEditor(){return l(this,ye).values().next().value}unselect(e){e.unselect(),l(this,ye).delete(e),y(this,O,Ut).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ye).size!==0}get isEnterHandled(){return l(this,ye).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Kn).undo(),y(this,O,Ut).call(this,{hasSomethingToUndo:l(this,Kn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:y(this,O,fc).call(this)})}redo(){l(this,Kn).redo(),y(this,O,Ut).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Kn).hasSomethingToRedo(),isEmpty:y(this,O,fc).call(this)})}addCommands(e){l(this,Kn).add(e),y(this,O,Ut).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:y(this,O,fc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,ye)],t=()=>{for(const i of e)i.remove()},s=()=>{for(const i of e)y(this,O,Kg).call(this,i)};this.addCommands({cmd:t,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=l(this,dn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,dn)||this.hasSelection}selectAll(){for(const e of l(this,ye))e.commit();y(this,O,Qg).call(this,l(this,st).values())}unselectAll(){if(!(l(this,dn)&&(l(this,dn).commitOrRemove(),l(this,pt)!==se.NONE))&&this.hasSelection){for(const e of l(this,ye))e.unselect();l(this,ye).clear(),y(this,O,Ut).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,Gi)[0]+=e,l(this,Gi)[1]+=t;const[i,r]=l(this,Gi),o=[...l(this,ye)],a=1e3;l(this,As)&&clearTimeout(l(this,As)),v(this,As,setTimeout(()=>{v(this,As,null),l(this,Gi)[0]=l(this,Gi)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,st).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of o)l(this,st).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,vs,new Map);for(const e of l(this,ye))l(this,vs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,vs))return!1;this.disableUserSelect(!1);const e=l(this,vs);v(this,vs,null);let t=!1;for(const[{x:i,y:r,pageIndex:o},a]of e)a.newX=i,a.newY=r,a.newPageIndex=o,t||(t=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(i,r,o,a)=>{if(l(this,st).has(i.id)){const c=l(this,At).get(a);c?i._setParentAndPosition(c,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of e)s(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of e)s(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,vs))for(const s of l(this,vs).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,ye).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,dn)===e}getActive(){return l(this,dn)}getMode(){return l(this,pt)}get imageManager(){return he(this,"imageManager",new $g)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-s)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-s)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:A}of d.getClientRects())m===0||A===0||c.push(a(f,p,m,A))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Ga)||v(this,Ga,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Ga))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=l(this,Ga))==null?void 0:i.get(e.data.id);if(!t)return;const s=l(this,Gs).getRawValue(t);s&&(l(this,pt)===se.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};$a=new WeakMap,dn=new WeakMap,st=new WeakMap,At=new WeakMap,Wa=new WeakMap,Gs=new WeakMap,Ga=new WeakMap,Kn=new WeakMap,Bi=new WeakMap,Xa=new WeakMap,Qr=new WeakMap,vs=new WeakMap,Qn=new WeakMap,Zr=new WeakMap,uu=new WeakMap,hu=new WeakMap,qa=new WeakMap,du=new WeakMap,ys=new WeakMap,Ui=new WeakMap,Ya=new WeakMap,Vi=new WeakMap,ws=new WeakMap,Sf=new WeakMap,$i=new WeakMap,fu=new WeakMap,Wi=new WeakMap,Jr=new WeakMap,pu=new WeakMap,gu=new WeakMap,pt=new WeakMap,ye=new WeakMap,Xs=new WeakMap,eo=new WeakMap,mu=new WeakMap,vu=new WeakMap,Gi=new WeakMap,As=new WeakMap,qs=new WeakMap,yu=new WeakMap,Rn=new WeakMap,O=new WeakSet,md=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Gg=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of l(this,At).values())if(s.hasTextLayer(e))return s;return null},C_=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=y(this,O,md).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(l(this,ws)||v(this,ws,new M1(this)),l(this,ws).show(s,i,this.direction==="ltr"))},k_=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Xs)&&((r=l(this,ws))==null||r.hide(),v(this,Xs,null),y(this,O,Ut).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Xs))return;const i=y(this,O,md).call(this,e).closest(".textLayer");if(!i){l(this,Xs)&&((o=l(this,ws))==null||o.hide(),v(this,Xs,null),y(this,O,Ut).call(this,{hasSelectedText:!1}));return}if((a=l(this,ws))==null||a.hide(),v(this,Xs,t),y(this,O,Ut).call(this,{hasSelectedText:!0}),!(l(this,pt)!==se.HIGHLIGHT&&l(this,pt)!==se.NONE)&&(l(this,pt)===se.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,Vi,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,pt)===se.HIGHLIGHT?y(this,O,Gg).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&y(this,O,vd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},vd=function(e=""){l(this,pt)===se.HIGHLIGHT?this.highlightSelection(e):l(this,uu)&&y(this,O,C_).call(this)},T_=function(){document.addEventListener("selectionchange",y(this,O,k_).bind(this),{signal:this._signal})},P_=function(){if(l(this,Ui))return;v(this,Ui,new AbortController);const e=this.combinedSignal(l(this,Ui));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},R_=function(){var e;(e=l(this,Ui))==null||e.abort(),v(this,Ui,null)},Xg=function(){if(l(this,Wi))return;v(this,Wi,new AbortController);const e=this.combinedSignal(l(this,Wi));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},L_=function(){var e;(e=l(this,Wi))==null||e.abort(),v(this,Wi,null)},qg=function(){if(l(this,Bi))return;v(this,Bi,new AbortController);const e=this.combinedSignal(l(this,Bi));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Yg=function(){var e;(e=l(this,Bi))==null||e.abort(),v(this,Bi,null)},M_=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ut=function(e){Object.entries(e).some(([s,i])=>l(this,vu)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,vu),e)}),l(this,pt)===se.HIGHLIGHT&&e.hasSelectedEditor===!1&&y(this,O,Mi).call(this,[[Z.HIGHLIGHT_FREE,!0]]))},Mi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},I_=async function(){if(!l(this,$i)){v(this,$i,!0);const e=[];for(const t of l(this,At).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,st).values())t.enable()}},F_=function(){if(this.unselectAll(),l(this,$i)){v(this,$i,!1);for(const e of l(this,At).values())e.disable();for(const e of l(this,st).values())e.disable()}},Kg=function(e){const t=l(this,At).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},D_=function(){let e=null;for(e of l(this,ye));return e},fc=function(){if(l(this,st).size===0)return!0;if(l(this,st).size===1)for(const e of l(this,st).values())return e.isEmpty();return!1},Qg=function(e){for(const t of l(this,ye))t.unselect();l(this,ye).clear();for(const t of e)t.isEmpty()||(l(this,ye).add(t),t.select());y(this,O,Ut).call(this,{hasSelectedEditor:this.hasSelection})},Q(La,"TRANSLATE_SMALL",1),Q(La,"TRANSLATE_BIG",10);let Zo=La;var gt,_s,Zn,Ka,Ss,fn,Qa,bs,en,Ys,to,Es,Xi,us,pc,yd;const Vt=class Vt{constructor(e){_(this,us);_(this,gt,null);_(this,_s,!1);_(this,Zn,null);_(this,Ka,null);_(this,Ss,null);_(this,fn,null);_(this,Qa,!1);_(this,bs,null);_(this,en,null);_(this,Ys,null);_(this,to,null);_(this,Es,!1);v(this,en,e),v(this,Es,e._uiManager.useNewAltTextFlow),l(Vt,Xi)||v(Vt,Xi,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Vt._l10n??(Vt._l10n=e)}async render(){const e=v(this,Zn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=v(this,Ka,document.createElement("span"));e.append(t),l(this,Es)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Vt,Xi).missing),t.setAttribute("data-l10n-id",l(Vt,Xi)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,en)._uiManager._signal;e.addEventListener("contextmenu",$n,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),l(this,en)._uiManager.editAltText(l(this,en)),l(this,Es)&&l(this,en)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,us,pc)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(v(this,Qa,!0),i(r))},{signal:s}),await y(this,us,yd).call(this),e}finish(){l(this,Zn)&&(l(this,Zn).focus({focusVisible:l(this,Qa)}),v(this,Qa,!1))}isEmpty(){return l(this,Es)?l(this,gt)===null:!l(this,gt)&&!l(this,_s)}hasData(){return l(this,Es)?l(this,gt)!==null||!!l(this,Ys):this.isEmpty()}get guessedText(){return l(this,Ys)}async setGuessedText(e){l(this,gt)===null&&(v(this,Ys,e),v(this,to,await Vt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),y(this,us,yd).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Es)||l(this,gt)){(t=l(this,bs))==null||t.remove(),v(this,bs,null);return}if(!l(this,bs)){const s=v(this,bs,document.createElement("div"));s.className="noAltTextBadge",l(this,en).div.append(s)}l(this,bs).classList.toggle("hidden",!e)}serialize(e){let t=l(this,gt);return!e&&l(this,Ys)===t&&(t=l(this,to)),{altText:t,decorative:l(this,_s),guessedText:l(this,Ys),textWithDisclaimer:l(this,to)}}get data(){return{altText:l(this,gt),decorative:l(this,_s)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(v(this,Ys,s),v(this,to,i)),!(l(this,gt)===e&&l(this,_s)===t)&&(r||(v(this,gt,e),v(this,_s,t)),y(this,us,yd).call(this))}toggle(e=!1){l(this,Zn)&&(!e&&l(this,fn)&&(clearTimeout(l(this,fn)),v(this,fn,null)),l(this,Zn).disabled=!e)}shown(){l(this,en)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,us,pc)}})}destroy(){var e,t;(e=l(this,Zn))==null||e.remove(),v(this,Zn,null),v(this,Ka,null),v(this,Ss,null),(t=l(this,bs))==null||t.remove(),v(this,bs,null)}};gt=new WeakMap,_s=new WeakMap,Zn=new WeakMap,Ka=new WeakMap,Ss=new WeakMap,fn=new WeakMap,Qa=new WeakMap,bs=new WeakMap,en=new WeakMap,Ys=new WeakMap,to=new WeakMap,Es=new WeakMap,Xi=new WeakMap,us=new WeakSet,pc=function(){return l(this,gt)&&"added"||l(this,gt)===null&&this.guessedText&&"review"||"missing"},yd=async function(){var i,r,o;const e=l(this,Zn);if(!e)return;if(l(this,Es)){if(e.classList.toggle("done",!!l(this,gt)),e.setAttribute("data-l10n-id",l(Vt,Xi)[l(this,us,pc)]),(i=l(this,Ka))==null||i.setAttribute("data-l10n-id",l(Vt,Xi)[`${l(this,us,pc)}-label`]),!l(this,gt)){(r=l(this,Ss))==null||r.remove();return}}else{if(!l(this,gt)&&!l(this,_s)){e.classList.remove("done"),(o=l(this,Ss))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Ss);if(!t){v(this,Ss,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,en).id}`;const a=100,c=l(this,en)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,fn)),v(this,fn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{v(this,fn,setTimeout(()=>{v(this,fn,null),l(this,Ss).classList.add("show"),l(this,en)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,fn)&&(clearTimeout(l(this,fn)),v(this,fn,null)),(u=l(this,Ss))==null||u.classList.remove("show")},{signal:c})}l(this,_s)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,gt)),t.parentNode||e.append(t);const s=l(this,en).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},_(Vt,Xi,null),Q(Vt,"_l10n",null);let pf=Vt;var no,Jn,Ne,Za,so,_t,io,qi,wu,ro,Yi,Au,oo,Ks,xs,Ja,el,Ln,_u,bf,ie,Zg,Su,Jg,em,N_,O_,tm,nm,sm,j_,im,z_,H_,B_,rm,gc;const ve=class ve{constructor(e){_(this,ie);_(this,no,null);_(this,Jn,null);_(this,Ne,null);_(this,Za,!1);_(this,so,!1);_(this,_t,null);_(this,io,null);_(this,qi,null);_(this,wu,"");_(this,ro,!1);_(this,Yi,null);_(this,Au,!1);_(this,oo,!1);_(this,Ks,!1);_(this,xs,null);_(this,Ja,0);_(this,el,0);_(this,Ln,null);Q(this,"_editToolbar",null);Q(this,"_initialOptions",Object.create(null));Q(this,"_initialData",null);Q(this,"_isVisible",!0);Q(this,"_uiManager",null);Q(this,"_focusEventsAllowed",!0);_(this,_u,!1);_(this,bf,ve._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ve.prototype._resizeWithKeyboard,t=Zo.TRANSLATE_SMALL,s=Zo.TRANSLATE_BIG;return he(this,"_resizerKeyboardManager",new xh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ve.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return he(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new N1({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ve._l10n??(ve._l10n=e),ve._l10nResizer||(ve._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ve._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ve._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Re("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,_u)}set _isDraggable(e){var t;v(this,_u,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,bf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):y(this,ie,gc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,ro)?v(this,ro,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/o,this.fixAndSetPosition()}translate(e,t){y(this,ie,Zg).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Yi)||v(this,Yi,[this.x,this.y]),y(this,ie,Zg).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Yi)||v(this,Yi,[this.x,this.y]);const[s,i]=this.parentDimensions;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,c]=this.getBaseTranslation();r+=a,o+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Yi)&&(l(this,Yi)[0]!==this.x||l(this,Yi)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ve,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,s]=this.pageDimensions;let{x:i,y:r,width:o,height:a}=this;if(o*=t,a*=s,i*=t,r*=s,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-o,i)),r=Math.max(0,Math.min(s-a,r));break;case 90:i=Math.max(0,Math.min(t-a,i)),r=Math.min(s,Math.max(o,r));break;case 180:i=Math.min(t,Math.max(o,i)),r=Math.min(s,Math.max(a,r));break;case 270:i=Math.min(t,Math.max(a,i)),r=Math.max(0,Math.min(s-o,r));break}this.x=i/=t,this.y=r/=s;const[c,u]=this.getBaseTranslation();i+=c,r+=u;const{style:h}=this.div;h.left=`${(100*i).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return y(s=ve,Su,Jg).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return y(s=ve,Su,Jg).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions;this.div.style.width=`${(100*e/s).toFixed(2)}%`,l(this,so)||(this.div.style.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!l(this,so)&&t.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!l(this,so)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,Ne))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,oo)?this._editToolbar:(this._editToolbar=new Ug(this),this.div.append(this._editToolbar.render()),l(this,Ne)&&await this._editToolbar.addAltText(l(this,Ne)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Ne))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ne)||(pf.initialize(ve._l10n),v(this,Ne,new pf(this)),l(this,no)&&(l(this,Ne).data=l(this,no),v(this,no,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Ne))==null?void 0:e.data}set altTextData(e){l(this,Ne)&&(l(this,Ne).data=e)}get guessedAltText(){var e;return(e=l(this,Ne))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Ne))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Ne))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Ne)&&!l(this,Ne).isEmpty()}hasAltTextData(){var e;return((e=l(this,Ne))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Za)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),y(this,ie,im).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),ff(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Xt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(v(this,ro,!0),this._isDraggable){y(this,ie,j_).call(this,e);return}y(this,ie,sm).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,xs)&&clearTimeout(l(this,xs)),v(this,xs,setTimeout(()=>{var e;v(this,xs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(s){case 0:return[d+u+a,o-f-h-m+c,d+u+p+a,o-f-h+c];case 90:return[d+h+a,o-f+u+c,d+h+m+a,o-f+u+p+c];case 180:return[d-u-p+a,o-f+h+c,d-u+a,o-f+h+m+c];case 270:return[d-h-m+a,o-f-u-p+c,d-h+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,o]=e,a=r-s,c=o-i;switch(this.rotation){case 0:return[s,t-o,a,c];case 90:return[s,t-i,c,a];case 180:return[r,t-i,a,c];case 270:return[r,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){v(this,oo,!0)}disableEditMode(){v(this,oo,!1)}isInEditMode(){return l(this,oo)}shouldGetKeyboardEvents(){return l(this,Ks)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){y(this,ie,im).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Re("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});i.rotation=e.rotation,v(i,no,e.accessibilityData);const[r,o]=i.pageDimensions,[a,c,u,h]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/r,i.y=c/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,qi))==null||e.abort(),v(this,qi,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,xs)&&(clearTimeout(l(this,xs)),v(this,xs,null)),y(this,ie,gc).call(this),this.removeEditToolbar(),l(this,Ln)){for(const t of l(this,Ln).values())clearTimeout(t);v(this,Ln,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(y(this,ie,N_).call(this),l(this,_t).classList.remove("hidden"),ff(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),v(this,io,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,_t).children;if(!l(this,Jn)){v(this,Jn,Array.from(t));const o=y(this,ie,z_).bind(this),a=y(this,ie,H_).bind(this),c=this._uiManager._signal;for(const u of l(this,Jn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",y(this,ie,B_).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ve._l10nResizer[h])}}const s=l(this,Jn)[0];let i=0;for(const o of t){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Jn).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)l(this,_t).append(l(this,_t).firstChild);else if(r>i)for(let a=0;a<r-i;a++)l(this,_t).firstChild.before(l(this,_t).lastChild);let o=0;for(const a of t){const u=l(this,Jn)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ve._l10nResizer[u])}}y(this,ie,rm).call(this,0),v(this,Ks,!0),l(this,_t).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Ks)&&y(this,ie,nm).call(this,l(this,wu),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){y(this,ie,gc).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=l(this,Ne))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,i,r;(e=l(this,_t))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=l(this,Ne))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Au)}set isEditing(e){v(this,Au,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){v(this,so,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Ln)||v(this,Ln,new Map);const{action:s}=e;let i=l(this,Ln).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),l(this,Ln).delete(s),l(this,Ln).size===0&&v(this,Ln,null)},ve._telemetryTimeout),l(this,Ln).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),v(this,Za,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,Za,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};no=new WeakMap,Jn=new WeakMap,Ne=new WeakMap,Za=new WeakMap,so=new WeakMap,_t=new WeakMap,io=new WeakMap,qi=new WeakMap,wu=new WeakMap,ro=new WeakMap,Yi=new WeakMap,Au=new WeakMap,oo=new WeakMap,Ks=new WeakMap,xs=new WeakMap,Ja=new WeakMap,el=new WeakMap,Ln=new WeakMap,_u=new WeakMap,bf=new WeakMap,ie=new WeakSet,Zg=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this.fixAndSetPosition()},Su=new WeakSet,Jg=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},em=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},N_=function(){if(l(this,_t))return;v(this,_t,document.createElement("div")),l(this,_t).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");l(this,_t).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",y(this,ie,O_).bind(this,s),{signal:t}),i.addEventListener("contextmenu",$n,{signal:t}),i.tabIndex=-1}this.div.prepend(l(this,_t))},O_=function(e,t){var m;t.preventDefault();const{isMac:s}=Xt.platform;if(t.button!==0||t.ctrlKey&&s)return;(m=l(this,Ne))==null||m.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",y(this,ie,nm).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",$n,{signal:o});const a=this.x,c=this.y,u=this.width,h=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var A;r.abort(),this.parent.togglePointerEvents(!0),(A=l(this,Ne))==null||A.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=d,this.div.style.cursor=f,y(this,ie,tm).call(this,a,c,u,h)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},tm=function(e,t,s,i){const r=this.x,o=this.y,a=this.width,c=this.height;r===e&&o===t&&a===s&&c===i||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=r,this.y=o;const[u,h]=this.parentDimensions;this.setDims(u*a,h*c),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=i,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*s,h*i),this.fixAndSetPosition()},mustExec:!0})},nm=function(e,t){const[s,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,u=ve.MIN_SIZE/s,h=ve.MIN_SIZE/i,d=j=>Math.round(j*1e4)/1e4,f=y(this,ie,em).call(this,this.rotation),p=(j,R)=>[f[0]*j+f[2]*R,f[1]*j+f[3]*R],m=y(this,ie,em).call(this,360-this.rotation),A=(j,R)=>[m[0]*j+m[2]*R,m[1]*j+m[3]*R];let E,g,w=!1,S=!1;switch(e){case"topLeft":w=!0,E=(j,R)=>[0,0],g=(j,R)=>[j,R];break;case"topMiddle":E=(j,R)=>[j/2,0],g=(j,R)=>[j/2,R];break;case"topRight":w=!0,E=(j,R)=>[j,0],g=(j,R)=>[0,R];break;case"middleRight":S=!0,E=(j,R)=>[j,R/2],g=(j,R)=>[0,R/2];break;case"bottomRight":w=!0,E=(j,R)=>[j,R],g=(j,R)=>[0,0];break;case"bottomMiddle":E=(j,R)=>[j/2,R],g=(j,R)=>[j/2,0];break;case"bottomLeft":w=!0,E=(j,R)=>[0,R],g=(j,R)=>[j,0];break;case"middleLeft":S=!0,E=(j,R)=>[0,R/2],g=(j,R)=>[j,R/2];break}const b=E(a,c),x=g(a,c);let C=p(...x);const k=d(r+C[0]),P=d(o+C[1]);let M=1,I=1,[D,Y]=this.screenToPageTranslation(t.movementX,t.movementY);if([D,Y]=A(D/s,Y/i),w){const j=Math.hypot(a,c);M=I=Math.max(Math.min(Math.hypot(x[0]-b[0]-D,x[1]-b[1]-Y)/j,1/a,1/c),u/a,h/c)}else S?M=Math.max(u,Math.min(1,Math.abs(x[0]-b[0]-D)))/a:I=Math.max(h,Math.min(1,Math.abs(x[1]-b[1]-Y)))/c;const X=d(a*M),W=d(c*I);C=p(...g(X,W));const K=k-C[0],q=P-C[1];this.width=X,this.height=W,this.x=K,this.y=q,this.setDims(s*X,i*W),this.fixAndSetPosition()},sm=function(e){const{isMac:t}=Xt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},j_=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const s=new AbortController,i=this._uiManager.combinedSignal(s);if(t){this.div.classList.add("moving"),v(this,Ja,e.clientX),v(this,el,e.clientY);const o=a=>{const{clientX:c,clientY:u}=a,[h,d]=this.screenToPageTranslation(c-l(this,Ja),u-l(this,el));v(this,Ja,c),v(this,el,u),this._uiManager.dragSelectedEditors(h,d)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:i})}const r=()=>{s.abort(),t&&this.div.classList.remove("moving"),v(this,ro,!1),this._uiManager.endDragSession()||y(this,ie,sm).call(this,e)};window.addEventListener("pointerup",r,{signal:i}),window.addEventListener("blur",r,{signal:i})},im=function(){if(l(this,qi)||!this.div)return;v(this,qi,new AbortController);const e=this._uiManager.combinedSignal(l(this,qi));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},z_=function(e){ve._resizerKeyboardManager.exec(this,e)},H_=function(e){var t;l(this,Ks)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,_t)&&y(this,ie,gc).call(this)},B_=function(e){v(this,wu,l(this,Ks)?e:"")},rm=function(e){if(l(this,Jn))for(const t of l(this,Jn))t.tabIndex=e},gc=function(){if(v(this,Ks,!1),y(this,ie,rm).call(this,-1),l(this,io)){const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=l(this,io);y(this,ie,tm).call(this,e,t,s,i),v(this,io,null)}},_(ve,Su),Q(ve,"_l10n",null),Q(ve,"_l10nResizer",null),Q(ve,"_borderLineWidth",-1),Q(ve,"_colorManager",new Wg),Q(ve,"_zIndex",1),Q(ve,"_telemetryTimeout",1e3);let Ae=ve;class N1 extends Ae{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const T0=3285377520,Pn=4294901760,gs=65535;class U_{constructor(e){this.h1=e?e&4294967295:T0,this.h2=e?e&4294967295:T0}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let A=0,E=e.length;A<E;A++){const g=e.charCodeAt(A);g<=255?t[s++]=g:(t[s++]=g>>>8,t[s++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&gs,m=f&gs;for(let A=0;A<i;A++)A&1?(a=o[A],a=a*d&Pn|a*p&gs,a=a<<15|a>>>17,a=a*f&Pn|a*m&gs,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[A],c=c*d&Pn|c*p&gs,c=c<<15|c>>>17,c=c*f&Pn|c*m&gs,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*d&Pn|a*p&gs,a=a<<15|a>>>17,a=a*f&Pn|a*m&gs,i&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Pn|e*36045&gs,t=t*4283543511&Pn|((t<<16|e>>>16)*2950163797&Pn)>>>16,e^=t>>>1,e=e*444984403&Pn|e*60499&gs,t=t*3301882366&Pn|((t<<16|e>>>16)*3120437893&Pn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const om=Object.freeze({map:null,hash:"",transfer:void 0});var ao,lo,mt,Ef,V_;class sy{constructor(){_(this,Ef);_(this,ao,!1);_(this,lo,null);_(this,mt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=l(this,mt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return l(this,mt).get(e)}remove(e){if(l(this,mt).delete(e),l(this,mt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,mt).values())if(t instanceof Ae)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=l(this,mt).get(e);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(t))s[r]!==o&&(i=!0,s[r]=o);else i=!0,l(this,mt).set(e,t);i&&y(this,Ef,V_).call(this),t instanceof Ae&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,mt).has(e)}getAll(){return l(this,mt).size>0?Qv(l(this,mt)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return l(this,mt).size}resetModified(){l(this,ao)&&(v(this,ao,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $_(this)}get serializable(){if(l(this,mt).size===0)return om;const e=new Map,t=new U_,s=[],i=Object.create(null);let r=!1;for(const[o,a]of l(this,mt)){const c=a instanceof Ae?a.serialize(!1,i):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:om}get editorStats(){let e=null;const t=new Map;for(const s of l(this,mt).values()){if(!(s instanceof Ae))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,c]of Object.entries(i)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){v(this,lo,null)}get modifiedIds(){if(l(this,lo))return l(this,lo);const e=[];for(const t of l(this,mt).values())!(t instanceof Ae)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return v(this,lo,{ids:new Set(e),hash:e.join(",")})}}ao=new WeakMap,lo=new WeakMap,mt=new WeakMap,Ef=new WeakSet,V_=function(){l(this,ao)||(v(this,ao,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var bu;class $_ extends sy{constructor(t){super();_(this,bu);const{map:s,hash:i,transfer:r}=t.serializable,o=structuredClone(s,r?{transfer:r}:null);v(this,bu,{map:o,hash:i,transfer:r})}get print(){Re("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,bu)}get modifiedIds(){return he(this,"modifiedIds",{ids:new Set,hash:""})}}bu=new WeakMap;var tl;class O1{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){_(this,tl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,tl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,tl).has(e.loadedName))){if(at(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=e,o=new FontFace(s,i,r);this.addNativeFontFace(o);try{await o.load(),l(this,tl).add(s),t==null||t(e)}catch{oe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Re("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw oe(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return he(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ot||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),he(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(at(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return he(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(b,x){return b.charCodeAt(x)<<24|b.charCodeAt(x+1)<<16|b.charCodeAt(x+2)<<8|b.charCodeAt(x+3)&255}function i(b,x,C,k){const P=b.substring(0,x),M=b.substring(x+C);return P+k+M}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function h(b,x){if(++u>30){oe("Load test font never loaded."),x();return}if(c.font="30px "+b,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(h.bind(null,b,x))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,A=1482184792;let E=s(f,m);for(r=0,o=d.length-3;r<o;r+=4)E=E-A+s(d,r)|0;r<d.length&&(E=E-A+s(d+"XXX",r)|0),f=i(f,m,4,_1(E));const g=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(w);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const b of[e.loadedName,d]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=b,S.append(x)}this._document.body.append(S),h(d,()=>{S.remove(),t.complete()})}}tl=new WeakMap;class j1{constructor(e,{disableFontFace:t=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${k1(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let s;try{s=e.get(this.loadedName+"_path_"+t)}catch(r){oe(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[t]=function(r,o){};const i=[];for(let r=0,o=s.length;r<o;)switch(s[r++]){case zs.BEZIER_CURVE_TO:{const[a,c,u,h,d,f]=s.slice(r,r+6);i.push(p=>p.bezierCurveTo(a,c,u,h,d,f)),r+=6}break;case zs.MOVE_TO:{const[a,c]=s.slice(r,r+2);i.push(u=>u.moveTo(a,c)),r+=2}break;case zs.LINE_TO:{const[a,c]=s.slice(r,r+2);i.push(u=>u.lineTo(a,c)),r+=2}break;case zs.QUADRATIC_CURVE_TO:{const[a,c,u,h]=s.slice(r,r+4);i.push(d=>d.quadraticCurveTo(a,c,u,h)),r+=4}break;case zs.RESTORE:i.push(a=>a.restore());break;case zs.SAVE:i.push(a=>a.save());break;case zs.SCALE:at(i.length===2,"Scale command is only valid at the third position.");break;case zs.TRANSFORM:{const[a,c,u,h,d,f]=s.slice(r,r+6);i.push(p=>p.transform(a,c,u,h,d,f)),r+=6}break;case zs.TRANSLATE:{const[a,c]=s.slice(r,r+2);i.push(u=>u.translate(a,c)),r+=2}break}return this.compiledGlyphs[t]=function(o,a){i[0](o),i[1](o),o.scale(a,-a);for(let c=2,u=i.length;c<u;c++)i[c](o)}}}var Eu;class W_{constructor({enableHWA:e=!1}){_(this,Eu,!1);v(this,Eu,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,Eu)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Re("Abstract method `_createCanvas` called.")}}Eu=new WeakMap;class z1 extends W_{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class G_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Re("Abstract method `_fetch` called.")}}class X_ extends G_{async _fetch(e){const t=await np(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):tp(t)}}class q_{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var co,uo,Cs,Qs,Mt,xf,ho,z,Rt,ha,da,wd,fa,Y_,am,pa,mc,vc,lm,yc;class H1 extends q_{constructor({docId:t,ownerDocument:s=globalThis.document}){super();_(this,z);_(this,co);_(this,uo);_(this,Cs);_(this,Qs);_(this,Mt);_(this,xf);_(this,ho,0);v(this,Qs,t),v(this,Mt,s)}addFilter(t){if(!t)return"none";let s=l(this,z,Rt).get(t);if(s)return s;const[i,r,o]=y(this,z,wd).call(this,t),a=t.length===1?i:`${i}${r}${o}`;if(s=l(this,z,Rt).get(a),s)return l(this,z,Rt).set(t,s),s;const c=`g_${l(this,Qs)}_transfer_map_${Bt(this,ho)._++}`,u=y(this,z,fa).call(this,c);l(this,z,Rt).set(t,u),l(this,z,Rt).set(a,u);const h=y(this,z,pa).call(this,c);return y(this,z,vc).call(this,i,r,o,h),u}addHCMFilter(t,s){var m;const i=`${t}-${s}`,r="base";let o=l(this,z,ha).get(r);if((o==null?void 0:o.key)===i||(o?((m=o.filter)==null||m.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},l(this,z,ha).set(r,o)),!t||!s))return o.url;const a=y(this,z,yc).call(this,t);t=V.makeHexColor(...a);const c=y(this,z,yc).call(this,s);if(s=V.makeHexColor(...c),l(this,z,da).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let A=0;A<=255;A++){const E=A/255;u[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,Qs)}_hcm_filter`,f=o.filter=y(this,z,pa).call(this,d);y(this,z,vc).call(this,h,h,h,f),y(this,z,am).call(this,f);const p=(A,E)=>{const g=a[A]/255,w=c[A]/255,S=new Array(E+1);for(let b=0;b<=E;b++)S[b]=g+b/E*(w-g);return S.join(",")};return y(this,z,vc).call(this,p(0,5),p(1,5),p(2,5),f),o.url=y(this,z,fa).call(this,d),o.url}addAlphaFilter(t){let s=l(this,z,Rt).get(t);if(s)return s;const[i]=y(this,z,wd).call(this,[t]),r=`alpha_${i}`;if(s=l(this,z,Rt).get(r),s)return l(this,z,Rt).set(t,s),s;const o=`g_${l(this,Qs)}_alpha_map_${Bt(this,ho)._++}`,a=y(this,z,fa).call(this,o);l(this,z,Rt).set(t,a),l(this,z,Rt).set(r,a);const c=y(this,z,pa).call(this,o);return y(this,z,lm).call(this,i,c),a}addLuminosityFilter(t){let s=l(this,z,Rt).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=y(this,z,wd).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=l(this,z,Rt).get(r),s)return l(this,z,Rt).set(t,s),s;const o=`g_${l(this,Qs)}_luminosity_map_${Bt(this,ho)._++}`,a=y(this,z,fa).call(this,o);l(this,z,Rt).set(t,a),l(this,z,Rt).set(r,a);const c=y(this,z,pa).call(this,o);return y(this,z,Y_).call(this,c),t&&y(this,z,lm).call(this,i,c),a}addHighlightHCMFilter(t,s,i,r,o){var w;const a=`${s}-${i}-${r}-${o}`;let c=l(this,z,ha).get(t);if((c==null?void 0:c.key)===a||(c?((w=c.filter)==null||w.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,z,ha).set(t,c)),!s||!i))return c.url;const[u,h]=[s,i].map(y(this,z,yc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(y(this,z,yc).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,z,da).style.color="";const A=(S,b,x)=>{const C=new Array(256),k=(f-d)/x,P=S/255,M=(b-S)/(255*x);let I=0;for(let D=0;D<=x;D++){const Y=Math.round(d+D*k),X=P+D*M;for(let W=I;W<=Y;W++)C[W]=X;I=Y+1}for(let D=I;D<256;D++)C[D]=C[I-1];return C.join(",")},E=`g_${l(this,Qs)}_hcm_${t}_filter`,g=c.filter=y(this,z,pa).call(this,E);return y(this,z,am).call(this,g),y(this,z,vc).call(this,A(p[0],m[0],5),A(p[1],m[1],5),A(p[2],m[2],5),g),c.url=y(this,z,fa).call(this,E),c.url}destroy(t=!1){t&&l(this,z,ha).size!==0||(l(this,Cs)&&(l(this,Cs).parentNode.parentNode.remove(),v(this,Cs,null)),l(this,uo)&&(l(this,uo).clear(),v(this,uo,null)),v(this,ho,0))}}co=new WeakMap,uo=new WeakMap,Cs=new WeakMap,Qs=new WeakMap,Mt=new WeakMap,xf=new WeakMap,ho=new WeakMap,z=new WeakSet,Rt=function(){return l(this,uo)||v(this,uo,new Map)},ha=function(){return l(this,xf)||v(this,xf,new Map)},da=function(){if(!l(this,Cs)){const t=l(this,Mt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=l(this,Mt).createElementNS(Bs,"svg");i.setAttribute("width",0),i.setAttribute("height",0),v(this,Cs,l(this,Mt).createElementNS(Bs,"defs")),t.append(i),i.append(l(this,Cs)),l(this,Mt).body.append(t)}return l(this,Cs)},wd=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,a[u]=i[u]/255,c[u]=r[u]/255;return[o.join(","),a.join(","),c.join(",")]},fa=function(t){if(l(this,co)===void 0){v(this,co,"");const s=l(this,Mt).URL;s!==l(this,Mt).baseURI&&(sp(s)?oe('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,co,s.split("#",1)[0]))}return`url(${l(this,co)}#${t})`},Y_=function(t){const s=l(this,Mt).createElementNS(Bs,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},am=function(t){const s=l(this,Mt).createElementNS(Bs,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},pa=function(t){const s=l(this,Mt).createElementNS(Bs,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),l(this,z,da).append(s),s},mc=function(t,s,i){const r=l(this,Mt).createElementNS(Bs,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},vc=function(t,s,i,r){const o=l(this,Mt).createElementNS(Bs,"feComponentTransfer");r.append(o),y(this,z,mc).call(this,o,"feFuncR",t),y(this,z,mc).call(this,o,"feFuncG",s),y(this,z,mc).call(this,o,"feFuncB",i)},lm=function(t,s){const i=l(this,Mt).createElementNS(Bs,"feComponentTransfer");s.append(i),y(this,z,mc).call(this,i,"feFuncA",t)},yc=function(t){return l(this,z,da).style.color=t,ny(getComputedStyle(l(this,z,da)).getPropertyValue("color"))};class K_{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Re("Abstract method `_fetch` called.")}}class Q_ extends K_{async _fetch(e){const t=await np(e,"arraybuffer");return new Uint8Array(t)}}if(Ot){var cm=Promise.withResolvers(),jc=null;(async()=>{const e=await qh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await qh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await qh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await qh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,o;return new Map(Object.entries({fs:e,http:t,https:s,url:i,canvas:r,path2d:o}))})().then(e=>{jc=e,cm.resolve()},e=>{oe(`loadPackages: ${e}`),jc=new Map,cm.resolve()})}class xr{static get promise(){return cm.promise}static get(e){return jc==null?void 0:jc.get(e)}}async function Z_(n){const t=await xr.get("fs").promises.readFile(n);return new Uint8Array(t)}class B1 extends q_{}class U1 extends W_{_createCanvas(e,t){return xr.get("canvas").createCanvas(e,t)}}class V1 extends G_{async _fetch(e){return Z_(e)}}class $1 extends K_{async _fetch(e){return Z_(e)}}const Wt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function um(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class iy{getPattern(){Re("Abstract method `getPattern` called.")}}class W1 extends iy{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===Wt.STROKE||i===Wt.FILL){const o=t.current.getClippedPathBoundingBox(i,je(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=V.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),um(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else um(e,this._bbox),r=this._createGradient(e);return r}}function Bp(n,e,t,s,i,r,o,a){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=o,o=a,a=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,A=(c[s]+e.offsetX)*e.scaleX,E=(c[s+1]+e.offsetY)*e.scaleY,g=(c[i]+e.offsetX)*e.scaleX,w=(c[i+1]+e.offsetY)*e.scaleY;if(m>=w)return;const S=u[r],b=u[r+1],x=u[r+2],C=u[o],k=u[o+1],P=u[o+2],M=u[a],I=u[a+1],D=u[a+2],Y=Math.round(m),X=Math.round(w);let W,K,q,j,R,U,$,ne;for(let J=Y;J<=X;J++){if(J<E){const re=J<m?0:(m-J)/(m-E);W=p-(p-A)*re,K=S-(S-C)*re,q=b-(b-k)*re,j=x-(x-P)*re}else{let re;J>w?re=1:E===w?re=0:re=(E-J)/(E-w),W=A-(A-g)*re,K=C-(C-M)*re,q=k-(k-I)*re,j=P-(P-D)*re}let ce;J<m?ce=0:J>w?ce=1:ce=(m-J)/(m-w),R=p-(p-g)*ce,U=S-(S-M)*ce,$=b-(b-I)*ce,ne=x-(x-D)*ce;const Me=Math.round(Math.min(W,R)),tt=Math.round(Math.max(W,R));let de=d*J+Me*4;for(let re=Me;re<=tt;re++)ce=(W-re)/(W-R),ce<0?ce=0:ce>1&&(ce=1),h[de++]=K-(K-U)*ce|0,h[de++]=q-(q-$)*ce|0,h[de++]=j-(j-ne)*ce|0,h[de++]=255}}function G1(n,e,t){const s=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(s.length/a)-1,u=a-1;for(r=0;r<c;r++){let h=r*a;for(let d=0;d<u;d++,h++)Bp(n,t,s[h],s[h+1],s[h+a],i[h],i[h+1],i[h+a]),Bp(n,t,s[h+a+1],s[h+1],s[h+a],i[h+a+1],i[h+1],i[h+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)Bp(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class X1 extends iy{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,m=h/f,A={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/m},E=d+2*2,g=f+2*2,w=s.getCanvas("mesh",E,g),S=w.context,b=S.createImageData(d,f);if(t){const C=b.data;for(let k=0,P=C.length;k<P;k+=4)C[k]=t[0],C[k+1]=t[1],C[k+2]=t[2],C[k+3]=255}for(const C of this._figures)G1(b,C,A);return S.putImageData(b,2,2),{canvas:w.canvas,offsetX:a-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(e,t,s,i){um(e,this._bbox);let r;if(i===Wt.SHADING)r=V.singularValueDecompose2dScale(je(e));else if(r=V.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=V.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,i===Wt.SHADING?null:this._background,t.cachedCanvases);return i!==Wt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class q1 extends iy{getPattern(){return"hotpink"}}function Y1(n){switch(n[0]){case"RadialAxial":return new W1(n);case"Mesh":return new X1(n);case"Dummy":return new q1}throw new Error(`Unknown IR type: ${n[0]}`)}const P0={COLORED:1,UNCOLORED:2},Cf=class Cf{constructor(e,t,s,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Jf("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],m=f-h,A=p-d,E=V.singularValueDecompose2dScale(this.matrix),g=V.singularValueDecompose2dScale(this.baseTransform),w=E[0]*g[0],S=E[1]*g[1];let b=m,x=A,C=!1,k=!1;const P=Math.ceil(c*w),M=Math.ceil(u*S),I=Math.ceil(m*w),D=Math.ceil(A*S);P>=I?b=c:C=!0,M>=D?x=u:k=!0;const Y=this.getSizeAndScale(b,this.ctx.canvas.width,w),X=this.getSizeAndScale(x,this.ctx.canvas.height,S),W=e.cachedCanvases.getCanvas("pattern",Y.size,X.size),K=W.context,q=a.createCanvasGraphics(K);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,i,o),K.translate(-Y.scale*h,-X.scale*d),q.transform(Y.scale,0,0,X.scale,0,0),K.save(),this.clipBbox(q,h,d,f,p),q.baseTransform=je(q.ctx),q.executeOperatorList(s),q.endDrawing(),K.restore(),C||k){const j=W.canvas;C&&(b=c),k&&(x=u);const R=this.getSizeAndScale(b,this.ctx.canvas.width,w),U=this.getSizeAndScale(x,this.ctx.canvas.height,S),$=R.size,ne=U.size,J=e.cachedCanvases.getCanvas("pattern-workaround",$,ne),ce=J.context,Me=C?Math.floor(m/c):0,tt=k?Math.floor(A/u):0;for(let de=0;de<=Me;de++)for(let re=0;re<=tt;re++)ce.drawImage(j,$*de,ne*re,$,ne,0,0,$,ne);return{canvas:J.canvas,scaleX:R.scale,scaleY:U.scale,offsetX:h,offsetY:d}}return{canvas:W.canvas,scaleX:Y.scale,scaleY:X.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,s){const i=Math.max(Cf.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const o=i-t,a=r-s;e.ctx.rect(t,s,o,a),e.current.updateRectMinMax(je(e.ctx),[t,s,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case P0.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case P0.UNCOLORED:const a=V.makeHexColor(s[0],s[1],s[2]);i.fillStyle=a,i.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new A1(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,i){let r=s;i!==Wt.SHADING&&(r=V.transform(r,t.baseTransform),this.matrix&&(r=V.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};Q(Cf,"MAX_PATTERN_SIZE",3e3);let hm=Cf;function K1({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Xt.isLittleEndian?4278190080:255,[c,u]=o?[r,a]:[a,r],h=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<i;m++){for(const E=e+h;e<E;e++){const g=e<f?n[e]:255;t[p++]=g&128?u:c,t[p++]=g&64?u:c,t[p++]=g&32?u:c,t[p++]=g&16?u:c,t[p++]=g&8?u:c,t[p++]=g&4?u:c,t[p++]=g&2?u:c,t[p++]=g&1?u:c}if(d===0)continue;const A=e<f?n[e++]:255;for(let E=0;E<d;E++)t[p++]=A&1<<7-E?u:c}return{srcPos:e,destPos:p}}const R0=16,L0=100,Q1=15,M0=10,I0=1e3,sn=16;function Z1(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(s,i){e.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){e.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,o,a,c){e.transform(s,i,r,o,a,c),this.__originalTransform(s,i,r,o,a,c)},n.setTransform=function(s,i,r,o,a,c){e.setTransform(s,i,r,o,a,c),this.__originalSetTransform(s,i,r,o,a,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){e.rotate(s),this.__originalRotate(s)},n.clip=function(s){e.clip(s),this.__originalClip(s)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,o,a){e.bezierCurveTo(t,s,i,r,o,a),this.__originalBezierCurveTo(t,s,i,r,o,a)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class J1{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Yh(n,e,t,s,i,r,o,a,c,u){const[h,d,f,p,m,A]=je(n);if(d===0&&f===0){const w=o*h+m,S=Math.round(w),b=a*p+A,x=Math.round(b),C=(o+c)*h+m,k=Math.abs(Math.round(C)-S)||1,P=(a+u)*p+A,M=Math.abs(Math.round(P)-x)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),S,x),n.drawImage(e,t,s,i,r,0,0,k,M),n.setTransform(h,d,f,p,m,A),[k,M]}if(h===0&&p===0){const w=a*f+m,S=Math.round(w),b=o*d+A,x=Math.round(b),C=(a+u)*f+m,k=Math.abs(Math.round(C)-S)||1,P=(o+c)*d+A,M=Math.abs(Math.round(P)-x)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,S,x),n.drawImage(e,t,s,i,r,0,0,M,k),n.setTransform(h,d,f,p,m,A),[M,k]}n.drawImage(e,t,s,i,r,o,a,c,u);const E=Math.hypot(h,d),g=Math.hypot(f,p);return[E*c,g*u]}function eC(n){const{width:e,height:t}=n;if(e>I0||t>I0)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),a,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const g of n.data){let w=128;for(;w>0;)d[f++]=g&w?0:255,w>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),a=1;a<t;a++){f=a*h,u=a*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let g=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)g=(g>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[g]&&(o[u+c]=i[g],++p),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++p),p>s)return null}for(f=h*(t-1),u=a*r,d[f]!==0&&(o[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+c]=4,++p),p>s)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),A=new Path2D;for(a=0;p&&a<=t;a++){let g=a*r;const w=g+e;for(;g<w&&!o[g];)g++;if(g===w)continue;A.moveTo(g%r,a);const S=g;let b=o[g];do{const x=m[b];do g+=x;while(!o[g]);const C=o[g];C!==5&&C!==10?(b=C,o[g]=0):(b=C&51*b>>4,o[g]&=b>>2|b<<2),A.lineTo(g%r,g/r|0),o[g]||--p}while(S!==g);--a}return d=null,o=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(A),g.beginPath(),g.restore()}}class F0{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=g_,this.textMatrixScale=1,this.fontMatrix=Og,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Pt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=V.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=V.applyTransform(t,e),i=V.applyTransform(t.slice(2),e),r=V.applyTransform([t[0],t[3]],e),o=V.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],o[1])}updateScalingPathMinMax(e,t){V.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,i,r,o,a,c,u,h){const d=V.bezierBoundingBox(t,s,i,r,o,a,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Wt.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===Wt.STROKE){t||Re("Stroke bounding box must include transform.");const i=V.singularValueDecompose2dScale(t),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const e=V.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Wt.FILL,t=null){return V.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function D0(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%sn,r=(t-i)/sn,o=i===0?r:r+1,a=n.createImageData(s,sn);let c=0,u;const h=e.data,d=a.data;let f,p,m,A;if(e.kind===dd.GRAYSCALE_1BPP){const E=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),w=g.length,S=s+7>>3,b=4294967295,x=Xt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?sn:i,u=0,p=0;p<m;p++){const C=E-c;let k=0;const P=C>S?s:C*8-7,M=P&-8;let I=0,D=0;for(;k<M;k+=8)D=h[c++],g[u++]=D&128?b:x,g[u++]=D&64?b:x,g[u++]=D&32?b:x,g[u++]=D&16?b:x,g[u++]=D&8?b:x,g[u++]=D&4?b:x,g[u++]=D&2?b:x,g[u++]=D&1?b:x;for(;k<P;k++)I===0&&(D=h[c++],I=128),g[u++]=D&I?b:x,I>>=1}for(;u<w;)g[u++]=0;n.putImageData(a,0,f*sn)}}else if(e.kind===dd.RGBA_32BPP){for(p=0,A=s*sn*4,f=0;f<r;f++)d.set(h.subarray(c,c+A)),c+=A,n.putImageData(a,0,p),p+=sn;f<o&&(A=s*i*4,d.set(h.subarray(c,c+A)),n.putImageData(a,0,p))}else if(e.kind===dd.RGB_24BPP)for(m=sn,A=s*m,f=0;f<o;f++){for(f>=r&&(m=i,A=s*m),u=0,p=A;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(a,0,f*sn)}else throw new Error(`bad image kind: ${e.kind}`)}function N0(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%sn,r=(t-i)/sn,o=i===0?r:r+1,a=n.createImageData(s,sn);let c=0;const u=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?sn:i;({srcPos:c}=K1({src:u,srcPos:c,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,d*sn)}}function oc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Kh(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Ot){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function O0(n,e){if(e)return!0;const t=V.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Er.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const tC=["butt","round","square"],nC=["miter","round","bevel"],sC={},j0={};var kr,dm,fm;const dy=class dy{constructor(e,t,s,i,r,{optionalContentConfig:o,markedContentStack:a=null},c,u){_(this,kr);this.ctx=e,this.current=new F0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new J1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...je(this.compositeCtx))}this.ctx.save(),Kh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=je(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,o=e.fnArray;let a=t||0;const c=r.length;if(c===a)return a;const u=c-a>M0&&typeof s=="function",h=u?Date.now()+Q1:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,s),a;if(m=o[a],m!==qn.dependency)this[m].apply(this,r[a]);else for(const A of r[a]){const E=A.startsWith("g_")?f:p;if(!E.has(A))return E.get(A,s),a}if(a++,a===c)return a;if(u&&++d>M0){if(Date.now()>h)return s(),a;d=0}}}endDrawing(){y(this,kr,dm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),y(this,kr,fm).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,c=i,u="prescale1",h,d;for(;r>2&&a>1||o>2&&c>1;){let f=a,p=c;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,a,c,0,0,f,p),e=h.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,o=this.current.patternFill,a=je(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const P=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(P),c||(c=new Map,this._cachedBitmapsMap.set(P,c));const M=c.get(u);if(M&&!o){const I=Math.round(Math.min(a[0],a[2])+a[4]),D=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:I,offsetY:D}}h=M}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),N0(d.context,e));let f=V.transform(a,[1/s,0,0,-1/i,0,0]);f=V.transform(f,[1,0,0,1,0,-i]);const[p,m,A,E]=V.getAxialAlignedBoundingBox([0,0,s,i],f),g=Math.round(A-p)||1,w=Math.round(E-m)||1,S=this.cachedCanvases.getCanvas("fillCanvas",g,w),b=S.context,x=p,C=m;b.translate(-x,-C),b.transform(...f),h||(h=this._scaleImage(d.canvas,Hs(b)),h=h.img,c&&o&&c.set(u,h)),b.imageSmoothingEnabled=O0(je(b),e.interpolate),Yh(b,h,0,0,h.width,h.height,0,0,s,i),b.globalCompositeOperation="source-in";const k=V.transform(Hs(b),[1,0,0,1,-x,-C]);return b.fillStyle=o?r.getPattern(t,this,k,Wt.FILL):r,b.fillRect(0,0,s,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,S.canvas)),{canvas:S.canvas,offsetX:Math.round(x),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=tC[e]}setLineJoin(e){this.ctx.lineJoin=nC[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...je(this.suspendedCtx)),oc(this.suspendedCtx,r),Z1(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),oc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],o=i[1],a=i[2]-r,c=i[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,s,a,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,o,a,c,u,h,d){let f=e.canvas,p=c-h,m=u-d;if(o){const E=V.makeHexColor(...o);if(p<0||m<0||p+s>f.width||m+i>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",s,i),w=g.context;w.drawImage(f,-p,-m),w.globalCompositeOperation="destination-atop",w.fillStyle=E,w.fillRect(0,0,s,i),w.globalCompositeOperation="source-over",f=g.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,m,s,i),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(p,m,s,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const A=new Path2D;A.rect(c,u,s,i),t.clip(A),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,s,i,c,u,s,i),t.restore()}save(){this.inSMaskMode?(oc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),oc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,i,r,o){this.ctx.transform(e,t,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const i=this.ctx,r=this.current;let o=r.x,a=r.y,c,u;const h=je(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?s.slice(0):null;for(let p=0,m=0,A=e.length;p<A;p++)switch(e[p]|0){case qn.rectangle:o=t[m++],a=t[m++];const E=t[m++],g=t[m++],w=o+E,S=a+g;i.moveTo(o,a),E===0||g===0?i.lineTo(w,S):(i.lineTo(w,a),i.lineTo(w,S),i.lineTo(o,S)),d||r.updateRectMinMax(h,[o,a,w,S]),i.closePath();break;case qn.moveTo:o=t[m++],a=t[m++],i.moveTo(o,a),d||r.updatePathMinMax(h,o,a);break;case qn.lineTo:o=t[m++],a=t[m++],i.lineTo(o,a),d||r.updatePathMinMax(h,o,a);break;case qn.curveTo:c=o,u=a,o=t[m+4],a=t[m+5],i.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],t[m+2],t[m+3],o,a,f),m+=6;break;case qn.curveTo2:c=o,u=a,i.bezierCurveTo(o,a,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,c,u,o,a,t[m],t[m+1],t[m+2],t[m+3],f),o=t[m+2],a=t[m+3],m+=4;break;case qn.curveTo3:c=o,u=a,o=t[m+2],a=t[m+3],i.bezierCurveTo(t[m],t[m+1],o,a,o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],o,a,o,a,f),m+=4;break;case qn.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,Hs(t),Wt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(t.save(),t.fillStyle=s.getPattern(t,this,Hs(t),Wt.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=sC}eoClip(){this.pendingClip=j0}beginText(){this.current.textMatrix=g_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const s of e)t.setTransform(...s.transform),t.translate(s.x,s.y),s.addToPath(t,s.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||Og,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&oe("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((h=s.systemFontInfo)==null?void 0:h.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const c=s.italic?"italic":"normal";let u=t;t<R0?u=R0:t>L0&&(u=L0),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,i,r,o){this.current.textMatrix=[e,t,s,i,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i){const r=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&Pt.FILL_STROKE_MASK,d=!!(c&Pt.ADD_TO_PATH_FLAG),f=o.patternFill&&!a.missingFile;let p;(a.disableFontFace||d||f)&&(p=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||f?(r.save(),r.translate(t,s),r.beginPath(),p(r,u),i&&r.setTransform(...i),(h===Pt.FILL||h===Pt.FILL_STROKE)&&r.fill(),(h===Pt.STROKE||h===Pt.FILL_STROKE)&&r.stroke(),r.restore()):((h===Pt.FILL||h===Pt.FILL_STROKE)&&r.fillText(e,t,s),(h===Pt.STROKE||h===Pt.FILL_STROKE)&&r.strokeText(e,t,s)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:je(r),x:t,y:s,fontSize:u,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return he(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=s.vertical,p=f?1:-1,m=s.defaultVMetrics,A=i*t.fontMatrix[0],E=t.textRenderingMode===Pt.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let g;if(t.patternFill){r.save();const C=t.fillColor.getPattern(r,this,Hs(r),Wt.FILL);g=je(r),r.restore(),r.fillStyle=C}let w=t.lineWidth;const S=t.textMatrixScale;if(S===0||w===0){const C=t.textRenderingMode&Pt.FILL_STROKE_MASK;(C===Pt.STROKE||C===Pt.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=S;if(o!==1&&(r.scale(o,o),w/=o),r.lineWidth=w,s.isInvalidPDFjsFont){const C=[];let k=0;for(const P of e)C.push(P.unicode),k+=P.width;r.fillText(C.join(""),0,0),t.x+=k*A*h,r.restore(),this.compose();return}let b=0,x;for(x=0;x<d;++x){const C=e[x];if(typeof C=="number"){b+=p*C*i/1e3;continue}let k=!1;const P=(C.isSpace?c:0)+a,M=C.fontChar,I=C.accent;let D,Y,X=C.width;if(f){const K=C.vmetric||m,q=-(C.vmetric?K[1]:X*.5)*A,j=K[2]*A;X=K?-K[0]:X,D=q/o,Y=(b+j)/o}else D=b/o,Y=0;if(s.remeasure&&X>0){const K=r.measureText(M).width*1e3/i*o;if(X<K&&this.isFontSubpixelAAEnabled){const q=X/K;k=!0,r.save(),r.scale(q,1),D/=q}else X!==K&&(D+=(X-K)/2e3*i/o)}if(this.contentVisible&&(C.isInFont||s.missingFile)){if(E&&!I)r.fillText(M,D,Y);else if(this.paintChar(M,D,Y,g),I){const K=D+i*I.offset.x/o,q=Y-i*I.offset.y/o;this.paintChar(I.fontChar,K,q,g)}}const W=f?X*A-P*u:X*A+P*u;b+=W,k&&r.restore()}f?t.y-=b:t.x+=b*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,a=i.vertical?1:-1,c=s.charSpacing,u=s.wordSpacing,h=s.textHScale*o,d=s.fontMatrix||Og,f=e.length,p=s.textRenderingMode===Pt.INVISIBLE;let m,A,E,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(h,o),m=0;m<f;++m){if(A=e[m],typeof A=="number"){g=a*A*r/1e3,this.ctx.translate(g,0),s.x+=g*h;continue}const w=(A.isSpace?u:0)+c,S=i.charProcOperatorList[A.operatorListId];if(!S){oe(`Type3 character "${A.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=A,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(S),this.restore()),E=V.applyTransform([A.width,0],d)[0]*r+w,t.translate(E,0),s.x+=E*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,o){this.ctx.rect(s,i,r-s,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],i=this.baseTransform||je(this.ctx),r={createCanvasGraphics:o=>new dy(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new hm(e,s,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=V.makeHexColor(e,t,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=V.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Y1(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Hs(t),Wt.SHADING);const i=Hs(t);if(i){const{width:r,height:o}=t.canvas,[a,c,u,h]=V.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(a,c,u-a,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Re("Should not call beginInlineImage")}beginImageData(){Re("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=je(this.ctx),t)){const s=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],s,i),this.current.updateRectMinMax(je(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Jf("TODO: Support non-isolated groups."),e.knockout&&oe("Knockout groups not supported.");const s=je(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=V.getAxialAlignedBoundingBox(e.bbox,je(t));const r=[0,0,t.canvas.width,t.canvas.height];i=V.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),u=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-a),f.transform(...s),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),oc(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=je(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=V.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(y(this,kr,dm).call(this),Kh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[c,u]=V.singularValueDecompose2dScale(je(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,a*u),Kh(this.ctx)}else Kh(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new F0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),y(this,kr,fm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=eC(e)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(e),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=je(a);a.transform(t,s,i,r,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=V.transform(c,[t,s,i,r,o[h],o[h+1]]),[p,m]=V.applyTransform([0,0],f);a.drawImage(u.canvas,p,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:o,width:a,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,c),d=h.context;d.save();const f=this.getObject(o,r);N0(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,Hs(t),Wt.FILL):s,d.fillRect(0,0,a,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Yh(t,h.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){oe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){oe("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[t,0,0,s,i[u],i[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;if(this.save(),!Ot){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/t,-1/s);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,s).context;D0(c,e),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,Hs(i));i.imageSmoothingEnabled=O0(je(i),e.interpolate),Yh(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;D0(c,e),i=this.applyTransferMapsToCanvas(c)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),Yh(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===j0?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=je(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let o,a;if(s===0&&i===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=a=1/c;else{const h=c*e;o=a=h<1?1/h:1}else if(e===0)o=1/c,a=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const c=Math.abs(t*r-s*i),u=Math.hypot(t,s),h=Math.hypot(i,r);if(e===0)o=h/c,a=u/c;else{const d=e*c;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=s||1,i===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,r),o.length>0){const a=Math.max(i,r);t.setLineDash(o.map(c=>c/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};kr=new WeakSet,dm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},fm=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ja=dy;for(const n in qn)ja.prototype[n]!==void 0&&(ja.prototype[qn[n]]=ja.prototype[n]);var xu,Cu;class mi{static get workerPort(){return l(this,xu)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");v(this,xu,e)}static get workerSrc(){return l(this,Cu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");v(this,Cu,e)}}xu=new WeakMap,Cu=new WeakMap,_(mi,xu,null),_(mi,Cu,"");const Qh={DATA:1,ERROR:2},Qe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hn(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Re('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new oa(n.message);case"MissingPDFException":return new ra(n.message);case"PasswordException":return new jg(n.message,n.code);case"UnexpectedResponseException":return new ep(n.message,n.status);case"UnknownErrorException":return new zg(n.message,n.details);default:return new zg(n.message,n.toString())}}var nl,Bn,J_,eS,tS,Ad;class wc{constructor(e,t,s){_(this,Bn);_(this,nl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",y(this,Bn,J_).bind(this),{signal:l(this,nl).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:a,stream:Qe.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{at(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Qe.CANCEL,streamId:r,reason:hn(u)}),h.promise}},s)}destroy(){var e;(e=l(this,nl))==null||e.abort(),v(this,nl,null)}}nl=new WeakMap,Bn=new WeakSet,J_=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){y(this,Bn,tS).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Qh.DATA)i.resolve(e.data);else if(e.callback===Qh.ERROR)i.reject(hn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:Qh.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:Qh.ERROR,callbackId:e.callbackId,reason:hn(o)})});return}if(e.streamId){y(this,Bn,eS).call(this,e);return}t(e.data)},eS=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Qe.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Qe.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){at(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Qe.ERROR,streamId:t,reason:hn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(a(e.data,c))}).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Qe.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Qe.START_COMPLETE,streamId:t,reason:hn(u)})})},tS=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Qe.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(hn(e.reason));break;case Qe.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(hn(e.reason));break;case Qe.PULL:if(!a){r.postMessage({sourceName:s,targetName:i,stream:Qe.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(c){var u;c((u=a.onPull)==null?void 0:u.call(a))}).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Qe.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:Qe.PULL_COMPLETE,streamId:t,reason:hn(c)})});break;case Qe.ENQUEUE:if(at(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Qe.CLOSE:if(at(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),y(this,Bn,Ad).call(this,o,t);break;case Qe.ERROR:at(o,"error should have stream controller"),o.controller.error(hn(e.reason)),y(this,Bn,Ad).call(this,o,t);break;case Qe.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(hn(e.reason)),y(this,Bn,Ad).call(this,o,t);break;case Qe.CANCEL:if(!a)break;new Promise(function(c){var u;c((u=a.onCancel)==null?void 0:u.call(a,hn(e.reason)))}).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Qe.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:Qe.CANCEL_COMPLETE,streamId:t,reason:hn(c)})}),a.sinkCapability.reject(hn(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Ad=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var fo,ku;class iC{constructor({parsedData:e,rawData:t}){_(this,fo);_(this,ku);v(this,fo,e),v(this,ku,t)}getRaw(){return l(this,ku)}get(e){return l(this,fo).get(e)??null}getAll(){return Qv(l(this,fo))}has(e){return l(this,fo).has(e)}}fo=new WeakMap,ku=new WeakMap;const ga=Symbol("INTERNAL");var Tu,Pu,Ru,sl;class rC{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){_(this,Tu,!1);_(this,Pu,!1);_(this,Ru,!1);_(this,sl,!0);v(this,Tu,!!(e&An.DISPLAY)),v(this,Pu,!!(e&An.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(l(this,Ru))return l(this,sl);if(!l(this,sl))return!1;const{print:e,view:t}=this.usage;return l(this,Tu)?(t==null?void 0:t.viewState)!=="OFF":l(this,Pu)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==ga&&Re("Internal method `_setVisible` called."),v(this,Ru,s),v(this,sl,t)}}Tu=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,sl=new WeakMap;var Ki,we,il,rl,Lu,pm;class oC{constructor(e,t=An.DISPLAY){_(this,Lu);_(this,Ki,null);_(this,we,new Map);_(this,il,null);_(this,rl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,v(this,rl,e.order);for(const s of e.groups)l(this,we).set(s.id,new rC(t,s));if(e.baseState==="OFF")for(const s of l(this,we).values())s._setVisible(ga,!1);for(const s of e.on)l(this,we).get(s)._setVisible(ga,!0);for(const s of e.off)l(this,we).get(s)._setVisible(ga,!1);v(this,il,this.getHash())}}isVisible(e){if(l(this,we).size===0)return!0;if(!e)return Jf("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,we).has(e.id)?l(this,we).get(e.id).visible:(oe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return y(this,Lu,pm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,we).has(t))return oe(`Optional content group not found: ${t}`),!0;if(l(this,we).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,we).has(t))return oe(`Optional content group not found: ${t}`),!0;if(!l(this,we).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,we).has(t))return oe(`Optional content group not found: ${t}`),!0;if(!l(this,we).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,we).has(t))return oe(`Optional content group not found: ${t}`),!0;if(l(this,we).get(t).visible)return!1}return!0}return oe(`Unknown optional content policy ${e.policy}.`),!0}return oe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=l(this,we).get(e);if(!i){oe(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((r=l(this,we).get(a))==null||r._setVisible(ga,!1,!0));i._setVisible(ga,!!t,!0),v(this,Ki,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=l(this,we).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}v(this,Ki,null)}get hasInitialVisibility(){return l(this,il)===null||this.getHash()===l(this,il)}getOrder(){return l(this,we).size?l(this,rl)?l(this,rl).slice():[...l(this,we).keys()]:null}getGroups(){return l(this,we).size>0?Qv(l(this,we)):null}getGroup(e){return l(this,we).get(e)||null}getHash(){if(l(this,Ki)!==null)return l(this,Ki);const e=new U_;for(const[t,s]of l(this,we))e.update(`${t}:${s.visible}`);return v(this,Ki,e.hexdigest())}}Ki=new WeakMap,we=new WeakMap,il=new WeakMap,rl=new WeakMap,Lu=new WeakSet,pm=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=y(this,Lu,pm).call(this,r);else if(l(this,we).has(r))o=l(this,we).get(r).visible;else return oe(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class aC{constructor(e,{disableRange:t=!1,disableStream:s=!1}){at(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});at(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){at(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new lC(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new cC(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class lC{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=ey(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cC{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uC(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(n),t){const h=u(t);return r(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=a(t);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=tp(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,A,E,g]=f;if(A=parseInt(A,10),A in d){if(A===0)break;continue}d[A]=[E,g]}const m=[];for(let A=0;A<d.length&&A in d;++A){let[E,g]=d[A];g=a(g),E&&(g=unescape(g),A===0&&(g=c(g))),m.push(g)}return m.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,E){return String.fromCharCode(parseInt(E,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function ry(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function oy({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function ay(n){const e=n.get("Content-Disposition");if(e){let t=uC(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ey(t))return t}return null}function ip(n,e){return n===404||n===0&&e.startsWith("file:")?new ra('Missing PDF "'+e+'".'):new ep(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function nS(n){return n===200||n===206}function sS(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function iS(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(oe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class z0{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ry(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return at(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new dC(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class hC{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,sS(s,this._withCredentials,this._abortController)).then(r=>{if(!nS(r.status))throw ip(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=oy({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=ay(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new oa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:iS(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class dC{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,sS(r,this._withCredentials,this._abortController)).then(a=>{if(!nS(a.status))throw ip(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:iS(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Up=200,Vp=206;function fC(n){const e=n.response;return typeof e!="string"?e:tp(e).buffer}class pC{constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ry(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,s){const i={begin:e,end:t};for(const r in s)i[r]=s[r];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Vp):i.expectedStatus=Up,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){var c,u,h;const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){(c=s.onError)==null||c.call(s,i.status);return}const r=i.status||Up;if(!(r===Up&&s.expectedStatus===Vp)&&r!==s.expectedStatus){(u=s.onError)==null||u.call(s,i.status);return}const a=fC(i);if(r===Vp){const d=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);s.onDone({begin:parseInt(f[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):(h=s.onError)==null||h.call(s,i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class gC{constructor(e){this._source=e,this._manager=new pC(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return at(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new mC(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new vC(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class mC{constructor(e,t){this._manager=e;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(s),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),s=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...c]=o.split(": ");return[a,c.join(": ")]})),{allowRangeRequests:i,suggestedLength:r}=oy({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=ay(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ip(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vC{constructor(e,t,s){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,s,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=ip(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const yC=/^[a-z][a-z0-9\-+.]+:/i;function wC(n){if(yC.test(n))return new URL(n);const e=xr.get("url");return new URL(e.pathToFileURL(n))}function rS(n,e,t){return n.protocol==="http:"?xr.get("http").request(n,{headers:e},t):xr.get("https").request(n,{headers:e},t)}class AC{constructor(e){this.source=e,this.url=wC(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=ry(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return at(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new bC(this):new _C(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new EC(this,e,t):new SC(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class oS{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new oa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class aS{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class _C extends oS{constructor(e){super(e);const t=Object.fromEntries(e.headers),s=i=>{if(i.statusCode===404){const c=new ra(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(i);const r=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=oy({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=ay(r)};this._request=rS(this._url,t,s),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class SC extends aS{constructor(e,t,s){super(e);const i=Object.fromEntries(e.headers);i.Range=`bytes=${t}-${s-1}`;const r=o=>{if(o.statusCode===404){const a=new ra(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=rS(this._url,i,r),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class bC extends oS{constructor(e){super(e);const t=xr.get("fs");t.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new ra(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class EC extends aS{constructor(e,t,s){super(e);const i=xr.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}}const xC=1e5,Zt=30,CC=.8;var ew,Qi,tn,Mu,Iu,po,Zs,Fu,Du,go,ol,al,Zi,ll,Nu,cl,mo,Ou,ju,We,vo,yo,zu,Ji,ul,ki,lS,cS,mm,xn,_d,vm,uS,hS;let gm=(We=class{constructor({textContentSource:e,container:t,viewport:s}){_(this,ki);_(this,Qi,Promise.withResolvers());_(this,tn,null);_(this,Mu,!1);_(this,Iu,!!((ew=globalThis.FontInspector)!=null&&ew.enabled));_(this,po,null);_(this,Zs,null);_(this,Fu,0);_(this,Du,0);_(this,go,null);_(this,ol,null);_(this,al,0);_(this,Zi,0);_(this,ll,Object.create(null));_(this,Nu,[]);_(this,cl,null);_(this,mo,[]);_(this,Ou,new WeakMap);_(this,ju,null);var c;if(e instanceof ReadableStream)v(this,cl,e);else if(typeof e=="object")v(this,cl,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,tn,v(this,ol,t)),v(this,Zi,s.scale*(globalThis.devicePixelRatio||1)),v(this,al,s.rotation),v(this,Zs,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=s.rawDims;v(this,ju,[1,0,0,-1,-o,a+r]),v(this,Du,i),v(this,Fu,r),y(c=We,xn,uS).call(c),Qo(t,s),l(this,Qi).promise.finally(()=>{l(We,ul).delete(this),v(this,Zs,null),v(this,ll,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Xt.platform;return he(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,go).read().then(({value:t,done:s})=>{if(s){l(this,Qi).resolve();return}l(this,po)??v(this,po,t.lang),Object.assign(l(this,ll),t.styles),y(this,ki,lS).call(this,t.items),e()},l(this,Qi).reject)};return v(this,go,l(this,cl).getReader()),l(We,ul).add(this),e(),l(this,Qi).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==l(this,al)&&(t==null||t(),v(this,al,i),Qo(l(this,ol),{rotation:i})),s!==l(this,Zi)){t==null||t(),v(this,Zi,s);const o={div:null,properties:null,ctx:y(r=We,xn,_d).call(r,l(this,po))};for(const a of l(this,mo))o.properties=l(this,Ou).get(a),o.div=a,y(this,ki,mm).call(this,o)}}cancel(){var t;const e=new oa("TextLayer task cancelled.");(t=l(this,go))==null||t.cancel(e).catch(()=>{}),v(this,go,null),l(this,Qi).reject(e)}get textDivs(){return l(this,mo)}get textContentItemsStr(){return l(this,Nu)}static cleanup(){if(!(l(this,ul).size>0)){l(this,vo).clear();for(const{canvas:e}of l(this,yo).values())e.remove();l(this,yo).clear()}}},Qi=new WeakMap,tn=new WeakMap,Mu=new WeakMap,Iu=new WeakMap,po=new WeakMap,Zs=new WeakMap,Fu=new WeakMap,Du=new WeakMap,go=new WeakMap,ol=new WeakMap,al=new WeakMap,Zi=new WeakMap,ll=new WeakMap,Nu=new WeakMap,cl=new WeakMap,mo=new WeakMap,Ou=new WeakMap,ju=new WeakMap,vo=new WeakMap,yo=new WeakMap,zu=new WeakMap,Ji=new WeakMap,ul=new WeakMap,ki=new WeakSet,lS=function(e){var i,r;if(l(this,Mu))return;(r=l(this,Zs)).ctx??(r.ctx=y(i=We,xn,_d).call(i,l(this,po)));const t=l(this,mo),s=l(this,Nu);for(const o of e){if(t.length>xC){oe("Ignoring additional textDivs for performance reasons."),v(this,Mu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,tn);v(this,tn,document.createElement("span")),l(this,tn).classList.add("markedContent"),o.id!==null&&l(this,tn).setAttribute("id",`${o.id}`),a.append(l(this,tn))}else o.type==="endMarkedContent"&&v(this,tn,l(this,tn).parentNode);continue}s.push(o.str),y(this,ki,cS).call(this,o)}},cS=function(e){var A;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,mo).push(t);const i=V.transform(l(this,ju),e.transform);let r=Math.atan2(i[1],i[0]);const o=l(this,ll)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,Iu)&&o.fontSubstitution||o.fontFamily;a=We.fontFamilyMap.get(a)||a;const c=Math.hypot(i[2],i[3]),u=c*y(A=We,xn,hS).call(A,a,l(this,po));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;l(this,tn)===l(this,ol)?(p.left=`${(100*h/l(this,Du)).toFixed(2)}%`,p.top=`${(100*d/l(this,Fu)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(We,Ji)*c).toFixed(2)}px)`,p.fontFamily=a,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Iu)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);E!==g&&Math.max(E,g)/Math.min(E,g)>1.5&&(m=!0)}if(m&&(s.canvasWidth=o.vertical?e.height:e.width),l(this,Ou).set(t,s),l(this,Zs).div=t,l(this,Zs).properties=s,y(this,ki,mm).call(this,l(this,Zs)),s.hasText&&l(this,tn).append(t),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,tn).append(E)}},mm=function(e){var a;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let o="";if(l(We,Ji)>1&&(o=`scale(${1/l(We,Ji)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;y(a=We,xn,vm).call(a,i,h*l(this,Zi),c);const{width:d}=i.measureText(t.textContent);d>0&&(o=`scaleX(${u*l(this,Zi)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},xn=new WeakSet,_d=function(e=null){let t=l(this,yo).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,yo).set(e,t),l(this,zu).set(t,{size:0,family:""})}return t},vm=function(e,t,s){const i=l(this,zu).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},uS=function(){if(l(this,Ji)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),v(this,Ji,e.getBoundingClientRect().height),e.remove()},hS=function(e,t){const s=l(this,vo).get(e);if(s)return s;const i=y(this,xn,_d).call(this,t);i.canvas.width=i.canvas.height=Zt,y(this,xn,vm).call(this,i,Zt,e);const r=i.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+a);return l(this,vo).set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,Zt,Zt),i.strokeText("g",0,0);let c=i.getImageData(0,0,Zt,Zt).data;a=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){a=Math.ceil(h/4/Zt);break}i.clearRect(0,0,Zt,Zt),i.strokeText("A",0,Zt),c=i.getImageData(0,0,Zt,Zt).data,o=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){o=Zt-Math.floor(h/4/Zt);break}i.canvas.width=i.canvas.height=0;const u=o?o/(o+a):CC;return l(this,vo).set(e,u),u},_(We,xn),_(We,vo,new Map),_(We,yo,new Map),_(We,zu,new WeakMap),_(We,Ji,null),_(We,ul,new Set),We);class su{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(su.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const kC=65536,TC=100,PC=5e3,RC=Ot?U1:z1,LC=Ot?V1:X_,MC=Ot?B1:H1,IC=Ot?$1:Q_;function FC(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new ym,{docId:t}=e,s=n.url?DC(n.url):null,i=n.data?NC(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof dS?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:kC;let h=n.worker instanceof za?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!sp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,A=n.CMapReaderFactory||LC,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||IC,w=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,b=n.isEvalSupported!==!1,x=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ot,C=typeof n.isChrome=="boolean"?n.isChrome:!Xt.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),k=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ot,M=n.fontExtraProperties===!0,I=n.enableXfa===!0,D=n.ownerDocument||globalThis.document,Y=n.disableRange===!0,X=n.disableStream===!0,W=n.disableAutoFetch===!0,K=n.pdfBug===!0,q=n.CanvasFactory||RC,j=n.FilterFactory||MC,R=n.enableHWA===!0,U=c?c.length:n.length??NaN,$=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ot&&!P,ne=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:A===X_&&g===Q_&&p&&E&&dc(p,document.baseURI)&&dc(E,document.baseURI);n.canvasFactory&&k0("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&k0("`filterFactory`-instance option, please use `FilterFactory` instead.");const J=null;m1(d);const ce={canvasFactory:new q({ownerDocument:D,enableHWA:R}),filterFactory:new j({docId:t,ownerDocument:D}),cMapReaderFactory:ne?null:new A({baseUrl:p,isCompressed:m}),standardFontDataFactory:ne?null:new g({baseUrl:E})};if(!h){const de={verbosity:d,port:mi.workerPort};h=de.port?za.fromPort(de):new za(de),e._worker=h}const Me={docId:t,apiVersion:"4.8.69",data:i,password:a,disableAutoFetch:W,rangeChunkSize:u,length:U,docBaseUrl:f,enableXfa:I,evaluatorOptions:{maxImageSize:S,disableFontFace:P,ignoreErrors:w,isEvalSupported:b,isOffscreenCanvasSupported:x,isChrome:C,canvasMaxAreaInBytes:k,fontExtraProperties:M,useSystemFonts:$,cMapUrl:ne?p:null,standardFontDataUrl:ne?E:null}},tt={disableFontFace:P,fontExtraProperties:M,ownerDocument:D,pdfBug:K,styleElement:J,loadingParams:{disableAutoFetch:W,enableXfa:I}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const de=h.messageHandler.sendWithPromise("GetDocRequest",Me,i?[i.buffer]:null);let re;if(c)re=new aC(c,{disableRange:Y,disableStream:X});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let zt;Ot?zt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&dc(s)?z0:AC:zt=dc(s)?z0:gC,re=new zt({url:s,length:U,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:Y,disableStream:X})}return de.then(zt=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ht=new wc(t,zt,h.port),Ce=new HC(Ht,e,re,tt,ce);e._transport=Ce,Ht.send("Ready",null)})}).catch(e._capability.reject),e}function DC(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Ot&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function NC(n){if(Ot&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return tp(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function H0(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var kf;const Tf=class Tf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Bt(Tf,kf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};kf=new WeakMap,_(Tf,kf,0);let ym=Tf,dS=class{constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Re("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class OC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return he(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var er,Js,On,ma,Sd;class jC{constructor(e,t,s,i=!1){_(this,On);_(this,er,null);_(this,Js,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new C0:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new fS,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Eh({viewBox:this.view,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return he(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=ji.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var b,x;(b=this._stats)==null||b.time("Overall");const f=this._transport.getRenderingIntent(s,i,h,d),{renderingIntent:p,cacheKey:m}=f;v(this,Js,!1),y(this,On,Sd).call(this),a||(a=this._transport.getOptionalContentConfig(p));let A=this._intentStates.get(m);A||(A=Object.create(null),this._intentStates.set(m,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const E=!!(p&An.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(x=this._stats)==null||x.time("Page Request"),this._pumpOperatorList(f));const g=C=>{var k;A.renderTasks.delete(w),(this._maybeCleanupAfterRender||E)&&v(this,Js,!0),y(this,On,ma).call(this,!E),C?(w.capability.reject(C),this._abortOperatorList({intentState:A,reason:C instanceof Error?C:new Error(C)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new Am({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(A.renderTasks||(A.renderTasks=new Set)).add(w);const S=w.task;return Promise.all([A.displayReadyCapability.promise,a]).then(([C,k])=>{var P;if(this.destroyed){g();return}if((P=this._stats)==null||P.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:C,optionalContentConfig:k}),w.operatorListChanged()}).catch(g),S}getOperatorList({intent:e="display",annotationMode:t=ji.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>su.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){o.read().then(function({value:c,done:u}){if(u){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),v(this,Js,!1),y(this,On,Sd).call(this),Promise.all(e)}cleanup(e=!1){v(this,Js,!0);const t=y(this,On,ma).call(this,!1);return e&&t&&this._stats&&(this._stats=new C0),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&y(this,On,ma).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();y(this,On,ma).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Jv){let i=TC;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new oa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}er=new WeakMap,Js=new WeakMap,On=new WeakSet,ma=function(e=!1){if(y(this,On,Sd).call(this),!l(this,Js)||this.destroyed)return!1;if(e)return v(this,er,setTimeout(()=>{v(this,er,null),y(this,On,ma).call(this,!1)},PC)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,Js,!1),!0},Sd=function(){l(this,er)&&(clearTimeout(l(this,er)),v(this,er,null))};var ei,Pf;class zC{constructor(){_(this,ei,new Map);_(this,Pf,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};l(this,Pf).then(()=>{for(const[i]of l(this,ei))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){oe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,ei).set(t,i)}removeEventListener(e,t){const s=l(this,ei).get(t);s==null||s(),l(this,ei).delete(t)}terminate(){for(const[,e]of l(this,ei))e==null||e();l(this,ei).clear()}}ei=new WeakMap,Pf=new WeakMap;var Rf,wo,Ao,hl,bd,dl,Ed;const Ie=class Ie{constructor({name:e=null,port:t=null,verbosity:s=v1()}={}){_(this,hl);var i;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=l(Ie,Ao))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Ie,Ao)||v(Ie,Ao,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Ot?Promise.all([xr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new wc("main","worker",e),this._messageHandler.on("ready",function(){}),y(this,hl,bd).call(this)}_initialize(){if(l(Ie,wo)||l(Ie,dl,Ed)){this._setupFakeWorker();return}let{workerSrc:e}=Ie;try{Ie._isSameOrigin(window.location.href,e)||(e=Ie._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new wc("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}this._messageHandler=s,this._port=t,this._webWorker=t,y(this,hl,bd).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{Jf("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Ie,wo)||(oe("Setting up fake worker."),v(Ie,wo,!0)),Ie._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new zC;this._port=t;const s=`fake${Bt(Ie,Rf)._++}`,i=new wc(s+"_worker",s,t);e.setup(i,t),this._messageHandler=new wc(s,s+"_worker",t),y(this,hl,bd).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(Ie,Ao))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=l(this,Ao))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ie(e)}static get workerSrc(){if(mi.workerSrc)return mi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return he(this,"_setupFakeWorkerGlobal",(async()=>l(this,dl,Ed)?l(this,dl,Ed):(await import(this.workerSrc)).WorkerMessageHandler)())}};Rf=new WeakMap,wo=new WeakMap,Ao=new WeakMap,hl=new WeakSet,bd=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},dl=new WeakSet,Ed=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},_(Ie,dl),_(Ie,Rf,0),_(Ie,wo,!1),_(Ie,Ao),Ot&&(v(Ie,wo,!0),mi.workerSrc||(mi.workerSrc="./pdf.worker.mjs")),Ie._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(t,s);return s.origin===i.origin},Ie._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let za=Ie;var ti,ks,fl,pl,Ts,_o,Ac;class HC{constructor(e,t,s,i,r){_(this,_o);_(this,ti,new Map);_(this,ks,new Map);_(this,fl,new Map);_(this,pl,new Map);_(this,Ts,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new fS,this.fontLoader=new O1({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return he(this,"annotationStorage",new sy)}getRenderingIntent(e,t=ji.ENABLE,s=null,i=!1,r=!1){let o=An.DISPLAY,a=om;switch(e){case"any":o=An.ANY;break;case"display":break;case"print":o=An.PRINT;break;default:oe(`getRenderingIntent - invalid intent: ${e}`)}const c=o&An.PRINT&&s instanceof $_?s:this.annotationStorage;switch(t){case ji.DISABLE:o+=An.ANNOTATIONS_DISABLE;break;case ji.ENABLE:break;case ji.ENABLE_FORMS:o+=An.ANNOTATIONS_FORMS;break;case ji.ENABLE_STORAGE:o+=An.ANNOTATIONS_STORAGE,a=c.serializable;break;default:oe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=An.IS_EDITING),r&&(o+=An.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,Ts))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of l(this,ks).values())e.push(i._destroy());l(this,ks).clear(),l(this,fl).clear(),l(this,pl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),l(this,ti).clear(),this.filterFactory.destroy(),gm.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new oa("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{at(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}at(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{at(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}at(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new OC(s,this))}),e.on("DocException",function(s){let i;switch(s.name){case"PasswordException":i=new jg(s.message,s.code);break;case"InvalidPDFException":i=new m_(s.message);break;case"MissingPDFException":i=new ra(s.message);break;case"UnexpectedResponseException":i=new ep(s.message,s.status);break;case"UnknownErrorException":i=new zg(s.message,s.details);break;default:Re("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",s=>{if(v(this,Ts,Promise.withResolvers()),t.onPassword){const i=r=>{r instanceof Error?l(this,Ts).reject(r):l(this,Ts).resolve({password:r})};try{t.onPassword(i,s.code)}catch(r){l(this,Ts).reject(r)}}else l(this,Ts).reject(new jg(s.message,s.code));return l(this,Ts).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,ks).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;oe(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new j1(r,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=r;at(f,"The imageRef must be defined.");for(const p of l(this,ks).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,o])=>{var c;if(this.destroyed)return;const a=l(this,ks).get(i);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":a.objs.resolve(s,o),(o==null?void 0:o.dataLen)>d1&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),e.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&oe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=l(this,fl).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,pl).set(r.refStr,e);const o=new jC(t,r,this,this._params.pdfBug);return l(this,ks).set(t,o),o});return l(this,fl).set(t,i),i}getPageIndex(e){return H0(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return y(this,_o,Ac).call(this,"GetFieldObjects")}hasJSActions(){return y(this,_o,Ac).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return y(this,_o,Ac).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return y(this,_o,Ac).call(this,"GetOptionalContentConfig").then(t=>new oC(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,ti).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new iC(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,ti).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,ks).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,ti).clear(),this.filterFactory.destroy(!0),gm.cleanup()}}cachedPageNumber(e){if(!H0(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,pl).get(t)??null}}ti=new WeakMap,ks=new WeakMap,fl=new WeakMap,pl=new WeakMap,Ts=new WeakMap,_o=new WeakSet,Ac=function(e,t=null){const s=l(this,ti).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return l(this,ti).set(e,i),i};const Zh=Symbol("INITIAL_DATA");var es,Hu,wm;class fS{constructor(){_(this,Hu);_(this,es,Object.create(null))}get(e,t=null){if(t){const i=y(this,Hu,wm).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=l(this,es)[e];if(!s||s.data===Zh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=l(this,es)[e];return!!t&&t.data!==Zh}resolve(e,t=null){const s=y(this,Hu,wm).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in l(this,es)){const{data:s}=l(this,es)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}v(this,es,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,es)){const{data:t}=l(this,es)[e];t!==Zh&&(yield[e,t])}}}es=new WeakMap,Hu=new WeakSet,wm=function(e){var t;return(t=l(this,es))[e]||(t[e]={...Promise.withResolvers(),data:Zh})};var tr;class BC{constructor(e){_(this,tr,null);v(this,tr,e),this.onContinue=null}get promise(){return l(this,tr).capability.promise}cancel(e=0){l(this,tr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,tr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,tr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}tr=new WeakMap;var nr,So;const Vr=class Vr{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){_(this,nr,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new BC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(Vr,So).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Vr,So).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new ja(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,nr)&&(window.cancelAnimationFrame(l(this,nr)),v(this,nr,null)),l(Vr,So).delete(this._canvas),this.callback(e||new Jv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,nr,window.requestAnimationFrame(()=>{v(this,nr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Vr,So).delete(this._canvas),this.callback())))}};nr=new WeakMap,So=new WeakMap,_(Vr,So,new WeakSet);let Am=Vr;const UC="4.8.69",VC="3634dab10";function B0(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function ac(n){return Math.max(0,Math.min(255,255*n))}class U0{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ac(e),[e,e,e]}static G_HTML([e]){const t=B0(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(ac)}static RGB_HTML(e){return`#${e.map(B0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[ac(1-Math.min(1,e+i)),ac(1-Math.min(1,s+i)),ac(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,o=1-s,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class $C{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Re("Abstract method `_createSVG` called.")}}class ly extends $C{_createSVG(e){return document.createElementNS(Bs,e)}}class pS{static setupStorage(e,t,s,i,r){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&r.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const a=r!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&su.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[p,m,A]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const E=p.children[++h.at(-1)[1]];if(E===null)continue;const{name:g}=E;if(g==="#text"){const S=document.createTextNode(E.value);u.push(S),A.append(S);continue}const w=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,g):document.createElement(g);if(A.append(w),E.attributes&&this.setAttributes({html:w,element:E,storage:t,intent:r,linkService:s}),((f=E.children)==null?void 0:f.length)>0)h.push([E,-1,w]);else if(E.value){const S=document.createTextNode(E.value);a&&su.shouldBuildText(g)&&u.push(S),w.append(S)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ch=1e3,WC=9,Jo=new WeakSet;function Ai(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class GC{static create(e){switch(e.data.annotationType){case nt.LINK:return new gS(e);case nt.TEXT:return new XC(e);case nt.WIDGET:switch(e.data.fieldType){case"Tx":return new qC(e);case"Btn":return e.data.radioButton?new yS(e):e.data.checkBox?new KC(e):new QC(e);case"Ch":return new ZC(e);case"Sig":return new YC(e)}return new aa(e);case nt.POPUP:return new Sm(e);case nt.FREETEXT:return new bS(e);case nt.LINE:return new ek(e);case nt.SQUARE:return new tk(e);case nt.CIRCLE:return new nk(e);case nt.POLYLINE:return new ES(e);case nt.CARET:return new ik(e);case nt.INK:return new cy(e);case nt.POLYGON:return new sk(e);case nt.HIGHLIGHT:return new xS(e);case nt.UNDERLINE:return new rk(e);case nt.SQUIGGLY:return new ok(e);case nt.STRIKEOUT:return new ak(e);case nt.STAMP:return new CS(e);case nt.FILEATTACHMENT:return new lk(e);default:return new Ye(e)}}}var bo,gl,ml,Bu,_m;const fy=class fy{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){_(this,Bu);_(this,bo,null);_(this,gl,!1);_(this,ml,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return fy._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;l(this,bo)||v(this,bo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&y(this,Bu,_m).call(this,t),(s=l(this,ml))==null||s.popup.updateEdited(e)}resetEdited(){var e;l(this,bo)&&(y(this,Bu,_m).call(this,l(this,bo).rect),(e=l(this,ml))==null||e.popup.resetEdited(),v(this,bo,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof aa||(r.tabIndex=Ch);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Sm){const{rotation:A}=t;return!t.hasOwnCanvas&&A!==0&&this.setRotation(A,r),r}const{width:a,height:c}=Ai(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const A=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(A>0||E>0){const w=`calc(${A}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;o.borderRadius=w}else if(this instanceof yS){const w=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=w}switch(t.borderStyle.style){case rc.SOLID:o.borderStyle="solid";break;case rc.DASHED:o.borderStyle="dashed";break;case rc.BEVELED:oe("Unimplemented border style: beveled");break;case rc.INSET:oe("Unimplemented border style: inset");break;case rc.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(v(this,gl,!0),o.borderColor=V.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=V.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=Ai(this.data.rect);let a,c;e%180===0?(a=100*r/s,c=100*o/i):(a=100*o/s,c=100*r/i),t.style.width=`${a}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],o=r[0],a=r.slice(1);i.target.style[s]=U0[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:U0[`${o}_rgb`](a)})};return he(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const o=s[i];if(o){const a={detail:{[i]:r},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(A=>Math.fround(A));if(e.length===8){const[A,E,g,w]=e.subarray(2,6);if(i===A&&r===E&&t===g&&s===w)return}const{style:o}=this.container;let a;if(l(this,gl)){const{borderColor:A,borderWidth:E}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=i-t,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let A=2,E=e.length;A<E;A+=8){const g=e[A],w=e[A+1],S=e[A+2],b=e[A+3],x=h.createElement("rect"),C=(S-t)/c,k=(r-w)/u,P=(g-S)/c,M=(w-b)/u;x.setAttribute("x",C),x.setAttribute("y",k),x.setAttribute("width",P),x.setAttribute("height",M),p.append(x),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${k}" width="${P}" height="${M}"/>`)}l(this,gl)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=v(this,ml,new Sm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Re("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Jo.has(u)){oe(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&Jo.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};bo=new WeakMap,gl=new WeakMap,ml=new WeakMap,Bu=new WeakSet,_m=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...e);const{width:u,height:h}=Ai(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,i===0?(t.width=`${100*u/r}%`,t.height=`${100*h/o}%`):this.setRotation(i)};let Ye=fy;var Sn,jr,mS,vS;class gS extends Ye{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});_(this,Sn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(y(this,Sn,mS).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(y(this,Sn,vS).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&y(this,Sn,jr).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),y(this,Sn,jr).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),y(this,Sn,jr).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),y(this,Sn,jr).call(this),!this._fieldObjects){oe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:a}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:A}of m)f.add(A)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const A=f.defaultValue||"";u.setValue(p,{value:A});break}case"checkbox":case"radiobutton":{const A=f.defaultValue===f.exportValues;u.setValue(p,{value:A});break}case"combobox":case"listbox":{const A=f.defaultValue||"";u.setValue(p,{value:A});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Jo.has(m)){oe(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Sn=new WeakSet,jr=function(){this.container.setAttribute("data-internal-link","")},mS=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},y(this,Sn,jr).call(this)},vS=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),y(this,Sn,jr).call(this)};class XC extends Ye{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class aa extends Ye{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Xt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(e,t,s,i){var r,o,a;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":V.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||WC,r=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(jp*i))||1,d=u/h;o=Math.min(i,c(d/jp))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,c(u/jp))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=V.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class qC extends aa{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Jo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Ch,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var A;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(A){h.userValue=A.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:E}=A.detail;h.formattedValue=E,E!=null&&A.target!==document.activeElement&&(A.target.value=E),e.setValue(t,{formattedValue:E})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var S;const{charLimit:E}=A.detail,{target:g}=A;if(E===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",E);let w=h.userValue;!w||w.length<=E||(w=w.slice(0,E),g.value=h.userValue=w,e.setValue(t,{value:w}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("keydown",p=>{var E;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:A}=p.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",p=>{var A,E;if(!h.focused||!p.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var x;h.lastCommittedValue=null;const{data:m,target:A}=p,{value:E,selectionStart:g,selectionEnd:w}=A;let S=g,b=w;switch(p.inputType){case"deleteWordBackward":{const C=E.substring(0,g).match(/\w*[^\w]*$/);C&&(S-=C[0].length);break}case"deleteWordForward":{const C=E.substring(g).match(/^[^\w]*\w*/);C&&(b+=C[0].length);break}case"deleteContentBackward":g===w&&(S-=1);break;case"deleteContentForward":g===w&&(b+=1);break}p.preventDefault(),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:m||"",willCommit:!1,selStart:S,selEnd:b}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class YC extends aa{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class KC extends aa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Jo.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=Ch,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,s)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class yS extends aa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Jo.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Ch,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class QC extends gS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class ZC extends aa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Jo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Ch;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const A of i.options)A.selected=m.has(A.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,m=f.detail.remove;p[m].selected=!1,i.remove(m),p.length>0&&Array.prototype.findIndex.call(p,E=>E.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:A}=f.detail.insert,E=i.children[p],g=document.createElement("option");g.textContent=m,g.value=A,E?E.before(g):i.append(g),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of p){const{displayValue:A,exportValue:E}=m,g=document.createElement("option");g.textContent=A,g.value=E,i.append(g)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Sm extends Ye{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Ye._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new JC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${Zv}${s}`).join(",")),this.container}}var vl,Lf,Mf,yl,Eo,$e,ni,wl,Uu,Vu,Al,si,ts,ii,$u,ri,Wu,xo,Co,Ee,xd,bm,wS,AS,_S,SS,Cd,kd,Em;class JC{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:u,parentRect:h,open:d}){_(this,Ee);_(this,vl,y(this,Ee,_S).bind(this));_(this,Lf,y(this,Ee,Em).bind(this));_(this,Mf,y(this,Ee,kd).bind(this));_(this,yl,y(this,Ee,Cd).bind(this));_(this,Eo,null);_(this,$e,null);_(this,ni,null);_(this,wl,null);_(this,Uu,null);_(this,Vu,null);_(this,Al,null);_(this,si,!1);_(this,ts,null);_(this,ii,null);_(this,$u,null);_(this,ri,null);_(this,Wu,null);_(this,xo,null);_(this,Co,!1);var f;v(this,$e,e),v(this,Wu,i),v(this,ni,o),v(this,ri,a),v(this,Vu,c),v(this,Eo,t),v(this,$u,u),v(this,Al,h),v(this,Uu,s),v(this,wl,ty.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,yl)),p.addEventListener("mouseenter",l(this,Mf)),p.addEventListener("mouseleave",l(this,Lf)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",l(this,vl));l(this,$e).hidden=!0,d&&y(this,Ee,Cd).call(this)}render(){if(l(this,ts))return;const e=v(this,ts,document.createElement("div"));if(e.className="popup",l(this,Eo)){const r=e.style.outlineColor=V.makeHexColor(...l(this,Eo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=V.makeHexColor(...l(this,Eo).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=l(this,Wu),e.append(t),l(this,wl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,wl).valueOf()})),t.append(r)}const i=l(this,Ee,xd);if(i)pS.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,ni));e.append(r)}l(this,$e).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;l(this,xo)||v(this,xo,{contentsObj:l(this,ni),richText:l(this,ri)}),e&&v(this,ii,null),t&&(v(this,ri,y(this,Ee,AS).call(this,t)),v(this,ni,null)),(s=l(this,ts))==null||s.remove(),v(this,ts,null)}resetEdited(){var e;l(this,xo)&&({contentsObj:Bt(this,ni)._,richText:Bt(this,ri)._}=l(this,xo),v(this,xo,null),(e=l(this,ts))==null||e.remove(),v(this,ts,null),v(this,ii,null))}forceHide(){v(this,Co,this.isVisible),l(this,Co)&&(l(this,$e).hidden=!0)}maybeShow(){l(this,Co)&&(l(this,ts)||y(this,Ee,kd).call(this),v(this,Co,!1),l(this,$e).hidden=!1)}get isVisible(){return l(this,$e).hidden===!1}}vl=new WeakMap,Lf=new WeakMap,Mf=new WeakMap,yl=new WeakMap,Eo=new WeakMap,$e=new WeakMap,ni=new WeakMap,wl=new WeakMap,Uu=new WeakMap,Vu=new WeakMap,Al=new WeakMap,si=new WeakMap,ts=new WeakMap,ii=new WeakMap,$u=new WeakMap,ri=new WeakMap,Wu=new WeakMap,xo=new WeakMap,Co=new WeakMap,Ee=new WeakSet,xd=function(){const e=l(this,ri),t=l(this,ni);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,ri).html||null},bm=function(){var e,t,s;return((s=(t=(e=l(this,Ee,xd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},wS=function(){var e,t,s;return((s=(t=(e=l(this,Ee,xd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},AS=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:l(this,Ee,wS),fontSize:l(this,Ee,bm)?`calc(${l(this,Ee,bm)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},_S=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,si))&&y(this,Ee,Cd).call(this)},SS=function(){if(l(this,ii)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=l(this,Vu);let o=!!l(this,Al),a=o?l(this,Al):l(this,$u);for(const m of l(this,Uu))if(!a||V.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=V.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,d=c[0]+h,f=c[1];v(this,ii,[100*(d-i)/t,100*(f-r)/s]);const{style:p}=l(this,$e);p.left=`${l(this,ii)[0]}%`,p.top=`${l(this,ii)[1]}%`},Cd=function(){v(this,si,!l(this,si)),l(this,si)?(y(this,Ee,kd).call(this),l(this,$e).addEventListener("click",l(this,yl)),l(this,$e).addEventListener("keydown",l(this,vl))):(y(this,Ee,Em).call(this),l(this,$e).removeEventListener("click",l(this,yl)),l(this,$e).removeEventListener("keydown",l(this,vl)))},kd=function(){l(this,ts)||this.render(),this.isVisible?l(this,si)&&l(this,$e).classList.add("focused"):(y(this,Ee,SS).call(this),l(this,$e).hidden=!1,l(this,$e).style.zIndex=parseInt(l(this,$e).style.zIndex)+1e3)},Em=function(){l(this,$e).classList.remove("focused"),!(l(this,si)||!this.isVisible)&&(l(this,$e).hidden=!0,l(this,$e).style.zIndex=parseInt(l(this,$e).style.zIndex)-1e3)};class bS extends Ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=se.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Gu;class ek extends Ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Gu,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:i}=Ai(t.rect),r=this.svgFactory.create(s,i,!0),o=v(this,Gu,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Gu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gu=new WeakMap;var Xu;class tk extends Ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Xu,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:i}=Ai(t.rect),r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,a=v(this,Xu,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Xu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xu=new WeakMap;var qu;class nk extends Ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,qu,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:i}=Ai(t.rect),r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,a=v(this,qu,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",i/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,qu)}addHighlightArea(){this.container.classList.add("highlightArea")}}qu=new WeakMap;var Yu;class ES extends Ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Yu,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:o,height:a}=Ai(t),c=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-t[0],m=t[3]-s[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=v(this,Yu,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Yu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yu=new WeakMap;class sk extends ES{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ik extends Ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ku;class cy extends Ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Ku,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?se.HIGHLIGHT:se.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:s,borderStyle:i,popupRef:r}}=this,{width:o,height:a}=Ai(t),c=this.svgFactory.create(o,a,!0);for(const u of s){let h=[];for(let f=0,p=u.length;f<p;f+=2){const m=u[f]-t[0],A=t[3]-u[f+1];h.push(`${m},${A}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,Ku).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,Ku)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ku=new WeakMap;class xS extends Ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=se.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class rk extends Ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ok extends Ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ak extends Ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class CS extends Ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=se.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Qu,Zu,xm;class lk extends Ye{constructor(t){var i;super(t,{isRenderable:!0});_(this,Zu);_(this,Qu,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",y(this,Zu,xm).bind(this)),v(this,Qu,i);const{isMac:r}=Xt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&y(this,Zu,xm).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return l(this,Qu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qu=new WeakMap,Zu=new WeakSet,xm=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ju,ko,To,eh,ta,kS,Cm,tw;let ck=(tw=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){_(this,ta);_(this,Ju,null);_(this,ko,null);_(this,To,new Map);_(this,eh,null);this.div=e,v(this,Ju,t),v(this,ko,s),v(this,eh,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return l(this,To).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;Qo(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new ly,annotationStorage:e.annotationStorage||new sy,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===nt.POPUP;if(c){const d=i.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=Ai(a.rect);if(d<=0||f<=0)continue}r.data=a;const u=GC.create(r);if(!u.isRenderable)continue;if(!c&&a.popupRef){const d=i.get(a.popupRef);d?d.push(u):i.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await y(this,ta,kS).call(this,h,a.id),u._isEditable&&(l(this,To).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}y(this,ta,Cm).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Qo(t,{rotation:e.rotation}),y(this,ta,Cm).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,To).values())}getEditableAnnotation(e){return l(this,To).get(e)}},Ju=new WeakMap,ko=new WeakMap,To=new WeakMap,eh=new WeakMap,ta=new WeakSet,kS=async function(e,t){var o,a;const s=e.firstChild||e,i=s.id=`${Zv}${t}`,r=await((o=l(this,eh))==null?void 0:o.getAriaAttributes(i));if(r)for(const[c,u]of r)s.setAttribute(c,u);this.div.append(e),(a=l(this,Ju))==null||a.moveElementInDOM(this.div,e,s,!1)},Cm=function(){if(!l(this,ko))return;const e=this.div;for(const[t,s]of l(this,ko)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}l(this,ko).clear()},tw);const Jh=/\r\n?|\n/g;var ns,pn,th,Po,gn,et,TS,PS,RS,Td,Si,Pd,Rd,LS,Tm,MS;const ke=class ke extends Ae{constructor(t){super({...t,name:"freeTextEditor"});_(this,et);_(this,ns);_(this,pn,"");_(this,th,`${this.id}-editor`);_(this,Po,null);_(this,gn);v(this,ns,t.color||ke._defaultColor||Ae._defaultLineColor),v(this,gn,t.fontSize||ke._defaultFontSize)}static get _keyboardManager(){const t=ke.prototype,s=o=>o.isEmpty(),i=Zo.TRANSLATE_SMALL,r=Zo.TRANSLATE_BIG;return he(this,"_keyboardManager",new xh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){Ae.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Z.FREETEXT_SIZE:ke._defaultFontSize=s;break;case Z.FREETEXT_COLOR:ke._defaultColor=s;break}}updateParams(t,s){switch(t){case Z.FREETEXT_SIZE:y(this,et,TS).call(this,s);break;case Z.FREETEXT_COLOR:y(this,et,PS).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Z.FREETEXT_SIZE,ke._defaultFontSize],[Z.FREETEXT_COLOR,ke._defaultColor||Ae._defaultLineColor]]}get propertiesToUpdate(){return[[Z.FREETEXT_SIZE,l(this,gn)],[Z.FREETEXT_COLOR,l(this,ns)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-ke._internalPadding*t,-(ke._internalPadding+l(this,gn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(se.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,Po,new AbortController);const t=this._uiManager.combinedSignal(l(this,Po));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,th)),this._isDraggable=!0,(t=l(this,Po))==null||t.abort(),v(this,Po,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,pn),s=v(this,pn,y(this,et,RS).call(this).trimEnd());if(t===s)return;const i=r=>{if(v(this,pn,r),!r){this.remove();return}y(this,et,Rd).call(this),this._uiManager.rebuild(this),y(this,et,Td).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),y(this,et,Td).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ke._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,th)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,gn)}px * var(--scale-factor))`,i.color=l(this,ns),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),ff(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,A;switch(this.rotation){case 0:m=t+(a[0]-f)/h,A=s+this.height-(a[1]-p)/d;break;case 90:m=t+(a[0]-f)/h,A=s-(a[1]-p)/d,[c,u]=[u,-c];break;case 180:m=t-this.width+(a[0]-f)/h,A=s-(a[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=t+(a[0]-f-this.height*d)/h,A=s+(a[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,A*o,c,u)}else this.setAt(t*r,s*o,this.width*r,this.height*o);y(this,et,Rd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,A,E;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=y(m=ke,Si,Tm).call(m,s.getData("text")||"").replaceAll(Jh,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Jh,"")),g!==this.editorDiv){let w=h;for(const S of this.editorDiv.childNodes){if(S===g){w=d;continue}w.push(y(A=ke,Si,Pd).call(A,S))}}h.push(c.nodeValue.slice(0,u).replaceAll(Jh,""))}else if(c===this.editorDiv){let g=h,w=0;for(const S of this.editorDiv.childNodes)w++===u&&(g=d),g.push(y(E=ke,Si,Pd).call(E,S))}v(this,pn,`${h.join(`
`)}${r}${d.join(`
`)}`),y(this,et,Rd).call(this);const f=new Range;let p=h.reduce((g,w)=>g+w.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const w=g.nodeValue.length;if(p<=w){f.setStart(g,p),f.setEnd(g,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var a;let r=null;if(t instanceof bS){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:A,parent:{page:{pageNumber:E}}}=t;if(!m||m.length===0)return null;r=t={annotationType:se.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:A,pageIndex:E-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,s,i);return v(o,gn,t.fontSize),v(o,ns,V.makeHexColor(...t.color)),v(o,pn,y(a=ke,Si,Tm).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=ke._internalPadding*this.parentScale,i=this.getRect(s,s),r=Ae._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,ns)),o={annotationType:se.FREETEXT,color:r,fontSize:l(this,gn),value:y(this,et,LS).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!y(this,et,MS).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${l(this,gn)}px * var(--scale-factor))`,i.color=l(this,ns),s.replaceChildren();for(const o of l(this,pn).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=ke._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,pn)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ns=new WeakMap,pn=new WeakMap,th=new WeakMap,Po=new WeakMap,gn=new WeakMap,et=new WeakSet,TS=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,gn))*this.parentScale),v(this,gn,r),y(this,et,Td).call(this)},i=l(this,gn);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},PS=function(t){const s=r=>{v(this,ns,this.editorDiv.style.color=r)},i=l(this,ns);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RS=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(y(i=ke,Si,Pd).call(i,r)),s=r);return t.join(`
`)},Td=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Si=new WeakSet,Pd=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Jh,"")},Rd=function(){if(this.editorDiv.replaceChildren(),!!l(this,pn))for(const t of l(this,pn).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},LS=function(){return l(this,pn).replaceAll(""," ")},Tm=function(t){return t.replaceAll(" ","")},MS=function(t){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((a,c)=>a!==r[c])||t.pageIndex!==o},_(ke,Si),Q(ke,"_freeTextDefaultContent",""),Q(ke,"_internalPadding",0),Q(ke,"_defaultColor",null),Q(ke,"_defaultFontSize",10),Q(ke,"_type","freetext"),Q(ke,"_editorType",se.FREETEXT);let km=ke;class IS{toSVGPath(){Re("Abstract method `toSVGPath` must be implemented.")}get box(){Re("Abstract getter `box` must be implemented.")}serialize(e,t){Re("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Re("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Re("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var mn,ss,_l,Sl,Ps,ae,Ro,Lo,nh,sh,bl,El,sr,ih,If,Ff,ct,_c,FS,DS,NS,OS,jS,zS;const $s=class $s{constructor({x:e,y:t},s,i,r,o,a=0){_(this,ct);_(this,mn);_(this,ss,[]);_(this,_l);_(this,Sl);_(this,Ps,[]);_(this,ae,new Float64Array(18));_(this,Ro);_(this,Lo);_(this,nh);_(this,sh);_(this,bl);_(this,El);_(this,sr,[]);v(this,mn,s),v(this,El,r*i),v(this,Sl,o),l(this,ae).set([NaN,NaN,NaN,NaN,e,t],6),v(this,_l,a),v(this,sh,l($s,ih)*i),v(this,nh,l($s,Ff)*i),v(this,bl,i),l(this,sr).push(e,t)}isEmpty(){return isNaN(l(this,ae)[8])}add({x:e,y:t}){var M;v(this,Ro,e),v(this,Lo,t);const[s,i,r,o]=l(this,mn);let[a,c,u,h]=l(this,ae).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<l(this,nh))return!1;const m=p-l(this,sh),A=m/p,E=A*d,g=A*f;let w=a,S=c;a=u,c=h,u+=E,h+=g,(M=l(this,sr))==null||M.push(e,t);const b=-g/m,x=E/m,C=b*l(this,El),k=x*l(this,El);return l(this,ae).set(l(this,ae).subarray(2,8),0),l(this,ae).set([u+C,h+k],4),l(this,ae).set(l(this,ae).subarray(14,18),12),l(this,ae).set([u-C,h-k],16),isNaN(l(this,ae)[6])?(l(this,Ps).length===0&&(l(this,ae).set([a+C,c+k],2),l(this,Ps).push(NaN,NaN,NaN,NaN,(a+C-s)/r,(c+k-i)/o),l(this,ae).set([a-C,c-k],14),l(this,ss).push(NaN,NaN,NaN,NaN,(a-C-s)/r,(c-k-i)/o)),l(this,ae).set([w,S,a,c,u,h],6),!this.isEmpty()):(l(this,ae).set([w,S,a,c,u,h],6),Math.abs(Math.atan2(S-c,w-a)-Math.atan2(g,E))<Math.PI/2?([a,c,u,h]=l(this,ae).subarray(2,6),l(this,Ps).push(NaN,NaN,NaN,NaN,((a+u)/2-s)/r,((c+h)/2-i)/o),[a,c,w,S]=l(this,ae).subarray(14,18),l(this,ss).push(NaN,NaN,NaN,NaN,((w+a)/2-s)/r,((S+c)/2-i)/o),!0):([w,S,a,c,u,h]=l(this,ae).subarray(0,6),l(this,Ps).push(((w+5*a)/6-s)/r,((S+5*c)/6-i)/o,((5*a+u)/6-s)/r,((5*c+h)/6-i)/o,((a+u)/2-s)/r,((c+h)/2-i)/o),[u,h,a,c,w,S]=l(this,ae).subarray(12,18),l(this,ss).push(((w+5*a)/6-s)/r,((S+5*c)/6-i)/o,((5*a+u)/6-s)/r,((5*c+h)/6-i)/o,((a+u)/2-s)/r,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Ps),t=l(this,ss);if(isNaN(l(this,ae)[6])&&!this.isEmpty())return y(this,ct,FS).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);y(this,ct,NS).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return y(this,ct,DS).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,o){return new HS(e,t,s,i,r,o)}getOutlines(){var d;const e=l(this,Ps),t=l(this,ss),s=l(this,ae),[i,r,o,a]=l(this,mn),c=new Float64Array((((d=l(this,sr))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,sr)[f]-i)/o,c[f+1]=(l(this,sr)[f+1]-r)/a;if(c[c.length-2]=(l(this,Ro)-i)/o,c[c.length-1]=(l(this,Lo)-r)/a,isNaN(s[6])&&!this.isEmpty())return y(this,ct,OS).call(this,c);const u=new Float64Array(l(this,Ps).length+24+l(this,ss).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=y(this,ct,zS).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return y(this,ct,jS).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,mn),l(this,bl),l(this,_l),l(this,Sl))}};mn=new WeakMap,ss=new WeakMap,_l=new WeakMap,Sl=new WeakMap,Ps=new WeakMap,ae=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,nh=new WeakMap,sh=new WeakMap,bl=new WeakMap,El=new WeakMap,sr=new WeakMap,ih=new WeakMap,If=new WeakMap,Ff=new WeakMap,ct=new WeakSet,_c=function(){const e=l(this,ae).subarray(4,6),t=l(this,ae).subarray(16,18),[s,i,r,o]=l(this,mn);return[(l(this,Ro)+(e[0]-t[0])/2-s)/r,(l(this,Lo)+(e[1]-t[1])/2-i)/o,(l(this,Ro)+(t[0]-e[0])/2-s)/r,(l(this,Lo)+(t[1]-e[1])/2-i)/o]},FS=function(){const[e,t,s,i]=l(this,mn),[r,o,a,c]=y(this,ct,_c).call(this);return`M${(l(this,ae)[2]-e)/s} ${(l(this,ae)[3]-t)/i} L${(l(this,ae)[4]-e)/s} ${(l(this,ae)[5]-t)/i} L${r} ${o} L${a} ${c} L${(l(this,ae)[16]-e)/s} ${(l(this,ae)[17]-t)/i} L${(l(this,ae)[14]-e)/s} ${(l(this,ae)[15]-t)/i} Z`},DS=function(e){const t=l(this,ss);e.push(`L${t[4]} ${t[5]} Z`)},NS=function(e){const[t,s,i,r]=l(this,mn),o=l(this,ae).subarray(4,6),a=l(this,ae).subarray(16,18),[c,u,h,d]=y(this,ct,_c).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-s)/r} L${c} ${u} L${h} ${d} L${(a[0]-t)/i} ${(a[1]-s)/r}`)},OS=function(e){const t=l(this,ae),[s,i,r,o]=l(this,mn),[a,c,u,h]=y(this,ct,_c).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,l(this,mn),l(this,bl),l(this,_l),l(this,Sl))},jS=function(e,t){const s=l(this,ss);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},zS=function(e,t){const s=l(this,ae).subarray(4,6),i=l(this,ae).subarray(16,18),[r,o,a,c]=l(this,mn),[u,h,d,f]=y(this,ct,_c).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/c],t),t+=24},_($s,ih,8),_($s,If,2),_($s,Ff,l($s,ih)+l($s,If));let gf=$s;var xl,Mo,oi,rh,vn,oh,Xe,an,Sc,bc,BS;class HS extends IS{constructor(t,s,i,r,o,a){super();_(this,an);_(this,xl);_(this,Mo,null);_(this,oi);_(this,rh);_(this,vn);_(this,oh);_(this,Xe);v(this,Xe,t),v(this,vn,s),v(this,xl,i),v(this,oh,r),v(this,oi,o),v(this,rh,a),y(this,an,BS).call(this,a);const{x:c,y:u,width:h,height:d}=l(this,Mo);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-c)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,Xe)[4]} ${l(this,Xe)[5]}`];for(let s=6,i=l(this,Xe).length;s<i;s+=6){if(isNaN(l(this,Xe)[s])){t.push(`L${l(this,Xe)[s+4]} ${l(this,Xe)[s+5]}`);continue}t.push(`C${l(this,Xe)[s]} ${l(this,Xe)[s+1]} ${l(this,Xe)[s+2]} ${l(this,Xe)[s+3]} ${l(this,Xe)[s+4]} ${l(this,Xe)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],o){const a=i-t,c=r-s;let u,h;switch(o){case 0:u=y(this,an,Sc).call(this,l(this,Xe),t,r,a,-c),h=y(this,an,Sc).call(this,l(this,vn),t,r,a,-c);break;case 90:u=y(this,an,bc).call(this,l(this,Xe),t,s,a,c),h=y(this,an,bc).call(this,l(this,vn),t,s,a,c);break;case 180:u=y(this,an,Sc).call(this,l(this,Xe),i,s,-a,c),h=y(this,an,Sc).call(this,l(this,vn),i,s,-a,c);break;case 270:u=y(this,an,bc).call(this,l(this,Xe),i,r,-a,-c),h=y(this,an,bc).call(this,l(this,vn),i,r,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,Mo)}newOutliner(t,s,i,r,o,a=0){return new gf(t,s,i,r,o,a)}getNewOutline(t,s){const{x:i,y:r,width:o,height:a}=l(this,Mo),[c,u,h,d]=l(this,xl),f=o*h,p=a*d,m=i*h+c,A=r*d+u,E=this.newOutliner({x:l(this,vn)[0]*f+m,y:l(this,vn)[1]*p+A},l(this,xl),l(this,oh),t,l(this,rh),s??l(this,oi));for(let g=2;g<l(this,vn).length;g+=2)E.add({x:l(this,vn)[g]*f+m,y:l(this,vn)[g+1]*p+A});return E.getOutlines()}get mustRemoveSelfIntersections(){return!0}}xl=new WeakMap,Mo=new WeakMap,oi=new WeakMap,rh=new WeakMap,vn=new WeakMap,oh=new WeakMap,Xe=new WeakMap,an=new WeakSet,Sc=function(t,s,i,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=s+t[c]*r,a[c+1]=i+t[c+1]*o;return a},bc=function(t,s,i,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=s+t[c+1]*r,a[c+1]=i+t[c]*o;return a},BS=function(t){const s=l(this,Xe);let i=s[4],r=s[5],o=i,a=r,c=i,u=r,h=i,d=r;const f=t?Math.max:Math.min;for(let g=6,w=s.length;g<w;g+=6){if(isNaN(s[g]))o=Math.min(o,s[g+4]),a=Math.min(a,s[g+5]),c=Math.max(c,s[g+4]),u=Math.max(u,s[g+5]),d<s[g+5]?(h=s[g+4],d=s[g+5]):d===s[g+5]&&(h=f(h,s[g+4]));else{const S=V.bezierBoundingBox(i,r,...s.slice(g,g+6));o=Math.min(o,S[0]),a=Math.min(a,S[1]),c=Math.max(c,S[2]),u=Math.max(u,S[3]),d<S[3]?(h=S[2],d=S[3]):d===S[3]&&(h=f(h,S[2]))}i=s[g+4],r=s[g+5]}const p=o-l(this,oi),m=a-l(this,oi),A=c-o+2*l(this,oi),E=u-a+2*l(this,oi);v(this,Mo,{x:p,y:m,width:A,height:E,lastPoint:[h,d]})};var ah,ir,is,Yt,US,Ld,VS,$S,Pm;class V0{constructor(e,t=0,s=0,i=!0){_(this,Yt);_(this,ah);_(this,ir,[]);_(this,is,[]);let r=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:E,y:g,width:w,height:S}of e){const b=Math.floor((E-t)/u)*u,x=Math.ceil((E+w+t)/u)*u,C=Math.floor((g-t)/u)*u,k=Math.ceil((g+S+t)/u)*u,P=[b,C,k,!0],M=[x,C,k,!1];l(this,ir).push(P,M),r=Math.min(r,b),o=Math.max(o,x),a=Math.min(a,C),c=Math.max(c,k)}const h=o-r+2*s,d=c-a+2*s,f=r-s,p=a-s,m=l(this,ir).at(i?-1:-2),A=[m[0],m[2]];for(const E of l(this,ir)){const[g,w,S]=E;E[0]=(g-f)/h,E[1]=(w-p)/d,E[2]=(S-p)/d}v(this,ah,{x:f,y:p,width:h,height:d,lastPoint:A})}getOutlines(){l(this,ir).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of l(this,ir))t[3]?(e.push(...y(this,Yt,Pm).call(this,t)),y(this,Yt,VS).call(this,t)):(y(this,Yt,$S).call(this,t),e.push(...y(this,Yt,Pm).call(this,t)));return y(this,Yt,US).call(this,e)}}ah=new WeakMap,ir=new WeakMap,is=new WeakMap,Yt=new WeakSet,US=function(e){const t=[],s=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,c,u,h,d]=o;s.delete(o);let f=a,p=c;for(r=[a,u],i.push(r);;){let m;if(s.has(h))m=h;else if(s.has(d))m=d;else break;s.delete(m),[a,c,u,h,d]=m,f!==a&&(r.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}r.push(f,p)}return new uk(i,l(this,ah))},Ld=function(e){const t=l(this,is);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,o=t[r][0];if(o===e)return r;o<e?s=r+1:i=r-1}return i+1},VS=function([,e,t]){const s=y(this,Yt,Ld).call(this,e);l(this,is).splice(s,0,[e,t])},$S=function([,e,t]){const s=y(this,Yt,Ld).call(this,e);for(let i=s;i<l(this,is).length;i++){const[r,o]=l(this,is)[i];if(r!==e)break;if(r===e&&o===t){l(this,is).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=l(this,is)[i];if(r!==e)break;if(r===e&&o===t){l(this,is).splice(i,1);return}}},Pm=function(e){const[t,s,i]=e,r=[[t,s,i]],o=y(this,Yt,Ld).call(this,i);for(let a=0;a<o;a++){const[c,u]=l(this,is)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([t,u,p])}}}return r};var lh,Cl;class uk extends IS{constructor(t,s){super();_(this,lh);_(this,Cl);v(this,Cl,t),v(this,lh,s)}toSVGPath(){const t=[];for(const s of l(this,Cl)){let[i,r]=s;t.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===i?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],o){const a=[],c=i-t,u=r-s;for(const h of l(this,Cl)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return l(this,lh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}lh=new WeakMap,Cl=new WeakMap;class Rm extends gf{newFreeDrawOutline(e,t,s,i,r,o){return new hk(e,t,s,i,r,o)}get classNamesForDrawing(){return["highlight","free"]}}class hk extends HS{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,s,i,r,o=0){return new Rm(e,t,s,i,r,o)}}var rs,Io,kl,it,ch,Tl,uh,hh,rr,os,Pl,dh,be,Lm,Mm,Im,zr,WS,Ii;const Jt=class Jt{constructor({editor:e=null,uiManager:t=null}){_(this,be);_(this,rs,null);_(this,Io,null);_(this,kl);_(this,it,null);_(this,ch,!1);_(this,Tl,!1);_(this,uh,null);_(this,hh);_(this,rr,null);_(this,os,null);_(this,Pl);var s;e?(v(this,Tl,!1),v(this,Pl,Z.HIGHLIGHT_COLOR),v(this,uh,e)):(v(this,Tl,!0),v(this,Pl,Z.HIGHLIGHT_DEFAULT_COLOR)),v(this,os,(e==null?void 0:e._uiManager)||t),v(this,hh,l(this,os)._eventBus),v(this,kl,(e==null?void 0:e.color)||((s=l(this,os))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Jt,dh)||v(Jt,dh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return he(this,"_keyboardManager",new xh([[["Escape","mac+Escape"],Jt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Jt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Jt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Jt.prototype._moveToPrevious],[["Home","mac+Home"],Jt.prototype._moveToBeginning],[["End","mac+End"],Jt.prototype._moveToEnd]]))}renderButton(){const e=v(this,rs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,os)._signal;e.addEventListener("click",y(this,be,zr).bind(this),{signal:t}),e.addEventListener("keydown",y(this,be,Im).bind(this),{signal:t});const s=v(this,Io,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,kl),e.append(s),e}renderMainDropdown(){const e=v(this,it,y(this,be,Lm).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,rs)){y(this,be,zr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&y(this,be,Mm).call(this,t,e)}_moveToNext(e){var t,s;if(!l(this,be,Ii)){y(this,be,zr).call(this,e);return}if(e.target===l(this,rs)){(t=l(this,it).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=l(this,it))==null?void 0:t.firstChild)||e.target===l(this,rs)){l(this,be,Ii)&&this._hideDropdownFromKeyboard();return}l(this,be,Ii)||y(this,be,zr).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!l(this,be,Ii)){y(this,be,zr).call(this,e);return}(t=l(this,it).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,be,Ii)){y(this,be,zr).call(this,e);return}(t=l(this,it).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,it))==null||e.classList.add("hidden"),(t=l(this,rr))==null||t.abort(),v(this,rr,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Tl)){if(!l(this,be,Ii)){(e=l(this,uh))==null||e.unselect();return}this.hideDropdown(),l(this,rs).focus({preventScroll:!0,focusVisible:l(this,ch)})}}updateColor(e){if(l(this,Io)&&(l(this,Io).style.backgroundColor=e),!l(this,it))return;const t=l(this,os).highlightColors.values();for(const s of l(this,it).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,rs))==null||e.remove(),v(this,rs,null),v(this,Io,null),(t=l(this,it))==null||t.remove(),v(this,it,null)}};rs=new WeakMap,Io=new WeakMap,kl=new WeakMap,it=new WeakMap,ch=new WeakMap,Tl=new WeakMap,uh=new WeakMap,hh=new WeakMap,rr=new WeakMap,os=new WeakMap,Pl=new WeakMap,dh=new WeakMap,be=new WeakSet,Lm=function(){const e=document.createElement("div"),t=l(this,os)._signal;e.addEventListener("contextmenu",$n,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of l(this,os).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",l(Jt,dh)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===l(this,kl)),r.addEventListener("click",y(this,be,Mm).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",y(this,be,Im).bind(this),{signal:t}),e},Mm=function(e,t){t.stopPropagation(),l(this,hh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Pl),value:e})},Im=function(e){Jt._keyboardManager.exec(this,e)},zr=function(e){if(l(this,be,Ii)){this.hideDropdown();return}if(v(this,ch,e.detail===0),l(this,rr)||(v(this,rr,new AbortController),window.addEventListener("pointerdown",y(this,be,WS).bind(this),{signal:l(this,os).combinedSignal(l(this,rr))})),l(this,it)){l(this,it).classList.remove("hidden");return}const t=v(this,it,y(this,be,Lm).call(this));l(this,rs).append(t)},WS=function(e){var t;(t=l(this,it))!=null&&t.contains(e.target)||this.hideDropdown()},Ii=function(){return l(this,it)&&!l(this,it).classList.contains("hidden")},_(Jt,dh,null);let mf=Jt;var Rl,fh,ai,Fo,Ll,Mn,ph,gh,Do,as,It,nn,Ml,li,rt,Il,In,mh,te,Fm,Md,GS,XS,qS,Dm,Hr,jn,va,YS,Id,Ec,KS,QS,ZS,JS,eb;const me=class me extends Ae{constructor(t){super({...t,name:"highlightEditor"});_(this,te);_(this,Rl,null);_(this,fh,0);_(this,ai);_(this,Fo,null);_(this,Ll,null);_(this,Mn,null);_(this,ph,null);_(this,gh,0);_(this,Do,null);_(this,as,null);_(this,It,null);_(this,nn,!1);_(this,Ml,null);_(this,li);_(this,rt,null);_(this,Il,"");_(this,In);_(this,mh,"");this.color=t.color||me._defaultColor,v(this,In,t.thickness||me._defaultThickness),v(this,li,t.opacity||me._defaultOpacity),v(this,ai,t.boxes||null),v(this,mh,t.methodOfCreation||""),v(this,Il,t.text||""),this._isDraggable=!1,t.highlightId>-1?(v(this,nn,!0),y(this,te,Md).call(this,t),y(this,te,Hr).call(this)):l(this,ai)&&(v(this,Rl,t.anchorNode),v(this,fh,t.anchorOffset),v(this,ph,t.focusNode),v(this,gh,t.focusOffset),y(this,te,Fm).call(this),y(this,te,Hr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=me.prototype;return he(this,"_keyboardManager",new xh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,nn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,In),methodOfCreation:l(this,mh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;Ae.initialize(t,s),me._defaultColor||(me._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Z.HIGHLIGHT_DEFAULT_COLOR:me._defaultColor=s;break;case Z.HIGHLIGHT_THICKNESS:me._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return l(this,Ml)}updateParams(t,s){switch(t){case Z.HIGHLIGHT_COLOR:y(this,te,GS).call(this,s);break;case Z.HIGHLIGHT_THICKNESS:y(this,te,XS).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Z.HIGHLIGHT_DEFAULT_COLOR,me._defaultColor],[Z.HIGHLIGHT_THICKNESS,me._defaultThickness]]}get propertiesToUpdate(){return[[Z.HIGHLIGHT_COLOR,this.color||me._defaultColor],[Z.HIGHLIGHT_THICKNESS,l(this,In)||me._defaultThickness],[Z.HIGHLIGHT_FREE,l(this,nn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(v(this,Ll,new mf({editor:this})),t.addColorPicker(l(this,Ll))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(y(this,te,Ec).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,y(this,te,Ec).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){y(this,te,Dm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(y(this,te,Hr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?y(this,te,Dm).call(this):t&&(y(this,te,Hr).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,o,a;const{drawLayer:s}=this.parent;let i;l(this,nn)?(t=(t-this.rotation+360)%360,i=y(r=me,jn,va).call(r,l(this,as).box,t)):i=y(o=me,jn,va).call(o,this,t),s.rotate(l(this,It),t),s.rotate(l(this,rt),t),s.updateBox(l(this,It),i),s.updateBox(l(this,rt),y(a=me,jn,va).call(a,l(this,Mn).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,Il)&&(t.setAttribute("aria-label",l(this,Il)),t.setAttribute("role","mark")),l(this,nn)?t.classList.add("free"):this.div.addEventListener("keydown",y(this,te,YS).bind(this),{signal:this._uiManager._signal});const s=v(this,Do,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,Fo);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),ff(this,l(this,Do),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,rt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,rt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:y(this,te,Id).call(this,!0);break;case 1:case 3:y(this,te,Id).call(this,!1);break}}select(){var t,s;super.select(),l(this,rt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,rt),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(l(this,rt),"selected"))}unselect(){var t;super.unselect(),l(this,rt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,rt),"selected"),l(this,nn)||y(this,te,Id).call(this,!1))}get _mustFixPosition(){return!l(this,nn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,It),t),this.parent.drawLayer.show(l(this,rt),t))}static startHighlighting(t,s,{target:i,x:r,y:o}){const{x:a,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=A=>{A.preventDefault(),A.stopPropagation()},m=A=>{d.abort(),y(this,jn,JS).call(this,t,A)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",$n,{signal:f}),i.addEventListener("pointermove",y(this,jn,ZS).bind(this,t),{signal:f}),this._freeHighlight=new Rm({x:r,y:o},[a,c,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,s,i){var A,E,g,w;let r=null;if(t instanceof xS){const{data:{quadPoints:S,rect:b,rotation:x,id:C,color:k,opacity:P,popupRef:M},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:se.HIGHLIGHT,color:Array.from(k),opacity:P,quadPoints:S,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:x,id:C,deleted:!1,popupRef:M}}else if(t instanceof cy){const{data:{inkLists:S,rect:b,rotation:x,id:C,color:k,borderStyle:{rawWidth:P},popupRef:M},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:se.HIGHLIGHT,color:Array.from(k),thickness:P,inkLists:S,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:x,id:C,deleted:!1,popupRef:M}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,h=await super.deserialize(t,s,i);h.color=V.makeHexColor(...o),v(h,li,u||1),c&&v(h,In,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(a){const S=v(h,ai,[]);for(let b=0;b<a.length;b+=8)S.push({x:(a[b]-p)/d,y:1-(a[b+1]-m)/f,width:(a[b+2]-a[b])/d,height:(a[b+1]-a[b+5])/f});y(A=h,te,Fm).call(A),y(E=h,te,Hr).call(E),h.rotate(h.rotation)}else if(c){v(h,nn,!0);const S=c[0],b={x:S[0]-p,y:f-(S[1]-m)},x=new Rm(b,[0,0,d,f],1,l(h,In)/2,!0,.001);for(let P=0,M=S.length;P<M;P+=2)b.x=S[P]-p,b.y=f-(S[P+1]-m),x.add(b);const{id:C,clipPathId:k}=s.drawLayer.draw(x,h.color,h._defaultOpacity,!0);y(g=h,te,Md).call(g,{highlightOutlines:x.getOutlines(),highlightId:C,clipPathId:k}),y(w=h,te,Hr).call(w)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=Ae._colorManager.convert(this.color),r={annotationType:se.HIGHLIGHT,color:i,opacity:l(this,li),thickness:l(this,In),quadPoints:y(this,te,KS).call(this),outlines:y(this,te,QS).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:y(this,te,Ec).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!y(this,te,eb).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Rl=new WeakMap,fh=new WeakMap,ai=new WeakMap,Fo=new WeakMap,Ll=new WeakMap,Mn=new WeakMap,ph=new WeakMap,gh=new WeakMap,Do=new WeakMap,as=new WeakMap,It=new WeakMap,nn=new WeakMap,Ml=new WeakMap,li=new WeakMap,rt=new WeakMap,Il=new WeakMap,In=new WeakMap,mh=new WeakMap,te=new WeakSet,Fm=function(){const t=new V0(l(this,ai),.001);v(this,as,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,as).box;const s=new V0(l(this,ai),.0025,.001,this._uiManager.direction==="ltr");v(this,Mn,s.getOutlines());const{lastPoint:i}=l(this,Mn).box;v(this,Ml,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Md=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var d,f;if(v(this,as,t),v(this,Mn,t.getNewOutline(l(this,In)/2+1.5,.0025)),s>=0)v(this,It,s),v(this,Fo,i),this.parent.drawLayer.finalizeLine(s,t),v(this,rt,this.parent.drawLayer.drawOutline(l(this,Mn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,It),t),this.parent.drawLayer.updateBox(l(this,It),y(d=me,jn,va).call(d,l(this,as).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,rt),l(this,Mn)),this.parent.drawLayer.updateBox(l(this,rt),y(f=me,jn,va).call(f,l(this,Mn).box,p))}const{x:o,y:a,width:c,height:u}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=l(this,Mn).box;v(this,Ml,[(h[0]-o)/c,(h[1]-a)/u])},GS=function(t){const s=(o,a)=>{var c,u,h;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(l(this,It),o),(u=l(this,Ll))==null||u.updateColor(o),v(this,li,a),(h=this.parent)==null||h.drawLayer.changeOpacity(l(this,It),a)},i=this.color,r=l(this,li);this.addCommands({cmd:s.bind(this,t,me._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},XS=function(t){const s=l(this,In),i=r=>{v(this,In,r),y(this,te,qS).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},qS=function(t){if(!l(this,nn))return;y(this,te,Md).call(this,{highlightOutlines:l(this,as).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},Dm=function(){l(this,It)===null||!this.parent||(this.parent.drawLayer.remove(l(this,It)),v(this,It,null),this.parent.drawLayer.remove(l(this,rt)),v(this,rt,null))},Hr=function(t=this.parent){l(this,It)===null&&({id:Bt(this,It)._,clipPathId:Bt(this,Fo)._}=t.drawLayer.draw(l(this,as),this.color,l(this,li)),v(this,rt,t.drawLayer.drawOutline(l(this,Mn))),l(this,Do)&&(l(this,Do).style.clipPath=l(this,Fo)))},jn=new WeakSet,va=function({x:t,y:s,width:i,height:r},o){switch(o){case 90:return{x:1-s-r,y:t,width:r,height:i};case 180:return{x:1-t-i,y:1-s-r,width:i,height:r};case 270:return{x:s,y:1-t-i,width:r,height:i}}return{x:t,y:s,width:i,height:r}},YS=function(t){me._keyboardManager.exec(this,t)},Id=function(t){if(!l(this,Rl))return;const s=window.getSelection();t?s.setPosition(l(this,Rl),l(this,fh)):s.setPosition(l(this,ph),l(this,gh))},Ec=function(){return l(this,nn)?this.rotation:0},KS=function(){if(l(this,nn))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=l(this,ai),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*t+i,m=(1-h-f)*s+r;a[c]=a[c+4]=p,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=p+d*t,a[c+5]=a[c+7]=m+f*s,c+=8}return a},QS=function(t){return l(this,as).serialize(t,y(this,te,Ec).call(this))},ZS=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},JS=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},eb=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},_(me,jn),Q(me,"_defaultColor",null),Q(me,"_defaultOpacity",1),Q(me,"_defaultThickness",12),Q(me,"_type","highlight"),Q(me,"_editorType",se.HIGHLIGHT),Q(me,"_freeHighlightId",-1),Q(me,"_freeHighlight",null),Q(me,"_freeHighlightClipId","");let vf=me;var No,Oo,Rs,ci,Fn,jo,zo,Ho,ui,Fl,Bo,Uo,or,N,tb,nb,sb,ib,Om,rb,jm,ob,ab,lb,cb,ub,Br,zm,Hm,Bm,Fd,Dd,ya,Um,Nd,Ti,hb,Vm,db,fb,$m,Od,xc;const De=class De extends Ae{constructor(t){super({...t,name:"inkEditor"});_(this,N);_(this,No,0);_(this,Oo,0);_(this,Rs,null);_(this,ci,new Path2D);_(this,Fn,!1);_(this,jo,null);_(this,zo,!1);_(this,Ho,!1);_(this,ui,null);_(this,Fl,null);_(this,Bo,0);_(this,Uo,0);_(this,or,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,s){Ae.initialize(t,s)}static updateDefaultParams(t,s){switch(t){case Z.INK_THICKNESS:De._defaultThickness=s;break;case Z.INK_COLOR:De._defaultColor=s;break;case Z.INK_OPACITY:De._defaultOpacity=s/100;break}}updateParams(t,s){switch(t){case Z.INK_THICKNESS:y(this,N,tb).call(this,s);break;case Z.INK_COLOR:y(this,N,nb).call(this,s);break;case Z.INK_OPACITY:y(this,N,sb).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Z.INK_THICKNESS,De._defaultThickness],[Z.INK_COLOR,De._defaultColor||Ae._defaultLineColor],[Z.INK_OPACITY,Math.round(De._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Z.INK_THICKNESS,this.thickness||De._defaultThickness],[Z.INK_COLOR,this.color||De._defaultColor||Ae._defaultLineColor],[Z.INK_OPACITY,Math.round(100*(this.opacity??De._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(y(this,N,Fd).call(this),y(this,N,Dd).call(this)),this.isAttachedToDOM||(this.parent.add(this),y(this,N,ya).call(this)),y(this,N,xc).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,Rs)&&(clearTimeout(l(this,Rs)),v(this,Rs,null)),(t=l(this,ui))==null||t.disconnect(),v(this,ui,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,s]=this.parentDimensions,i=this.width*t,r=this.height*s;this.setDimensions(i,r)}enableEditMode(){l(this,Fn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,y(this,N,zm).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),y(this,N,Hm).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,Fn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),v(this,Fn,!0),this.div.classList.add("disabled"),y(this,N,xc).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,Fn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),y(this,N,rb).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),y(this,N,jm).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),y(this,N,Bm).call(this,t)}canvasPointerleave(t){y(this,N,Bm).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,Fn)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,r,o,a]=y(this,N,ib).call(this);if(this.setAt(i,r,0,0),this.setDims(o,a),y(this,N,Fd).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(t*c,s*u,this.width*c,this.height*u),v(this,Ho,!0),y(this,N,ya).call(this),this.setDims(this.width*c,this.height*u),y(this,N,Br).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return y(this,N,Dd).call(this),this.div}setDimensions(t,s){const i=Math.round(t),r=Math.round(s);if(l(this,Bo)===i&&l(this,Uo)===r)return;v(this,Bo,i),v(this,Uo,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=s/a,this.fixAndSetPosition(),l(this,Fn)&&y(this,N,Um).call(this,t,s),y(this,N,ya).call(this),y(this,N,Br).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,s,i){var E,g,w;if(t instanceof cy)return null;const r=await super.deserialize(t,s,i);r.thickness=t.thickness,r.color=V.makeHexColor(...t.color),r.opacity=t.opacity;const[o,a]=r.pageDimensions,c=r.width*o,u=r.height*a,h=r.parentScale,d=t.thickness/2;v(r,Fn,!0),v(r,Bo,Math.round(c)),v(r,Uo,Math.round(u));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:S}of f){S=y(E=De,Ti,db).call(E,S,p,m);const b=[];r.paths.push(b);let x=h*(S[0]-d),C=h*(S[1]-d);for(let P=2,M=S.length;P<M;P+=6){const I=h*(S[P]-d),D=h*(S[P+1]-d),Y=h*(S[P+2]-d),X=h*(S[P+3]-d),W=h*(S[P+4]-d),K=h*(S[P+5]-d);b.push([[x,C],[I,D],[Y,X],[W,K]]),x=W,C=K}const k=y(this,Ti,hb).call(this,b);r.bezierPath2D.push(k)}const A=y(g=r,N,$m).call(g);return v(r,Oo,Math.max(Ae.MIN_SIZE,A[2]-A[0])),v(r,No,Math.max(Ae.MIN_SIZE,A[3]-A[1])),y(w=r,N,Um).call(w,c,u),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),s=Ae._colorManager.convert(this.ctx.strokeStyle);return{annotationType:se.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:y(this,N,fb).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};No=new WeakMap,Oo=new WeakMap,Rs=new WeakMap,ci=new WeakMap,Fn=new WeakMap,jo=new WeakMap,zo=new WeakMap,Ho=new WeakMap,ui=new WeakMap,Fl=new WeakMap,Bo=new WeakMap,Uo=new WeakMap,or=new WeakMap,N=new WeakSet,tb=function(t){const s=r=>{this.thickness=r,y(this,N,xc).call(this)},i=this.thickness;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},nb=function(t){const s=r=>{this.color=r,y(this,N,Br).call(this)},i=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sb=function(t){const s=r=>{this.opacity=r,y(this,N,Br).call(this)};t/=100;const i=this.opacity;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ib=function(){const{parentRotation:t,parentDimensions:[s,i]}=this;switch(t){case 90:return[0,i,i,s];case 180:return[s,i,s,i];case 270:return[s,0,i,s];default:return[0,0,s,i]}},Om=function(){const{ctx:t,color:s,opacity:i,thickness:r,parentScale:o,scaleFactor:a}=this;t.lineWidth=r*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${s}${I1(i)}`},rb=function(t,s){this.canvas.addEventListener("contextmenu",$n,{signal:this._uiManager._signal}),y(this,N,Hm).call(this),v(this,jo,new AbortController);const i=this._uiManager.combinedSignal(l(this,jo));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,l(this,Ho)||(v(this,Ho,!0),y(this,N,ya).call(this),this.thickness||(this.thickness=De._defaultThickness),this.color||(this.color=De._defaultColor||Ae._defaultLineColor),this.opacity??(this.opacity=De._defaultOpacity)),this.currentPath.push([t,s]),v(this,zo,!1),y(this,N,Om).call(this),v(this,or,()=>{y(this,N,lb).call(this),l(this,or)&&window.requestAnimationFrame(l(this,or))}),window.requestAnimationFrame(l(this,or))},jm=function(t,s){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&s===r)return;const o=this.currentPath;let a=l(this,ci);if(o.push([t,s]),v(this,zo,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,s);return}o.length===3&&(v(this,ci,a=new Path2D),a.moveTo(...o[0])),y(this,N,cb).call(this,a,...o.at(-3),...o.at(-2),t,s)},ob=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,ci).lineTo(...t)},ab=function(t,s){v(this,or,null),t=Math.min(Math.max(t,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),y(this,N,jm).call(this,t,s),y(this,N,ob).call(this);let i;if(this.currentPath.length!==1)i=y(this,N,ub).call(this);else{const u=[t,s];i=[[u,u.slice(),u.slice(),u]]}const r=l(this,ci),o=this.currentPath;this.currentPath=[],v(this,ci,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(i),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(y(this,N,Fd).call(this),y(this,N,Dd).call(this)),y(this,N,xc).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},lb=function(){if(!l(this,zo))return;v(this,zo,!1);const t=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),i=s.map(a=>a[0]),r=s.map(a=>a[1]);Math.min(...i)-t,Math.max(...i)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(l(this,ci)),o.restore()},cb=function(t,s,i,r,o,a,c){const u=(s+r)/2,h=(i+o)/2,d=(r+a)/2,f=(o+c)/2;t.bezierCurveTo(u+2*(r-u)/3,h+2*(o-h)/3,d+2*(r-d)/3,f+2*(o-f)/3,d,f)},ub=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const s=[];let i,[r,o]=t[0];for(i=1;i<t.length-2;i++){const[p,m]=t[i],[A,E]=t[i+1],g=(p+A)/2,w=(m+E)/2,S=[r+2*(p-r)/3,o+2*(m-o)/3],b=[g+2*(p-g)/3,w+2*(m-w)/3];s.push([[r,o],S,b,[g,w]]),[r,o]=[g,w]}const[a,c]=t[i],[u,h]=t[i+1],d=[r+2*(a-r)/3,o+2*(c-o)/3],f=[u+2*(a-u)/3,h+2*(c-h)/3];return s.push([[r,o],d,f,[u,h]]),s},Br=function(){if(this.isEmpty()){y(this,N,Nd).call(this);return}y(this,N,Om).call(this);const{canvas:t,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),y(this,N,Nd).call(this);for(const i of this.bezierPath2D)s.stroke(i)},zm=function(){if(l(this,Fl))return;v(this,Fl,new AbortController);const t=this._uiManager.combinedSignal(l(this,Fl));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},Hm=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},Bm=function(t){var s;(s=l(this,jo))==null||s.abort(),v(this,jo,null),y(this,N,zm).call(this),l(this,Rs)&&clearTimeout(l(this,Rs)),v(this,Rs,setTimeout(()=>{v(this,Rs,null),this.canvas.removeEventListener("contextmenu",$n)},10)),y(this,N,ab).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Fd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Dd=function(){v(this,ui,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),l(this,ui).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,ui))==null||t.disconnect(),v(this,ui,null)},{once:!0})},ya=function(){if(!l(this,Ho))return;const[t,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*s),y(this,N,Nd).call(this)},Um=function(t,s){const i=y(this,N,Od).call(this),r=(t-i)/l(this,Oo),o=(s-i)/l(this,No);this.scaleFactor=Math.min(r,o)},Nd=function(){const t=y(this,N,Od).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ti=new WeakSet,hb=function(t){const s=new Path2D;for(let i=0,r=t.length;i<r;i++){const[o,a,c,u]=t[i];i===0&&s.moveTo(...o),s.bezierCurveTo(a[0],a[1],c[0],c[1],u[0],u[1])}return s},Vm=function(t,s,i){const[r,o,a,c]=s;switch(i){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+r,t[u+1]=d+o}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]+=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=a-t[u+1],t[u+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},db=function(t,s,i){const[r,o,a,c]=s;switch(i){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-o,t[u+1]=d-r}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]-=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=c-t[u+1],t[u+1]=a-d}break;default:throw new Error("Invalid rotation")}return t},fb=function(t,s,i,r){var h,d;const o=[],a=this.thickness/2,c=t*s+a,u=t*i+a;for(const f of this.paths){const p=[],m=[];for(let A=0,E=f.length;A<E;A++){const[g,w,S,b]=f[A];if(g[0]===b[0]&&g[1]===b[1]&&E===1){const X=t*g[0]+c,W=t*g[1]+u;p.push(X,W),m.push(X,W);break}const x=t*g[0]+c,C=t*g[1]+u,k=t*w[0]+c,P=t*w[1]+u,M=t*S[0]+c,I=t*S[1]+u,D=t*b[0]+c,Y=t*b[1]+u;A===0&&(p.push(x,C),m.push(x,C)),p.push(k,P,M,I,D,Y),m.push(k,P),A===E-1&&m.push(D,Y)}o.push({bezier:y(h=De,Ti,Vm).call(h,p,r,this.rotation),points:y(d=De,Ti,Vm).call(d,m,r,this.rotation)})}return o},$m=function(){let t=1/0,s=-1/0,i=1/0,r=-1/0;for(const o of this.paths)for(const[a,c,u,h]of o){const d=V.bezierBoundingBox(...a,...c,...u,...h);t=Math.min(t,d[0]),i=Math.min(i,d[1]),s=Math.max(s,d[2]),r=Math.max(r,d[3])}return[t,i,s,r]},Od=function(){return l(this,Fn)?Math.ceil(this.thickness*this.parentScale):0},xc=function(t=!1){if(this.isEmpty())return;if(!l(this,Fn)){y(this,N,Br).call(this);return}const s=y(this,N,$m).call(this),i=y(this,N,Od).call(this);v(this,Oo,Math.max(Ae.MIN_SIZE,s[2]-s[0])),v(this,No,Math.max(Ae.MIN_SIZE,s[3]-s[1]));const r=Math.ceil(i+l(this,Oo)*this.scaleFactor),o=Math.ceil(i+l(this,No)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=r/a,this.height=o/c,this.setAspectRatio(r,o);const u=this.translationX,h=this.translationY;this.translationX=-s[0],this.translationY=-s[1],y(this,N,ya).call(this),y(this,N,Br).call(this),v(this,Bo,r),v(this,Uo,o),this.setDims(r,o);const d=t?i/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},_(De,Ti),Q(De,"_defaultColor",null),Q(De,"_defaultOpacity",1),Q(De,"_defaultThickness",1),Q(De,"_type","ink"),Q(De,"_editorType",se.INK);let Nm=De;var Oe,St,ar,hi,lr,Dl,Ls,di,Ms,yn,Nl,ue,Cc,kc,jd,Gm,pb,zd,Xm,Hd,gb,mb;const zc=class zc extends Ae{constructor(t){super({...t,name:"stampEditor"});_(this,ue);_(this,Oe,null);_(this,St,null);_(this,ar,null);_(this,hi,null);_(this,lr,null);_(this,Dl,"");_(this,Ls,null);_(this,di,null);_(this,Ms,null);_(this,yn,!1);_(this,Nl,!1);v(this,hi,t.bitmapUrl),v(this,lr,t.bitmapFile)}static initialize(t,s){Ae.initialize(t,s)}static get supportedTypes(){return he(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return he(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(se.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,s;l(this,St)&&(v(this,Oe,null),this._uiManager.imageManager.deleteId(l(this,St)),(t=l(this,Ls))==null||t.remove(),v(this,Ls,null),(s=l(this,di))==null||s.disconnect(),v(this,di,null),l(this,Ms)&&(clearTimeout(l(this,Ms)),v(this,Ms,null))),super.remove()}rebuild(){if(!this.parent){l(this,St)&&y(this,ue,jd).call(this);return}super.rebuild(),this.div!==null&&(l(this,St)&&l(this,Ls)===null&&y(this,ue,jd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,ar)||l(this,Oe)||l(this,hi)||l(this,lr)||l(this,St))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Oe)?y(this,ue,Gm).call(this):y(this,ue,jd).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,s*r,this.width*i,this.height*r)}return this.div}copyCanvas(t,s,i=!1){var p;t||(t=224);const{width:r,height:o}=l(this,Oe),a=new Bg;let c=l(this,Oe),u=r,h=o,d=null;if(s){if(r>s||o>s){const P=Math.min(s/r,s/o);u=Math.floor(r*P),h=Math.floor(o*P)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*a.sx),A=d.height=Math.ceil(h*a.sy);l(this,yn)||(c=y(this,ue,zd).call(this,m,A));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let g="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",w="#42414d");const S=15,b=S*a.sx,x=S*a.sy,C=new OffscreenCanvas(b*2,x*2),k=C.getContext("2d");k.fillStyle=g,k.fillRect(0,0,b*2,x*2),k.fillStyle=w,k.fillRect(0,0,b,x),k.fillRect(b,x,b,x),E.fillStyle=E.createPattern(C,"repeat"),E.fillRect(0,0,m,A),E.drawImage(c,0,0,c.width,c.height,0,0,m,A)}let f=null;if(i){let m,A;if(a.symmetric&&c.width<t&&c.height<t)m=c.width,A=c.height;else if(c=l(this,Oe),r>t||o>t){const w=Math.min(t/r,t/o);m=Math.floor(r*w),A=Math.floor(o*w),l(this,yn)||(c=y(this,ue,zd).call(this,m,A))}const g=new OffscreenCanvas(m,A).getContext("2d",{willReadFrequently:!0});g.drawImage(c,0,0,c.width,c.height,0,0,m,A),f={width:m,height:A,data:g.getImageData(0,0,m,A).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,Ls)}static async deserialize(t,s,i){var A;let r=null;if(t instanceof CS){const{data:{rect:E,rotation:g,id:w,structParent:S,popupRef:b},container:x,parent:{page:{pageNumber:C}}}=t,k=x.querySelector("canvas"),P=i.imageManager.getFromCanvas(x.id,k);k.remove();const M=((A=await s._structTree.getAriaAttributes(`${Zv}${w}`))==null?void 0:A.get("aria-label"))||"";r=t={annotationType:se.STAMP,bitmapId:P.id,bitmap:P.bitmap,pageIndex:C-1,rect:E.slice(0),rotation:g,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:S,popupRef:b}}const o=await super.deserialize(t,s,i),{rect:a,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&i.imageManager.isValidId(h)?(v(o,St,h),c&&v(o,Oe,c)):v(o,hi,u),v(o,yn,d);const[p,m]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/m,o.annotationElementId=t.id||null,f&&(o.altTextData=f),o._initialData=r,v(o,Nl,!!r),o}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:se.STAMP,bitmapId:l(this,St),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,yn),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=y(this,ue,Hd).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=y(this,ue,mb).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const a=l(this,yn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(l(this,St)))s.stamps.set(l(this,St),{area:a,serialized:i}),i.bitmap=y(this,ue,Hd).call(this,!1);else if(l(this,yn)){const c=s.stamps.get(l(this,St));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=y(this,ue,Hd).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Oe=new WeakMap,St=new WeakMap,ar=new WeakMap,hi=new WeakMap,lr=new WeakMap,Dl=new WeakMap,Ls=new WeakMap,di=new WeakMap,Ms=new WeakMap,yn=new WeakMap,Nl=new WeakMap,ue=new WeakSet,Cc=function(t,s=!1){if(!t){this.remove();return}v(this,Oe,t.bitmap),s||(v(this,St,t.id),v(this,yn,t.isSvg)),t.file&&v(this,Dl,t.file.name),y(this,ue,Gm).call(this)},kc=function(){if(v(this,ar,null),this._uiManager.enableWaiting(!1),!!l(this,Ls)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Oe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Oe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},jd=function(){if(l(this,St)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,St)).then(i=>y(this,ue,Cc).call(this,i,!0)).finally(()=>y(this,ue,kc).call(this));return}if(l(this,hi)){const i=l(this,hi);v(this,hi,null),this._uiManager.enableWaiting(!0),v(this,ar,this._uiManager.imageManager.getFromUrl(i).then(r=>y(this,ue,Cc).call(this,r)).finally(()=>y(this,ue,kc).call(this)));return}if(l(this,lr)){const i=l(this,lr);v(this,lr,null),this._uiManager.enableWaiting(!0),v(this,ar,this._uiManager.imageManager.getFromFile(i).then(r=>y(this,ue,Cc).call(this,r)).finally(()=>y(this,ue,kc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=zc.supportedTypesStr;const s=this._uiManager._signal;v(this,ar,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),y(this,ue,Cc).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>y(this,ue,kc).call(this))),t.click()},Gm=function(){const{div:t}=this;let{width:s,height:i}=l(this,Oe);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>a*r||i>a*o){const d=Math.min(a*r/s,a*o/i);s*=d,i*=d}const[c,u]=this.parentDimensions;this.setDims(s*c/r,i*u/o),this._uiManager.enableWaiting(!1);const h=v(this,Ls,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),y(this,ue,Xm).call(this,s,i),y(this,ue,gb).call(this),l(this,Nl)||(this.parent.addUndoableEditor(this),v(this,Nl,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Dl)&&h.setAttribute("aria-label",l(this,Dl))},pb=function(t,s){var a;const[i,r]=this.parentDimensions;this.width=t/i,this.height=s/r,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,Ms)!==null&&clearTimeout(l(this,Ms)),v(this,Ms,setTimeout(()=>{v(this,Ms,null),y(this,ue,Xm).call(this,t,s)},200))},zd=function(t,s){const{width:i,height:r}=l(this,Oe);let o=i,a=r,c=l(this,Oe);for(;o>2*t||a>2*s;){const u=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,a),c=d.transferToImageBitmap()}return c},Xm=function(t,s){const i=new Bg,r=Math.ceil(t*i.sx),o=Math.ceil(s*i.sy),a=l(this,Ls);if(!a||a.width===r&&a.height===o)return;a.width=r,a.height=o;const c=l(this,yn)?l(this,Oe):y(this,ue,zd).call(this,r,o),u=a.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,r,o)},Hd=function(t){if(t){if(l(this,yn)){const r=this._uiManager.imageManager.getSvgUrl(l(this,St));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,Oe),s.getContext("2d").drawImage(l(this,Oe),0,0),s.toDataURL()}if(l(this,yn)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Er.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Er.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,Oe),0,0,l(this,Oe).width,l(this,Oe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,Oe))},gb=function(){this._uiManager._signal&&(v(this,di,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&y(this,ue,pb).call(this,s.width,s.height)})),l(this,di).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,di))==null||t.disconnect(),v(this,di,null)},{once:!0}))},mb=function(t){var u;const{rect:s,pageIndex:i,accessibilityData:{altText:r}}=this._initialData,o=t.rect.every((h,d)=>Math.abs(h-s[d])<1),a=t.pageIndex===i,c=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:o&&a&&c,isSameAltText:c}},Q(zc,"_type","stamp"),Q(zc,"_editorType",se.STAMP);let Wm=zc;var Vo,Ol,Is,cr,fi,wn,ur,jl,zl,Ft,pi,G,hr,xt,vb,Ym,Km,Qm,Bd;const Gn=class Gn{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:h}){_(this,xt);_(this,Vo);_(this,Ol,!1);_(this,Is,null);_(this,cr,null);_(this,fi,null);_(this,wn,new Map);_(this,ur,!1);_(this,jl,!1);_(this,zl,!1);_(this,Ft,null);_(this,pi,null);_(this,G);const d=[...l(Gn,hr).values()];if(!Gn._initialized){Gn._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),v(this,G,e),this.pageIndex=t,this.div=s,v(this,Vo,r),v(this,Is,o),this.viewport=u,v(this,Ft,c),this.drawLayer=a,this._structTree=i,l(this,G).addLayer(this)}get isEmpty(){return l(this,wn).size===0}get isInvisible(){return this.isEmpty&&l(this,G).getMode()===se.NONE}updateToolbar(e){l(this,G).updateToolbar(e)}updateMode(e=l(this,G).getMode()){switch(y(this,xt,Bd).call(this),e){case se.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case se.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case se.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of l(Gn,hr).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Ft))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,G).getMode()!==se.INK)return;if(!e){for(const s of l(this,wn).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,G).setEditingState(e)}addCommands(e){l(this,G).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Is))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of l(this,wn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,G).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!l(this,Is))return;const t=l(this,Is).getEditableAnnotations();for(const s of t){if(s.hide(),l(this,G).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){var i;v(this,zl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,wn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(l(this,Is)){const r=l(this,Is).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,G).isDeletedAnnotationElement(a))continue;let c=t.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(a),c&&(l(this,G).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}y(this,xt,Bd).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(Gn,hr).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,zl,!1)}getEditableAnnotation(e){var t;return((t=l(this,Is))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,G).getActive()!==e&&l(this,G).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Ft))!=null&&e.div&&!l(this,pi)){v(this,pi,new AbortController);const t=l(this,G).combinedSignal(l(this,pi));l(this,Ft).div.addEventListener("pointerdown",y(this,xt,vb).bind(this),{signal:t}),l(this,Ft).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Ft))!=null&&e.div&&l(this,pi)&&(l(this,pi).abort(),v(this,pi,null),l(this,Ft).div.classList.remove("highlighting"))}enableClick(){if(l(this,cr))return;v(this,cr,new AbortController);const e=l(this,G).combinedSignal(l(this,cr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,cr))==null||e.abort(),v(this,cr,null)}attach(e){l(this,wn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,G).isDeletedAnnotationElement(t)&&l(this,G).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,wn).delete(e.id),(t=l(this,Vo))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,zl)&&e.annotationElementId&&l(this,G).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,G).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,jl)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,G).addDeletedAnnotationElement(e.annotationElementId),Ae.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,G).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,G).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,fi)&&(e._focusEventsAllowed=!1,v(this,fi,setTimeout(()=>{v(this,fi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,G)._signal}),t.focus())},0))),e._structTreeParentId=(s=l(this,Vo))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return l(this,G).getId()}combinedSignal(e){return l(this,G).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,xt,Ym))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,G).updateToolbar(e),l(this,G).updateMode(e);const{offsetX:s,offsetY:i}=y(this,xt,Qm).call(this),r=this.getNextId(),o=y(this,xt,Km).call(this,{parent:this,id:r,x:s,y:i,uiManager:l(this,G),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(Gn,hr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,G)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=y(this,xt,Km).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:l(this,G),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(y(this,xt,Qm).call(this),!0)}setSelected(e){l(this,G).setSelected(e)}toggleSelected(e){l(this,G).toggleSelected(e)}unselect(e){l(this,G).unselect(e)}pointerup(e){const{isMac:t}=Xt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,ur)){if(v(this,ur,!1),!l(this,Ol)){v(this,Ol,!0);return}if(l(this,G).getMode()===se.STAMP){l(this,G).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,G).getMode()===se.HIGHLIGHT&&this.enableTextSelection(),l(this,ur)){v(this,ur,!1);return}const{isMac:t}=Xt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;v(this,ur,!0);const s=l(this,G).getActive();v(this,Ol,!s||s.isEmpty())}findNewParent(e,t,s){const i=l(this,G).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}destroy(){var e,t;((e=l(this,G).getActive())==null?void 0:e.parent)===this&&(l(this,G).commitOrRemove(),l(this,G).setActiveEditor(null)),l(this,fi)&&(clearTimeout(l(this,fi)),v(this,fi,null));for(const s of l(this,wn).values())(t=l(this,Vo))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,wn).clear(),l(this,G).removeLayer(this)}render({viewport:e}){this.viewport=e,Qo(this.div,e);for(const t of l(this,G).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,G).commitOrRemove(),y(this,xt,Bd).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Qo(this.div,{rotation:s}),t!==s)for(const i of l(this,wn).values())i.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,G).viewParameters.realScale}};Vo=new WeakMap,Ol=new WeakMap,Is=new WeakMap,cr=new WeakMap,fi=new WeakMap,wn=new WeakMap,ur=new WeakMap,jl=new WeakMap,zl=new WeakMap,Ft=new WeakMap,pi=new WeakMap,G=new WeakMap,hr=new WeakMap,xt=new WeakSet,vb=function(e){l(this,G).unselectAll();const{target:t}=e;if(t===l(this,Ft).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Ft).div.contains(t)){const{isMac:s}=Xt.platform;if(e.button!==0||e.ctrlKey&&s)return;l(this,G).showAllEditors("highlight",!0,!0),l(this,Ft).div.classList.add("free"),this.toggleDrawing(),vf.startHighlighting(this,l(this,G).direction==="ltr",{target:l(this,Ft).div,x:e.x,y:e.y}),l(this,Ft).div.addEventListener("pointerup",()=>{l(this,Ft).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,G)._signal}),e.preventDefault()}},Ym=function(){return l(Gn,hr).get(l(this,G).getMode())},Km=function(e){const t=l(this,xt,Ym);return t?new t.prototype.constructor(e):null},Qm=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+i),u=(r+a)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Bd=function(){v(this,jl,!0);for(const e of l(this,wn).values())e.isEmpty()&&e.remove();v(this,jl,!1)},Q(Gn,"_initialized",!1),_(Gn,hr,new Map([km,Nm,Wm,vf].map(e=>[e._editorType,e])));let qm=Gn;var Fs,vh,Ze,gi,yh,Jm,na,ev,yb;const wt=class wt{constructor({pageIndex:e}){_(this,na);_(this,Fs,null);_(this,vh,0);_(this,Ze,new Map);_(this,gi,new Map);this.pageIndex=e}setParent(e){if(!l(this,Fs)){v(this,Fs,e);return}if(l(this,Fs)!==e){if(l(this,Ze).size>0)for(const t of l(this,Ze).values())t.remove(),e.append(t);v(this,Fs,e)}}static get _svgFactory(){return he(this,"_svgFactory",new ly)}draw(e,t,s,i=!1){const r=Bt(this,vh)._++,o=y(this,na,ev).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const a=wt._svgFactory.createElement("defs");o.append(a);const c=wt._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),i&&l(this,gi).set(r,c);const h=y(this,na,yb).call(this,a,u),d=wt._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",s),d.setAttribute("href",`#${u}`),l(this,Ze).set(r,o),{id:r,clipPathId:`url(#${h})`}}drawOutline(e){const t=Bt(this,vh)._++,s=y(this,na,ev).call(this,e.box);s.classList.add(...e.classNamesForOutlining);const i=wt._svgFactory.createElement("defs");s.append(i);const r=wt._svgFactory.createElement("path");i.append(r);const o=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",o),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const h=wt._svgFactory.createElement("mask");i.append(h),a=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",a),h.setAttribute("maskUnits","objectBoundingBox");const d=wt._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=wt._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=wt._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const u=c.cloneNode();return s.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),l(this,Ze).set(t,s),t}finalizeLine(e,t){const s=l(this,gi).get(e);l(this,gi).delete(e),this.updateBox(e,t.box),s.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,Ze).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,gi).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var s;y(s=wt,yh,Jm).call(s,l(this,Ze).get(e),t)}show(e,t){l(this,Ze).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,Ze).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,Ze).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,Ze).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,Ze).get(e).classList.add(t)}removeClass(e,t){l(this,Ze).get(e).classList.remove(t)}getSVGRoot(e){return l(this,Ze).get(e)}remove(e){l(this,gi).delete(e),l(this,Fs)!==null&&(l(this,Ze).get(e).remove(),l(this,Ze).delete(e))}destroy(){v(this,Fs,null);for(const e of l(this,Ze).values())e.remove();l(this,Ze).clear(),l(this,gi).clear()}};Fs=new WeakMap,vh=new WeakMap,Ze=new WeakMap,gi=new WeakMap,yh=new WeakSet,Jm=function(e,{x:t=0,y:s=0,width:i=1,height:r=1}={}){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},na=new WeakSet,ev=function(e){var s;const t=wt._svgFactory.create(1,1,!0);return l(this,Fs).append(t),t.setAttribute("aria-hidden",!0),y(s=wt,yh,Jm).call(s,t,e),t},yb=function(e,t){const s=wt._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=wt._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},_(wt,yh);let Zm=wt;var dk=ee.AbortException,fk=ee.AnnotationEditorLayer,pk=ee.AnnotationEditorParamsType,gk=ee.AnnotationEditorType,mk=ee.AnnotationEditorUIManager,wb=ee.AnnotationLayer,Ab=ee.AnnotationMode,vk=ee.ColorPicker,yk=ee.DOMSVGFactory,wk=ee.DrawLayer,Ak=ee.FeatureTest,uy=ee.GlobalWorkerOptions,_k=ee.ImageKind,Sk=ee.InvalidPDFException,bk=ee.MissingPDFException,Ek=ee.OPS,xk=ee.OutputScale,Ck=ee.PDFDataRangeTransport,kk=ee.PDFDateString,Tk=ee.PDFWorker,Pk=ee.PasswordResponses,Rk=ee.PermissionFlag,Lk=ee.PixelsPerInch,Mk=ee.RenderingCancelledException,_b=ee.TextLayer,Ik=ee.UnexpectedResponseException,Fk=ee.Util,Dk=ee.VerbosityLevel,Nk=ee.XfaLayer,Ok=ee.build,jk=ee.createValidAbsoluteUrl,zk=ee.fetchData,Sb=ee.getDocument,Hk=ee.getFilenameFromUrl,Bk=ee.getPdfFilenameFromUrl,Uk=ee.getXfaPageViewport,Vk=ee.isDataScheme,$k=ee.isPdfFile,Wk=ee.noContextMenu,Gk=ee.normalizeUnicode,Xk=ee.setLayerDimensions,qk=ee.shadow,Yk=ee.version;const Kk=Object.freeze(Object.defineProperty({__proto__:null,AbortException:dk,AnnotationEditorLayer:fk,AnnotationEditorParamsType:pk,AnnotationEditorType:gk,AnnotationEditorUIManager:mk,AnnotationLayer:wb,AnnotationMode:Ab,ColorPicker:vk,DOMSVGFactory:yk,DrawLayer:wk,FeatureTest:Ak,GlobalWorkerOptions:uy,ImageKind:_k,InvalidPDFException:Sk,MissingPDFException:bk,OPS:Ek,OutputScale:xk,PDFDataRangeTransport:Ck,PDFDateString:kk,PDFWorker:Tk,PasswordResponses:Pk,PermissionFlag:Rk,PixelsPerInch:Lk,RenderingCancelledException:Mk,TextLayer:_b,UnexpectedResponseException:Ik,Util:Fk,VerbosityLevel:Dk,XfaLayer:Nk,build:Ok,createValidAbsoluteUrl:jk,fetchData:zk,getDocument:Sb,getFilenameFromUrl:Hk,getPdfFilenameFromUrl:Bk,getXfaPageViewport:Uk,isDataScheme:Vk,isPdfFile:$k,noContextMenu:Wk,normalizeUnicode:Gk,setLayerDimensions:Xk,shadow:qk,version:Yk},Symbol.toStringTag,{value:"Module"}));var ht=function(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return n.concat(r||Array.prototype.slice.call(e))},Qk=["onCopy","onCut","onPaste"],Zk=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Jk=["onFocus","onBlur"],eT=["onInput","onInvalid","onReset","onSubmit"],tT=["onLoad","onError"],nT=["onKeyDown","onKeyPress","onKeyUp"],sT=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],iT=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],rT=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],oT=["onSelect"],aT=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],lT=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],cT=["onScroll"],uT=["onWheel"],hT=["onAnimationStart","onAnimationEnd","onAnimationIteration"],dT=["onTransitionEnd"],fT=["onToggle"],pT=["onChange"],gT=ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht(ht([],Qk,!0),Zk,!0),Jk,!0),eT,!0),tT,!0),nT,!0),sT,!0),iT,!0),rT,!0),oT,!0),aT,!0),lT,!0),cT,!0),uT,!0),hT,!0),dT,!0),pT,!0),fT,!0);function bb(n,e){var t={};return gT.forEach(function(s){var i=n[s];i&&(e?t[s]=function(r){return i(r,e(s))}:t[s]=i)}),t}function kh(n){var e=!1,t=new Promise(function(s,i){n.then(function(r){return!e&&s(r)}).catch(function(r){return!e&&i(r)})});return{promise:t,cancel:function(){e=!0}}}function Eb(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Eb(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function rp(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Eb(n))&&(s&&(s+=" "),s+=e);return s}var mT="Invariant failed";function xe(n,e){if(!n)throw new Error(mT)}var vT=function(){},yT=vT;const Nt=nw(yT);var $0=Object.prototype.hasOwnProperty;function W0(n,e,t){for(t of n.keys())if(Ha(t,e))return t}function Ha(n,e){var t,s,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Ha(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(i=s,i&&typeof i=="object"&&(i=W0(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(i=s[0],i&&typeof i=="object"&&(i=W0(e,i),!i)||!Ha(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if($0.call(n,t)&&++s&&!$0.call(e,t)||!(t in e)||!Ha(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}const xb=L.createContext(null);function Ba({children:n,type:e}){return T.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const wT="noopener noreferrer nofollow";class AT{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return xe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){xe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{xe(this.pdfDocument),xe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{xe(Array.isArray(t));const s=t[0];new Promise(i=>{xe(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{i(r)}).catch(()=>{xe(!1)}):typeof s=="number"?i(s):xe(!1)}).then(i=>{const r=i+1;xe(this.pdfViewer),xe(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;xe(this.pdfViewer),xe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||wT,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const G0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},op=typeof window<"u",Cb=op&&window.location.protocol==="file:";function _T(n){return typeof n<"u"}function Dr(n){return _T(n)&&n!==null}function ST(n){return typeof n=="string"}function bT(n){return n instanceof ArrayBuffer}function ET(n){return xe(op),n instanceof Blob}function tv(n){return ST(n)&&/^data:/.test(n)}function X0(n){xe(tv(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function xT(){return op&&window.devicePixelRatio||1}const kb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function q0(){Nt(!Cb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${kb}`)}function CT(){Nt(!Cb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${kb}`)}function ea(n){n!=null&&n.cancel&&n.cancel()}function nv(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function kT(n){return n.name==="RenderingCancelledException"}function TT(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}function PT(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Xl(){return L.useReducer(PT,{value:void 0,error:void 0})}var RT=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(s.next(h))}catch(d){o(d)}}function c(h){try{u(s.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,c)}u((s=s.apply(n,e||[])).next())})},Y0=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};const{PDFDataRangeTransport:LT}=Kk,MT=(n,e)=>{switch(e){case G0.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case G0.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function K0(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const IT=L.forwardRef(function(e,t){var{children:s,className:i,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:c,inputRef:u,imageResourcesPath:h,loading:d="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:m,onLoadProgress:A,onLoadSuccess:E,onPassword:g=MT,onSourceError:w,onSourceSuccess:S,options:b,renderMode:x,rotate:C}=e,k=Y0(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[P,M]=Xl(),{value:I,error:D}=P,[Y,X]=Xl(),{value:W,error:K}=Y,q=L.useRef(new AT),j=L.useRef([]),R=L.useRef(void 0),U=L.useRef(void 0);c&&c!==R.current&&K0(c)&&(Nt(!Ha(c,R.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),R.current=c),b&&b!==U.current&&(Nt(!Ha(b,U.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),U.current=b);const $=L.useRef({scrollPageIntoView:Se=>{const{dest:Ue,pageNumber:ut,pageIndex:Ke=ut-1}=Se;if(p){p({dest:Ue,pageIndex:Ke,pageNumber:ut});return}const Ri=j.current[Ke];if(Ri){Ri.scrollIntoView();return}Nt(!1,`An internal link leading to page ${ut} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});L.useImperativeHandle(t,()=>({linkService:q,pages:j,viewer:$}),[]);function ne(){S&&S()}function J(){D&&(Nt(!1,D.toString()),w&&w(D))}function ce(){M({type:"RESET"})}L.useEffect(ce,[c,M]);const Me=L.useCallback(()=>RT(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return tv(c)?{data:X0(c)}:(q0(),{url:c});if(c instanceof LT)return{range:c};if(bT(c))return{data:c};if(op&&ET(c))return{data:yield TT(c)};if(xe(typeof c=="object"),xe(K0(c)),"url"in c&&typeof c.url=="string"){if(tv(c.url)){const{url:Se}=c,Ue=Y0(c,["url"]),ut=X0(Se);return Object.assign({data:ut},Ue)}q0()}return c}),[c]);L.useEffect(()=>{const Se=kh(Me());return Se.promise.then(Ue=>{M({type:"RESOLVE",value:Ue})}).catch(Ue=>{M({type:"REJECT",error:Ue})}),()=>{ea(Se)}},[Me,M]),L.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){J();return}ne()}},[I]);function tt(){W&&(E&&E(W),j.current=new Array(W.numPages),q.current.setDocument(W))}function de(){K&&(Nt(!1,K.toString()),m&&m(K))}L.useEffect(function(){X({type:"RESET"})},[X,I]),L.useEffect(function(){if(!I)return;const Ue=b?Object.assign(Object.assign({},I),b):I,ut=Sb(Ue);A&&(ut.onProgress=A),g&&(ut.onPassword=g);const Ke=ut,Ri=Ke.promise.then(Fr=>{X({type:"RESOLVE",value:Fr})}).catch(Fr=>{Ke.destroyed||X({type:"REJECT",error:Fr})});return()=>{Ri.finally(()=>Ke.destroy())}},[b,X,I]),L.useEffect(()=>{if(!(typeof W>"u")){if(W===!1){de();return}tt()}},[W]),L.useEffect(function(){q.current.setViewer($.current),q.current.setExternalLinkRel(o),q.current.setExternalLinkTarget(a)},[o,a]);const re=L.useCallback((Se,Ue)=>{j.current[Se]=Ue},[]),zt=L.useCallback(Se=>{delete j.current[Se]},[]),Ht=L.useMemo(()=>({imageResourcesPath:h,linkService:q.current,onItemClick:p,pdf:W,registerPage:re,renderMode:x,rotate:C,unregisterPage:zt}),[h,p,W,re,x,C,zt]),Ce=L.useMemo(()=>bb(k,()=>W),[k,W]);function Mr(){return T.jsx(xb.Provider,{value:Ht,children:s})}function Ir(){return c?W==null?T.jsx(Ba,{type:"loading",children:typeof d=="function"?d():d}):W===!1?T.jsx(Ba,{type:"error",children:typeof r=="function"?r():r}):Mr():T.jsx(Ba,{type:"no-data",children:typeof f=="function"?f():f})}return T.jsx("div",Object.assign({className:rp("react-pdf__Document",i),ref:u,style:{"--scale-factor":"1"}},Ce,{children:Ir()}))});function Tb(){return L.useContext(xb)}function Pb(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){t.forEach(function(o){typeof o=="function"?o(r):o&&(o.current=r)})}}const Rb=L.createContext(null),Lb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},FT=/^H(\d+)$/;function DT(n){return n in Lb}function ap(n){return"children"in n}function Mb(n){return ap(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function NT(n){const e={};if(ap(n)){const{role:t}=n,s=t.match(FT);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(DT(t)){const i=Lb[t];i&&(e.role=i)}}return e}function Ib(n){const e={};if(ap(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),Mb(n)){const[t]=n.children;if(t){const s=Ib(t);return Object.assign(Object.assign({},e),s)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function OT(n){return n?Object.assign(Object.assign({},NT(n)),Ib(n)):null}function Fb({className:n,node:e}){const t=L.useMemo(()=>OT(e),[e]),s=L.useMemo(()=>!ap(e)||Mb(e)?null:e.children.map((i,r)=>T.jsx(Fb,{node:i},r)),[e]);return T.jsx("span",Object.assign({className:n},t,{children:s}))}function lp(){return L.useContext(Rb)}function jT(){const n=lp();xe(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,i]=Xl(),{value:r,error:o}=s,{customTextRenderer:a,page:c}=n;function u(){r&&t&&t(r)}function h(){o&&(Nt(!1,o.toString()),e&&e(o))}return L.useEffect(function(){i({type:"RESET"})},[i,c]),L.useEffect(function(){if(a||!c)return;const f=kh(c.getStructTree()),p=f;return f.promise.then(m=>{i({type:"RESOLVE",value:m})}).catch(m=>{i({type:"REJECT",error:m})}),()=>ea(p)},[a,c,i]),L.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?T.jsx(Fb,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Q0=Ab;function zT(n){const e=lp();xe(e);const t=Object.assign(Object.assign({},e),n),{_className:s,canvasBackground:i,devicePixelRatio:r=xT(),onRenderError:o,onRenderSuccess:a,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:p}=n;xe(c);const m=L.useRef(null);function A(){c&&a&&a(nv(c,f))}function E(b){kT(b)||(Nt(!1,b.toString()),o&&o(b))}const g=L.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),w=L.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);L.useEffect(function(){if(!c)return;c.cleanup();const{current:x}=m;if(!x)return;x.width=g.width,x.height=g.height,x.style.width=`${Math.floor(w.width)}px`,x.style.height=`${Math.floor(w.height)}px`,x.style.visibility="hidden";const C={annotationMode:u?Q0.ENABLE_FORMS:Q0.ENABLE,canvasContext:x.getContext("2d",{alpha:!1}),viewport:g};i&&(C.background=i);const k=c.render(C),P=k;return k.promise.then(()=>{x.style.visibility="",A()}).catch(E),()=>ea(P)},[i,c,u,g,w]);const S=L.useCallback(()=>{const{current:b}=m;b&&(b.width=0,b.height=0)},[]);return L.useEffect(()=>S,[S]),T.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:Pb(p,m),style:{display:"block",userSelect:"none"},children:h?T.jsx(jT,{}):null})}function HT(n){return"str"in n}function BT(){const n=lp();xe(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:a,pageNumber:c,rotate:u,scale:h}=n;xe(o);const[d,f]=Xl(),{value:p,error:m}=d,A=L.useRef(null);Nt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){p&&s&&s(p)}function g(){m&&(Nt(!1,m.toString()),t&&t(m))}L.useEffect(function(){f({type:"RESET"})},[o,f]),L.useEffect(function(){if(!o)return;const P=kh(o.getTextContent()),M=P;return P.promise.then(I=>{f({type:"RESOLVE",value:I})}).catch(I=>{f({type:"REJECT",error:I})}),()=>ea(M)},[o,f]),L.useEffect(()=>{if(p!==void 0){if(p===!1){g();return}E()}},[p]);const w=L.useCallback(()=>{r&&r()},[r]),S=L.useCallback(k=>{Nt(!1,k.toString()),i&&i(k)},[i]);function b(){const k=A.current;k&&k.classList.add("selecting")}function x(){const k=A.current;k&&k.classList.remove("selecting")}const C=L.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return L.useLayoutEffect(function(){if(!o||!p)return;const{current:P}=A;if(!P)return;P.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),I={container:P,textContentSource:M,viewport:C},D=new _b(I),Y=D;return D.render().then(()=>{const X=document.createElement("div");X.className="endOfContent",P.append(X);const W=P.querySelectorAll('[role="presentation"]');if(e){let K=0;p.items.forEach((q,j)=>{if(!HT(q))return;const R=W[K];if(!R)return;const U=e(Object.assign({pageIndex:a,pageNumber:c,itemIndex:j},q));R.innerHTML=U,K+=q.str&&q.hasEOL?2:1})}w()}).catch(S),()=>ea(Y)},[e,S,w,o,a,c,p,C]),T.jsx("div",{className:rp("react-pdf__Page__textContent","textLayer"),onMouseUp:x,onMouseDown:b,ref:A})}function UT(){const n=Tb(),e=lp();xe(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:s,linkService:i,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:d,rotate:f,scale:p=1}=t;xe(h),xe(u),xe(i);const[m,A]=Xl(),{value:E,error:g}=m,w=L.useRef(null);Nt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){E&&o&&o(E)}function b(){g&&(Nt(!1,g.toString()),r&&r(g))}L.useEffect(function(){A({type:"RESET"})},[A,u]),L.useEffect(function(){if(!u)return;const M=kh(u.getAnnotations()),I=M;return M.promise.then(D=>{A({type:"RESOLVE",value:D})}).catch(D=>{A({type:"REJECT",error:D})}),()=>{ea(I)}},[A,u]),L.useEffect(()=>{if(E!==void 0){if(E===!1){b();return}S()}},[E]);function x(){c&&c()}function C(P){Nt(!1,`${P}`),a&&a(P)}const k=L.useMemo(()=>u.getViewport({scale:p,rotation:f}),[u,f,p]);return L.useEffect(function(){if(!h||!u||!i||!E)return;const{current:M}=w;if(!M)return;const I=k.clone({dontFlip:!0}),D={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:M,l10n:null,page:u,structTreeLayer:null,viewport:I},Y={annotations:E,annotationStorage:h.annotationStorage,div:M,imageResourcesPath:s,linkService:i,page:u,renderForms:d,viewport:I};M.innerHTML="";try{new wb(D).render(Y),x()}catch(X){C(X)}return()=>{}},[E,s,i,u,h,d,k]),T.jsx("div",{className:rp("react-pdf__Page__annotations","annotationLayer"),ref:w})}var VT=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};const Z0=1;function $T(n){const e=Tb(),t=Object.assign(Object.assign({},e),n),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:a,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:m,loading:A="Loading page",noData:E="No page specified.",onGetAnnotationsError:g,onGetAnnotationsSuccess:w,onGetStructTreeError:S,onGetStructTreeSuccess:b,onGetTextError:x,onGetTextSuccess:C,onLoadError:k,onLoadSuccess:P,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:I,onRenderError:D,onRenderSuccess:Y,onRenderTextLayerError:X,onRenderTextLayerSuccess:W,pageIndex:K,pageNumber:q,pdf:j,registerPage:R,renderAnnotationLayer:U=!0,renderForms:$=!1,renderMode:ne="canvas",renderTextLayer:J=!0,rotate:ce,scale:Me=Z0,unregisterPage:tt,width:de}=t,re=VT(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[zt,Ht]=Xl(),{value:Ce,error:Mr}=zt,Ir=L.useRef(null);xe(j);const Se=Dr(q)?q-1:K??null,Ue=q??(Dr(K)?K+1:null),ut=ce??(Ce?Ce.rotate:null),Ke=L.useMemo(()=>{if(!Ce)return null;let Ve=1;const la=Me??Z0;if(de||p){const ca=Ce.getViewport({scale:1,rotation:ut});de?Ve=de/ca.width:p&&(Ve=p/ca.height)}return la*Ve},[p,Ce,ut,Me,de]);L.useEffect(function(){return()=>{Dr(Se)&&i&&tt&&tt(Se)}},[i,j,Se,tt]);function Ri(){if(P){if(!Ce||!Ke)return;P(nv(Ce,Ke))}if(i&&R){if(!Dr(Se)||!Ir.current)return;R(Se,Ir.current)}}function Fr(){Mr&&(Nt(!1,Mr.toString()),k&&k(Mr))}L.useEffect(function(){Ht({type:"RESET"})},[Ht,j,Se]),L.useEffect(function(){if(!j||!Ue)return;const la=kh(j.getPage(Ue)),ca=la;return la.promise.then(up=>{Ht({type:"RESOLVE",value:up})}).catch(up=>{Ht({type:"REJECT",error:up})}),()=>ea(ca)},[Ht,j,Ue]),L.useEffect(()=>{if(Ce!==void 0){if(Ce===!1){Fr();return}Ri()}},[Ce,Ke]);const cp=L.useMemo(()=>Ce&&Dr(Se)&&Ue&&Dr(ut)&&Dr(Ke)?{_className:s,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:g,onGetAnnotationsSuccess:w,onGetStructTreeError:S,onGetStructTreeSuccess:b,onGetTextError:x,onGetTextSuccess:C,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:I,onRenderError:D,onRenderSuccess:Y,onRenderTextLayerError:X,onRenderTextLayerSuccess:W,page:Ce,pageIndex:Se,pageNumber:Ue,renderForms:$,renderTextLayer:J,rotate:ut,scale:Ke}:null,[s,r,h,d,g,w,S,b,x,C,M,I,D,Y,X,W,Ce,Se,Ue,$,J,ut,Ke]),Th=L.useMemo(()=>bb(re,()=>Ce&&(Ke?nv(Ce,Ke):void 0)),[re,Ce,Ke]),js=`${Se}@${Ke}/${ut}`;function Ph(){switch(ne){case"custom":return xe(u),T.jsx(u,{},`${js}_custom`);case"none":return null;case"canvas":default:return T.jsx(zT,{canvasRef:o},`${js}_canvas`)}}function Rh(){return J?T.jsx(BT,{},`${js}_text`):null}function H(){return U?T.jsx(UT,{},`${js}_annotations`):null}function ge(){return T.jsxs(Rb.Provider,{value:cp,children:[Ph(),Rh(),H(),a]})}function fe(){return Ue?j===null||Ce===void 0||Ce===null?T.jsx(Ba,{type:"loading",children:typeof A=="function"?A():A}):j===!1||Ce===!1?T.jsx(Ba,{type:"error",children:typeof f=="function"?f():f}):ge():T.jsx(Ba,{type:"no-data",children:typeof E=="function"?E():E})}return T.jsx("div",Object.assign({className:rp(s,c),"data-page-number":Ue,ref:Pb(m,Ir),style:{"--scale-factor":`${Ke}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Th,{children:fe()}))}CT();uy.workerSrc="pdf.worker.mjs";function WT(n,e,t){return Math.max(e,Math.min(t,n))}function GT({target:n,active:e=!1,paused:t=!1,showStick:s=!1,bubbleText:i="",scale:r=1.9,label:o="Virtual teacher pointer"}){const a=L.useRef(null),c=L.useMemo(()=>({x:160,y:160}),[]),[u,h]=L.useState({angleDeg:0,length:160}),[d,f]=L.useState(!1),[p,m]=L.useState(!1);return L.useEffect(()=>{if(!e||t){f(!1);return}const A=setInterval(()=>f(E=>!E),220);return()=>clearInterval(A)},[e,t]),L.useEffect(()=>{let A;const E=()=>{const g=1500+Math.random()*2500;A=setTimeout(()=>{m(!0),setTimeout(()=>m(!1),120),E()},g)};return E(),()=>clearTimeout(A)},[]),L.useEffect(()=>{if(!s||!(n!=null&&n.x)||!(n!=null&&n.y)||!a.current)return;const A=a.current.getBoundingClientRect(),E=A.left+c.x*r,g=A.top+c.y*r,w=n.x-E,S=n.y-g,b=Math.atan2(S,w)*180/Math.PI,x=WT(Math.hypot(w,S),100,1600);h({angleDeg:b,length:x})},[s,n==null?void 0:n.x,n==null?void 0:n.y,c.x,c.y,r]),T.jsxs("div",{className:"fixed inset-0 z-50 pointer-events-none",role:"img","aria-label":o,children:[s&&(n==null?void 0:n.x)!=null&&(n==null?void 0:n.y)!=null&&T.jsx("div",{className:"absolute -translate-x-1/2 -translate-y-1/2",style:{left:n.x,top:n.y},"aria-hidden":"true",children:T.jsx("div",{className:"h-3.5 w-3.5 rounded-full bg-cyan-300/90 border border-cyan-100/70 shadow-[0_0_22px_rgba(34,211,238,0.55)]"})}),T.jsx("div",{ref:a,className:`absolute left-8 bottom-8 select-none ${e&&!t?"animate-[vt3dFloat_3.2s_ease-in-out_infinite]":""}`,"aria-hidden":"true",style:{transform:`scale(${r})`,transformOrigin:"left bottom"},children:T.jsxs("div",{className:"relative",children:[(e||t)&&(i==null?void 0:i.trim())&&T.jsxs("div",{className:"absolute -top-14 left-16 max-w-[260px] rounded-2xl border border-white/10 bg-white/5 backdrop-blur px-3 py-2 text-xs text-slate-100 shadow-[0_10px_30px_rgba(0,0,0,0.35)]",children:[T.jsx("div",{className:"text-[11px] text-cyan-200/90 font-semibold",children:t?"Paused":"Teaching"}),T.jsx("div",{className:"mt-0.5 text-slate-100/90 line-clamp-2",children:i}),T.jsx("div",{className:"absolute -bottom-2 left-7 h-3 w-3 rotate-45 border-b border-r border-white/10 bg-white/5"})]}),s&&T.jsxs("div",{className:"absolute",style:{left:c.x,top:c.y,transformOrigin:"0% 50%",transform:`rotate(${u.angleDeg}deg)`,transition:"transform 140ms linear"},children:[T.jsx("div",{className:"h-[7px] rounded-full",style:{width:`${u.length}px`,transition:"width 140ms linear",background:"linear-gradient(90deg, rgba(34,211,238,0.95), rgba(125,211,252,0.95))",boxShadow:"0 0 16px rgba(34,211,238,0.35)"}}),T.jsx("div",{className:"absolute right-0 top-1/2 h-3.5 w-3.5 -translate-y-1/2 rounded-full",style:{background:"radial-gradient(circle at 30% 30%, #fff, rgba(251,113,133,0.95))",boxShadow:"0 0 16px rgba(251,113,133,0.35)",border:"1px solid rgba(255,255,255,0.35)"}})]}),T.jsxs("svg",{width:"320",height:"240",viewBox:"0 0 320 240",className:"drop-shadow-[0_18px_36px_rgba(0,0,0,0.55)]",children:[T.jsxs("defs",{children:[T.jsxs("radialGradient",{id:"skin3d",cx:"35%",cy:"30%",r:"70%",children:[T.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.95)"}),T.jsx("stop",{offset:"40%",stopColor:"rgba(226,232,240,0.95)"}),T.jsx("stop",{offset:"100%",stopColor:"rgba(148,163,184,0.90)"})]}),T.jsxs("radialGradient",{id:"body3d",cx:"30%",cy:"20%",r:"90%",children:[T.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.25)"}),T.jsx("stop",{offset:"40%",stopColor:"rgba(148,163,184,0.35)"}),T.jsx("stop",{offset:"100%",stopColor:"rgba(30,41,59,0.55)"})]}),T.jsxs("linearGradient",{id:"board3d",x1:"0",y1:"0",x2:"1",y2:"1",children:[T.jsx("stop",{offset:"0%",stopColor:"rgba(15,23,42,0.95)"}),T.jsx("stop",{offset:"100%",stopColor:"rgba(2,6,23,0.95)"})]}),T.jsxs("linearGradient",{id:"shine",x1:"0",y1:"0",x2:"1",y2:"1",children:[T.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.22)"}),T.jsx("stop",{offset:"100%",stopColor:"rgba(255,255,255,0)"})]})]}),T.jsxs("g",{children:[T.jsx("rect",{x:"14",y:"18",width:"120",height:"82",rx:"16",fill:"url(#board3d)",stroke:"rgba(148,163,184,0.35)"}),T.jsx("path",{d:"M30 52 H116",stroke:"rgba(226,232,240,0.30)",strokeWidth:"5"}),T.jsx("path",{d:"M30 72 H100",stroke:"rgba(226,232,240,0.22)",strokeWidth:"5"}),T.jsx("path",{d:"M18 26 C48 18, 92 18, 128 30 L128 40 C92 28, 48 28, 18 38 Z",fill:"url(#shine)"})]}),T.jsxs("g",{children:[T.jsx("circle",{cx:"214",cy:"80",r:"38",fill:"url(#skin3d)"}),T.jsx("ellipse",{cx:"202",cy:"68",rx:"16",ry:"12",fill:"rgba(255,255,255,0.18)"}),p?T.jsxs(T.Fragment,{children:[T.jsx("path",{d:"M192 78 Q200 82 208 78",stroke:"rgba(15,23,42,0.8)",strokeWidth:"4",strokeLinecap:"round",fill:"none"}),T.jsx("path",{d:"M220 78 Q228 82 236 78",stroke:"rgba(15,23,42,0.8)",strokeWidth:"4",strokeLinecap:"round",fill:"none"})]}):T.jsxs(T.Fragment,{children:[T.jsx("circle",{cx:"200",cy:"78",r:"5",fill:"rgba(15,23,42,0.82)"}),T.jsx("circle",{cx:"228",cy:"78",r:"5",fill:"rgba(15,23,42,0.82)"}),T.jsx("circle",{cx:"198",cy:"76",r:"2",fill:"rgba(255,255,255,0.7)"}),T.jsx("circle",{cx:"226",cy:"76",r:"2",fill:"rgba(255,255,255,0.7)"})]}),!e||t?T.jsx("path",{d:"M196 98 Q214 112 232 98",fill:"none",stroke:"rgba(15,23,42,0.6)",strokeWidth:"5",strokeLinecap:"round"}):d?T.jsx("ellipse",{cx:"214",cy:"104",rx:"10",ry:"7",fill:"rgba(15,23,42,0.55)"}):T.jsx("path",{d:"M196 102 Q214 116 232 102",fill:"none",stroke:"rgba(15,23,42,0.6)",strokeWidth:"5",strokeLinecap:"round"})]}),T.jsxs("g",{children:[T.jsx("rect",{x:"172",y:"124",width:"86",height:"74",rx:"26",fill:"url(#body3d)",stroke:"rgba(226,232,240,0.18)"}),T.jsx("path",{d:"M182 132 C198 122, 232 122, 252 136 C234 136, 204 140, 182 148 Z",fill:"rgba(255,255,255,0.10)"})]}),T.jsx("path",{d:"M198 152 C178 146, 168 146, 160 160",fill:"none",stroke:"rgba(226,232,240,0.78)",strokeWidth:"12",strokeLinecap:"round"}),T.jsx("circle",{cx:c.x,cy:c.y,r:"10",fill:"rgba(226,232,240,0.92)"}),T.jsx("circle",{cx:c.x-3,cy:c.y-3,r:"4",fill:"rgba(255,255,255,0.25)"}),T.jsx("path",{d:"M200 198 v22",stroke:"rgba(226,232,240,0.55)",strokeWidth:"12",strokeLinecap:"round"}),T.jsx("path",{d:"M232 198 v22",stroke:"rgba(226,232,240,0.55)",strokeWidth:"12",strokeLinecap:"round"})]})]})})]})}function XT({rect:n,active:e=!1}){return!e||!n?null:T.jsx("div",{className:"pointer-events-none fixed inset-0 z-[60]","aria-hidden":"true",children:T.jsx("div",{className:"absolute rounded-md border border-white/60 bg-white/20 shadow-sm animate-pulse",style:{left:n.left,top:n.top,width:n.width,height:n.height}})})}uy.workerSrc=new URL("/3D_Avatar_Virtual_Teacher/assets/pdf.worker.min-GB3t0DcA.mjs",import.meta.url).toString();function J0(n,e,t){return Math.max(e,Math.min(t,n))}function qT(n,e){let t=0,s=n.length-1,i=0;for(;t<=s;){const r=t+s>>1;n[r]<=e?(i=r,t=r+1):s=r-1}return i}function YT(n){for(const e of n.childNodes)if(e.nodeType===Node.TEXT_NODE)return e;return null}function KT(n){const e=[],t=Array.from(n.querySelectorAll("span"));let s=0;for(const i of t){const r=YT(i);if(!r)continue;const o=r.textContent??"";if(!/\S/.test(o))continue;const a=/\S+/g;let c;for(;(c=a.exec(o))!==null;){const u=c[0],h=c.index,d=h+u.length;e.push({index:s,word:u,spanEl:i,textNode:r,startOffset:h,endOffset:d}),s++}}return e}function QT(n){try{const e=document.createRange();e.setStart(n.textNode,n.startOffset),e.setEnd(n.textNode,n.endOffset);const t=e.getBoundingClientRect();return typeof e.detach=="function"&&e.detach(),!t||t.width===0&&t.height===0?n.spanEl.getBoundingClientRect():t}catch{return n.spanEl.getBoundingClientRect()}}function ZT(){var Th,js,Ph,Rh;const[n,e]=L.useState("/sample.pdf"),[t,s]=L.useState(null),[i,r]=L.useState(1),[o,a]=L.useState(1.25),[c,u]=L.useState(1),[h,d]=L.useState(1),[f,p]=L.useState(""),[m,A]=L.useState(!0),[E,g]=L.useState(!1),[w,S]=L.useState("idle"),b=L.useRef(null),x=L.useRef(null),C=L.useRef(null),[k,P]=L.useState([]),[M,I]=L.useState([]),[D,Y]=L.useState(-1),[X,W]=L.useState(null),[K,q]=L.useState(null),[j,R]=L.useState(!1),U=L.useRef(i),$=L.useRef(t),ne=L.useRef(m),J=L.useRef(E);L.useEffect(()=>{U.current=i},[i]),L.useEffect(()=>{$.current=t},[t]),L.useEffect(()=>{ne.current=m},[m]),L.useEffect(()=>{J.current=E},[E]);const ce=L.useMemo(()=>{var H,ge;return typeof window>"u"?[]:((ge=(H=window.speechSynthesis)==null?void 0:H.getVoices)==null?void 0:ge.call(H))??[]},[]),[,Me]=L.useState(0);L.useEffect(()=>{var fe;const H=window.speechSynthesis;if(!H)return;const ge=()=>Me(Ve=>Ve+1);return(fe=H.addEventListener)==null||fe.call(H,"voiceschanged",ge),()=>{var Ve;return(Ve=H.removeEventListener)==null?void 0:Ve.call(H,"voiceschanged",ge)}},[]);const tt=L.useMemo(()=>ce.length?f?ce.find(H=>H.voiceURI===f)??ce[0]??null:ce[0]??null:null,[ce,f]),de=L.useMemo(()=>k.map(H=>H.word).join(" "),[k]);L.useEffect(()=>{const H=[];let ge=0;for(const fe of k)H.push(ge),ge+=fe.word.length+1;I(H)},[k]);const re=L.useCallback(()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),b.current=null,S("idle"),Y(-1))},[]);L.useEffect(()=>{re(),W(null),q(null),R(!1)},[i,n,re]);const zt=L.useCallback(H=>{if(H<0||H>=k.length)return;const ge=k[H],fe=QT(ge);if(!fe||fe.width===0&&fe.height===0)return;W({x:fe.left+fe.width/2,y:fe.top+fe.height/2});const Ve=2;q({left:fe.left-Ve,top:fe.top-Ve,width:J0(fe.width+Ve*2,6,2e3),height:J0(fe.height+Ve*2,10,2e3)})},[k]);L.useEffect(()=>{if(D<0)return;let H=0;const ge=()=>{cancelAnimationFrame(H),H=requestAnimationFrame(()=>zt(D))},fe=C.current;return window.addEventListener("scroll",ge,{passive:!0}),window.addEventListener("resize",ge),fe==null||fe.addEventListener("scroll",ge,{passive:!0}),()=>{window.removeEventListener("scroll",ge),window.removeEventListener("resize",ge),fe==null||fe.removeEventListener("scroll",ge),cancelAnimationFrame(H)}},[D,zt]);const Ht=L.useCallback(()=>{if(!window.speechSynthesis||!de.trim()||k.length===0)return;window.speechSynthesis.cancel(),S("speaking");const H=new SpeechSynthesisUtterance(de);H.rate=c,H.pitch=h,tt&&(H.voice=tt),H.onboundary=ge=>{if(typeof ge.charIndex!="number"||!M.length)return;const fe=qT(M,ge.charIndex);Y(fe),zt(fe)},H.onend=()=>{S("idle"),Y(-1);const ge=ne.current,fe=J.current,Ve=$.current,la=U.current;ge&&Ve&&la<Ve&&(r(ca=>ca+1),W(null),q(null),R(!!fe))},H.onerror=()=>{S("idle"),Y(-1),R(!1)},b.current=H,window.speechSynthesis.speak(H)},[de,k.length,c,h,tt,M,zt]);L.useEffect(()=>{j&&w==="idle"&&k.length!==0&&(R(!1),Ht())},[j,w,k.length,Ht]);const Ce=L.useCallback(()=>{window.speechSynthesis&&(window.speechSynthesis.pause(),S("paused"))},[]),Mr=L.useCallback(()=>{window.speechSynthesis&&(window.speechSynthesis.resume(),S("speaking"))},[]),Ir=L.useCallback(({numPages:H})=>{s(H),r(ge=>Math.min(Math.max(1,ge),H))},[]),Se=L.useCallback(()=>{const H=x.current;if(!H)return;const ge=H.querySelector(".react-pdf__Page__textContent");if(!ge)return;const fe=KT(ge);P(fe)},[]),Ue=L.useCallback(H=>{var Ve;const ge=(Ve=H.target.files)==null?void 0:Ve[0];if(!ge)return;const fe=URL.createObjectURL(ge);e(fe),r(1)},[]),ut=i>1,Ke=t!=null&&i<t,Ri=w==="speaking",Fr=w==="speaking"||w==="paused",cp=k.length===0||!de.trim();return T.jsxs("div",{className:"relative",children:[T.jsx(XT,{rect:K,active:w==="speaking"||w==="paused"}),T.jsx(GT,{target:X,active:Fr,paused:w==="paused",showStick:Ri,bubbleText:D>=0?(Th=k[D])==null?void 0:Th.word:""}),T.jsxs("div",{className:"grid gap-4 lg:grid-cols-[360px_1fr]",children:[T.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-4 shadow",children:[T.jsx("h2",{className:"text-base font-semibold",children:"Controls"}),T.jsxs("div",{className:"mt-3 space-y-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-slate-300",htmlFor:"pdfFile",children:"Load PDF"}),T.jsx("input",{id:"pdfFile",type:"file",accept:"application/pdf",onChange:Ue,className:"mt-1 block w-full rounded-lg border border-slate-700 bg-slate-950/30 p-2 text-sm"}),T.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Or place a PDF at ",T.jsx("code",{children:"public/sample.pdf"}),"."]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{className:"rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm hover:bg-slate-950/60 disabled:opacity-50",onClick:()=>r(H=>Math.max(1,H-1)),disabled:!ut,"aria-label":"Previous page",children:"Prev"}),T.jsx("button",{className:"rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm hover:bg-slate-950/60 disabled:opacity-50",onClick:()=>r(H=>t?Math.min(t,H+1):H+1),disabled:!Ke,"aria-label":"Next page",children:"Next"}),T.jsxs("div",{className:"ml-auto text-sm text-slate-300",children:["Page ",T.jsx("span",{className:"font-semibold",children:i}),t?T.jsxs("span",{className:"text-slate-500",children:[" / ",t]}):null]})]}),T.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/30 p-3",children:[T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("input",{id:"autoTurn",type:"checkbox",className:"mt-1 h-4 w-4",checked:m,onChange:H=>A(H.target.checked)}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"autoTurn",className:"text-sm font-medium",children:"Auto page-turn"}),T.jsx("p",{className:"text-xs text-slate-400",children:"When the page finishes reading, move to the next page."})]})]}),T.jsxs("div",{className:"mt-3 flex items-start gap-3",children:[T.jsx("input",{id:"autoContinue",type:"checkbox",className:"mt-1 h-4 w-4",checked:E,onChange:H=>g(H.target.checked),disabled:!m}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"autoContinue",className:"text-sm font-medium",children:"Auto continue reading"}),T.jsx("p",{className:"text-xs text-slate-400",children:"After turning the page, automatically start speaking the next page."})]})]})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm text-slate-300",htmlFor:"scale",children:["Zoom (",o.toFixed(2),")"]}),T.jsx("input",{id:"scale",type:"range",min:"0.75",max:"2.0",step:"0.05",value:o,onChange:H=>a(parseFloat(H.target.value)),className:"mt-1 w-full"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-slate-300",htmlFor:"voice",children:"Voice"}),T.jsxs("select",{id:"voice",className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950/30 p-2 text-sm",value:f,onChange:H=>p(H.target.value),children:[T.jsx("option",{value:"",children:"Default"}),(((Ph=(js=window.speechSynthesis)==null?void 0:js.getVoices)==null?void 0:Ph.call(js))??[]).map(H=>T.jsxs("option",{value:H.voiceURI,children:[H.name," (",H.lang,")"]},H.voiceURI))]})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm text-slate-300",htmlFor:"rate",children:["Rate (",c.toFixed(2),")"]}),T.jsx("input",{id:"rate",type:"range",min:"0.6",max:"1.4",step:"0.05",value:c,onChange:H=>u(parseFloat(H.target.value)),className:"mt-1 w-full"})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm text-slate-300",htmlFor:"pitch",children:["Pitch (",h.toFixed(2),")"]}),T.jsx("input",{id:"pitch",type:"range",min:"0.6",max:"1.4",step:"0.05",value:h,onChange:H=>d(parseFloat(H.target.value)),className:"mt-1 w-full"})]})]}),T.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[T.jsx("button",{className:"rounded-xl bg-white px-4 py-2 text-sm font-semibold text-slate-950 shadow hover:opacity-90 disabled:opacity-50",onClick:Ht,disabled:cp||w==="speaking","aria-label":"Start reading the current page",children:"Speak"}),T.jsx("button",{className:"rounded-xl border border-slate-700 bg-slate-950/40 px-4 py-2 text-sm hover:bg-slate-950/60 disabled:opacity-50",onClick:Ce,disabled:w!=="speaking","aria-label":"Pause reading",children:"Pause"}),T.jsx("button",{className:"rounded-xl border border-slate-700 bg-slate-950/40 px-4 py-2 text-sm hover:bg-slate-950/60 disabled:opacity-50",onClick:Mr,disabled:w!=="paused","aria-label":"Resume reading",children:"Resume"}),T.jsx("button",{className:"rounded-xl border border-slate-700 bg-slate-950/40 px-4 py-2 text-sm hover:bg-slate-950/60",onClick:re,"aria-label":"Stop reading",children:"Stop"})]}),T.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/30 p-3 text-xs text-slate-300",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("span",{children:"Status"}),T.jsx("span",{className:"font-semibold",children:w})]}),T.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[T.jsx("span",{children:"Words detected"}),T.jsx("span",{className:"font-semibold",children:k.length})]}),T.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[T.jsx("span",{children:"Current word"}),T.jsx("span",{className:"font-semibold",children:D>=0?(Rh=k[D])==null?void 0:Rh.word:""})]})]}),T.jsxs("div",{className:"text-xs text-slate-500",children:["If the pointer/highlight doesnt move: your browser may not emit"," ",T.jsx("code",{children:"onboundary"})," word events. Try Chrome/Edge."]})]})]}),T.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/40 p-4 shadow",children:[T.jsx("h2",{className:"text-base font-semibold",children:"PDF"}),T.jsx("div",{ref:C,className:"mt-3 max-h-[70vh] overflow-auto rounded-xl border border-slate-800 bg-slate-950/30 p-3",children:T.jsx("div",{ref:x,className:"flex justify-center",children:T.jsx(IT,{file:n,onLoadSuccess:Ir,loading:T.jsx("div",{className:"p-6 text-sm text-slate-300",children:"Loading PDF"}),error:T.jsx("div",{className:"p-6 text-sm text-red-300",children:"Failed to load PDF."}),children:T.jsx($T,{pageNumber:i,scale:o,renderTextLayer:!0,renderAnnotationLayer:!1,onRenderTextLayerSuccess:Se})})})}),T.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:["Word highlight uses a DOM ",T.jsx("code",{children:"Range"})," over the exact span substring and draws a fixed overlay rect in viewport coordinates."]})]})]})]})}function JT(){return T.jsxs("div",{className:"min-h-screen",children:[T.jsx("header",{className:"border-b border-slate-800 bg-slate-950/60 backdrop-blur",children:T.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-4",children:[T.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"Virtual Teacher"}),T.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"PDF text-layer  TTS boundary sync  avatar stick points at the spoken word."})]})}),T.jsx("main",{className:"mx-auto max-w-6xl px-4 py-6",children:T.jsx(ZT,{})}),T.jsxs("footer",{className:"mx-auto max-w-6xl px-4 pb-10 text-xs text-slate-500",children:["Tip: Chrome/Edge work best for ",T.jsx("code",{children:"speechSynthesis.onboundary"}),"."]})]})}$p.createRoot(document.getElementById("root")).render(T.jsx(Zb.StrictMode,{children:T.jsx(JT,{})}));
